<!DOCTYPE html><html lang="zh-Hant"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="https://qwer820921.github.io/_next/static/css/be607b33620c6e00.css" data-precedence="next"/><link rel="stylesheet" href="https://qwer820921.github.io/_next/static/css/739e5c607d9731d5.css" data-precedence="next"/><link rel="stylesheet" href="https://qwer820921.github.io/_next/static/css/4bb1c53d4d41ca49.css" data-precedence="next"/><link rel="stylesheet" href="https://qwer820921.github.io/_next/static/css/828ce2d6ffc7bb41.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="https://qwer820921.github.io/_next/static/chunks/webpack-6eefbc0fef8fd205.js"/><script src="https://qwer820921.github.io/_next/static/chunks/4bd1b696-e100a0b1879d5e6b.js" async=""></script><script src="https://qwer820921.github.io/_next/static/chunks/1684-9b53760636e10952.js" async=""></script><script src="https://qwer820921.github.io/_next/static/chunks/main-app-c0d2570cf703bee2.js" async=""></script><script src="https://qwer820921.github.io/_next/static/chunks/6283-1586b7e20e5a28d4.js" async=""></script><script src="https://qwer820921.github.io/_next/static/chunks/app/layout-984d35e9d146542e.js" async=""></script><script src="https://qwer820921.github.io/_next/static/chunks/app/blog/%5Bslug%5D/page-55dd06bf73e32a25.js" async=""></script><link rel="preload" href="https://qwer820921.github.io/_next/static/chunks/2990.dad4388d14b132db.js" as="script" fetchPriority="low"/><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-CCKVESHCQ1" as="script"/><link rel="preload" href="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2709303513603814" as="script" crossorigin=""/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/logo192.png"/><link rel="manifest" href="/manifest.json"/><link rel="preload" href="/logo192.png" as="image"/><title>【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件 | 子yee 萬事屋 | 子yee</title><meta name="description" content="深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。"/><meta name="author" content="子yee"/><meta name="keywords" content="子yee 萬事屋, 台股查詢, 自選股, 技術小工具, 股票資訊平台, 技術顧問, 自動化工具"/><meta name="google-site-verification" content="adHIcDQiasHY4YzPlrpmSSPKl7Oj1WxrPJ_4GV4PQcM"/><meta property="og:title" content="【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件"/><meta property="og:description" content="深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。"/><meta property="og:image" content="https://qwer820921.github.io/images/img15.jpg"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件"/><meta name="twitter:description" content="深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。"/><meta name="twitter:image" content="https://qwer820921.github.io/images/img15.jpg"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><script>document.querySelectorAll('body link[rel="icon"], body link[rel="apple-touch-icon"]').forEach(el => document.head.appendChild(el))</script><script src="https://qwer820921.github.io/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><main class="container-fluid mt-5 p-0"><article class="container py-5"><div class="row justify-content-center"><div class="col-12 col-lg-8"><div class="card shadow-sm border-0"><div class="card-body p-4 p-md-5"><header class="mb-5 pb-4 border-bottom"><div id="static-back-btn" style="display:inline-flex;margin-bottom:1rem;cursor:pointer;position:relative;z-index:1"><div class="btn d-inline-flex align-items-center gap-2 shadow rounded-pill px-4 py-2 text-decoration-none" role="button" style="pointer-events:auto;background-color:#fff;backdrop-filter:none;border:1px solid rgba(0,0,0,0.08);color:#495057;font-weight:500;transition:all 0.2s ease;cursor:pointer"><span>回到文章列表</span></div></div><h1 class="fw-bold mb-3 display-6">【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件</h1><div class="text-muted d-flex align-items-center gap-3"><div class="d-flex align-items-center gap-2"><i class="bi bi-person-fill"></i><span>作者:</span>子yee</div><div class="d-flex align-items-center gap-2"><i class="bi bi-calendar3"></i><span>日期:</span>2026-02-11</div></div></header><div class="blogContent_blogContent__VY_R4"><h2>1. Overview</h2>
<p>在人工智慧（AI）與使用者介面（UI）的交匯點，一個革命性的概念正在崛起：<strong>Generative UI (GenUI)</strong>。傳統上，AI 應用程式主要透過文字回應與使用者互動，無論是聊天機器人、內容生成器或數據分析工具，其輸出形式多為純文本。這意味著使用者在接收到 AI 的洞察或建議後，仍需手動將這些資訊轉化為實際的操作或視覺化呈現。然而，GenUI 的出現，正在打破這一限制，它允許 AI 不僅能「說」出答案，更能直接「畫」出一個可互動、功能性的使用者介面 [1]。</p>
<p>本文件將深入探討 Generative UI 的核心概念，並結合您在 Angular 與 ApexCharts 的經驗，實作一個端到端的工作流。我們將學習如何讓 AI 不再僅僅回傳文字，而是輸出結構化的 JSON 配置，前端應用程式（特別是 Angular）能夠即時解析這些配置，動態渲染出圖表、按鈕或其他互動組件。例如，當使用者詢問「分析台積電走勢」時，AI 不再僅回傳文字描述，而是直接生成一個包含 K 線圖與買賣按鈕的互動式儀表板，讓使用者能夠直接點擊操作。這將 Chatbot 從單純的對話介面，升級為一個真正的「功能性 GUI」，大幅提升使用者體驗與任務達成效率 [2]。</p>
<h2>2. Architecture / Design</h2>
<p>實現 Generative UI 需要 AI 後端與前端應用程式之間緊密的協同工作。其核心在於建立一個標準化的通訊協定，讓 AI 能夠以結構化的方式描述所需的 UI 組件，而前端則負責解析並動態渲染這些組件 [3]。</p>
<h3>2.1 AI 端：結構化輸出 (Structured Output)</h3>
<p>AI 後端是 GenUI 的「設計師」，負責根據使用者的意圖和上下文，決定生成何種 UI 組件及其配置。這需要以下關鍵能力：</p>
<ul>
<li><strong>Tool Calling / Function Calling</strong>：AI 必須具備調用預定義工具的能力。這些工具可以是抽象的 UI 渲染指令，例如 <code>render_chart(config)</code>、<code>show_action_buttons(buttons)</code> 等。當 AI 判斷需要視覺化或互動時，它會選擇調用這些工具 [4]。</li>
<li><strong>JSON Schema 定義</strong>：為了確保 AI 輸出的 UI 配置能夠被前端正確解析，必須為每個可生成的 UI 組件定義嚴格的 JSON Schema。例如，一個圖表組件的配置可能包含 <code>chartType</code>、<code>series</code>、<code>options</code> 等欄位，而按鈕組件則包含 <code>label</code>、<code>action</code> 等。JSON Schema 不僅規範了數據格式，也作為 AI 生成時的「藍圖」 [5]。</li>
<li><strong>Prompt Engineering</strong>：引導 AI 根據上下文決定「何時」以及「如何」生成 UI 是關鍵。提示詞需要明確指示 AI 在特定情境下，應優先輸出結構化的 UI 配置而非純文本。這可能涉及 Few-shot Learning，提供 AI 範例來學習如何將用戶意圖映射到 UI 組件的 JSON 描述 [6]。</li>
</ul>
<h3>2.2 前端端：Angular 動態渲染 (Dynamic Rendering)</h3>
<p>前端應用程式（在此為 Angular）是 GenUI 的「建造者」，負責接收 AI 輸出的結構化配置，並將其轉換為實際的互動式 UI。這需要強大的動態組件渲染能力：</p>
<ul>
<li><strong>Component Registry (組件註冊表)</strong>：前端需要維護一個可用的 UI 組件映射表。這個註冊表將 AI 輸出中的組件類型字串（例如 <code>&quot;stock-chart&quot;</code>、<code>&quot;action-buttons&quot;</code>）對應到實際的 Angular 組件類別（例如 <code>StockChartComponent</code>、<code>ActionButtonsComponent</code>）。這使得前端能夠根據 AI 的指令，找到並載入正確的組件 [7]。</li>
<li><strong>Dynamic Component Loader (動態組件載入器)</strong>：Angular 提供了強大的機制來動態載入和實例化組件。主要方法包括：<!-- -->
<ul>
<li><strong><code>ViewContainerRef</code></strong>：允許在運行時動態地將組件插入到 DOM 中。這是最常見且靈活的動態組件載入方式 [8]。</li>
<li><strong><code>ngComponentOutlet</code></strong>：一個結構型指令，可以根據組件類別動態渲染組件，通常用於更簡單的場景 [9]。</li>
<li><strong><code>ComponentMirror</code> (Angular 17+)</strong>：提供更現代化的 API 來操作組件實例，尤其是在 Signals 時代，可以更高效地處理組件的輸入與輸出 [10]。</li>
</ul>
</li>
<li><strong>State &amp; Input Binding</strong>：將 AI 輸出的 JSON 配置中的數據和屬性，綁定到動態載入組件的 <code>@Input()</code> 屬性上。同時，監聽組件發出的 <code>@Output()</code> 事件，將使用者的互動（例如點擊按鈕、圖表縮放）回傳給 AI 後端或處理本地業務邏輯 [11]。</li>
</ul>
<h2>3. 實作工作流 (Workflow)</h2>
<p>以下是一個基於 Angular 與 ApexCharts 實現 Generative UI 的典型工作流：</p>
<ol>
<li><strong>使用者查詢 (User Query)</strong>：使用者在聊天介面中輸入：「幫我分析台積電最近一週的走勢，並提供買賣建議。」</li>
<li><strong>AI 推理 (AI Reasoning)</strong>：<!-- -->
<ul>
<li>AI 接收到查詢後，透過其內部的工具調用機制，判斷需要獲取股票數據並以圖表形式呈現，同時提供交易操作。</li>
<li>AI 調用一個名為 <code>render_stock_analysis_ui</code> 的工具，並根據其對話上下文和知識，生成該工具所需的參數。</li>
</ul>
</li>
<li><strong>JSON 配置輸出 (JSON Output)</strong>：AI 後端將生成一個符合預定義 JSON Schema 的配置對象，例如：<!-- -->
<pre><code class="language-json">{
  &quot;componentType&quot;: &quot;stock-chart-dashboard&quot;,
  &quot;data&quot;: {
    &quot;symbol&quot;: &quot;TSM&quot;,
    &quot;timeframe&quot;: &quot;1W&quot;,
    &quot;chartOptions&quot;: {
      /* ApexCharts 配置 */
    },
    &quot;series&quot;: [
      /* 股票數據 */
    ]
  },
  &quot;actions&quot;: [
    {
      &quot;label&quot;: &quot;買入&quot;,
      &quot;actionType&quot;: &quot;buy&quot;,
      &quot;payload&quot;: { &quot;symbol&quot;: &quot;TSM&quot;, &quot;amount&quot;: 100 }
    },
    {
      &quot;label&quot;: &quot;賣出&quot;,
      &quot;actionType&quot;: &quot;sell&quot;,
      &quot;payload&quot;: { &quot;symbol&quot;: &quot;TSM&quot;, &quot;amount&quot;: 100 }
    }
  ]
}
</code></pre>
</li>
<li><strong>Angular 聊天組件攔截 (Angular Interceptor)</strong>：前端的聊天組件（例如 <code>ChatComponent</code>）接收到 AI 的回應。它會檢查回應內容，如果發現是結構化的 UI 配置（例如以特定標籤或 JSON 格式開頭），則會攔截並處理。</li>
<li><strong>動態組件渲染 (Dynamic Render)</strong>：<!-- -->
<ul>
<li>聊天組件根據 <code>componentType</code> 查找 <code>Component Registry</code>，找到對應的 <code>StockChartDashboardComponent</code>。</li>
<li>利用 <code>ViewContainerRef</code> 或 <code>ComponentMirror</code> 動態載入 <code>StockChartDashboardComponent</code>。</li>
<li>將 JSON 配置中的 <code>data</code> 和 <code>actions</code> 綁定到 <code>StockChartDashboardComponent</code> 的 <code>@Input()</code> 屬性。</li>
<li><code>StockChartDashboardComponent</code> 內部使用 ApexCharts 庫，根據接收到的 <code>chartOptions</code> 和 <code>series</code> 數據渲染出 K 線圖，並根據 <code>actions</code> 渲染出買賣按鈕。</li>
</ul>
</li>
<li><strong>使用者互動 (User Interaction)</strong>：<!-- -->
<ul>
<li>使用者可以直接在 K 線圖上進行縮放、平移等操作。</li>
<li>使用者點擊「買入」按鈕，<code>StockChartDashboardComponent</code> 發出一個 <code>@Output()</code> 事件，包含 <code>actionType</code> 和 <code>payload</code>。</li>
<li>聊天組件接收到這個事件，並將其轉發回 AI 後端，觸發後續的交易執行邏輯。</li>
</ul>
</li>
</ol>
<h2>4. Prerequisites</h2>
<p>要實作 Generative UI 與 Angular 動態渲染，您需要具備以下環境和知識：</p>
<ul>
<li><strong>Angular 開發環境</strong>：Node.js、Angular CLI (v17+ 推薦)。</li>
<li><strong>Angular 基礎知識</strong>：組件、服務、模組、輸入/輸出屬性、生命週期鉤子。</li>
<li><strong>Angular 動態組件載入</strong>：熟悉 <code>ViewContainerRef</code>、<code>ComponentFactoryResolver</code> (舊版) 或 <code>ComponentMirror</code> (新版) 的使用。</li>
<li><strong>ApexCharts 知識</strong>：了解 ApexCharts 的配置選項、數據格式和事件處理。</li>
<li><strong>AI SDK / LLM API 存取</strong>：如果使用 Vercel AI SDK 或其他 LLM 服務，需要相關的 API 金鑰和 SDK 配置。</li>
<li><strong>TypeScript 基礎</strong>：強型別語言有助於定義清晰的 JSON Schema 和組件介面。</li>
<li><strong>JSON Schema 知識</strong>：理解如何定義和驗證 JSON 數據結構。</li>
</ul>
<h2>5. Implementation / Code Example</h2>
<p>本節將提供一個簡化的 Angular 程式碼範例，展示如何動態渲染基於 AI 輸出的 JSON 配置的組件。我們將專注於前端的動態渲染邏輯，假設 AI 後端已經能夠輸出符合預期格式的 JSON。</p>
<h3>5.1 專案初始化</h3>
<pre><code class="language-bash">ng new generative-ui-demo --standalone --routing=false
cd generative-ui-demo
ng add ng-apexcharts # 安裝 ApexCharts for Angular
</code></pre>
<h3>5.2 定義 UI 配置介面 (<code>src/app/shared/ui-config.model.ts</code>)</h3>
<pre><code class="language-typescript">export interface ChartConfig {
  chartType: string; // e.g., &#x27;line&#x27;, &#x27;candlestick&#x27;
  series: any[];
  options: any;
}

export interface ActionButtonConfig {
  label: string;
  actionType: string; // e.g., &#x27;buy&#x27;, &#x27;sell&#x27;
  payload: any;
}

export interface GenerativeUIConfig {
  componentType: &quot;stock-chart-dashboard&quot;; // 假設只有一種 GenUI 組件類型
  data: ChartConfig;
  actions: ActionButtonConfig[];
}
</code></pre>
<h3>5.3 股票圖表儀表板組件 (<code>src/app/stock-chart-dashboard/stock-chart-dashboard.component.ts</code>)</h3>
<pre><code class="language-typescript">import {
  Component,
  Input,
  Output,
  EventEmitter,
  OnInit,
  ViewChild,
} from &quot;@angular/core&quot;;
import { CommonModule } from &quot;@angular/common&quot;;
import { NgApexchartsModule } from &quot;ng-apexcharts&quot;;
import { ChartConfig, ActionButtonConfig } from &quot;../shared/ui-config.model&quot;;

// 引入 ApexCharts 類型定義
import {
  ChartOptions,
  ApexAxisChartSeries,
  ApexChart,
  ApexXAxis,
  ApexDataLabels,
  ApexTooltip,
  ApexStroke,
  ApexYAxis,
  ApexPlotOptions,
  ApexCandlestick,
} from &quot;ng-apexcharts&quot;;

// 擴展 ChartOptions 以包含所有可能的 ApexCharts 配置
export type StockChartOptions = {
  series: ApexAxisChartSeries;
  chart: ApexChart;
  xaxis: ApexXAxis;
  yaxis: ApexYAxis | ApexYAxis[];
  dataLabels: ApexDataLabels;
  tooltip: ApexTooltip;
  stroke: ApexStroke;
  plotOptions: ApexPlotOptions;
  candlestick: ApexCandlestick;
} &amp; ChartOptions;

@Component({
  selector: &quot;app-stock-chart-dashboard&quot;,
  standalone: true,
  imports: [CommonModule, NgApexchartsModule],
  template: `
    &lt;div class=&quot;stock-dashboard&quot;&gt;
      &lt;div class=&quot;chart-container&quot;&gt;
        &lt;ng-apexcharts
          *ngIf=&quot;chartData &amp;&amp; chartOptions&quot;
          [series]=&quot;chartData.series&quot;
          [chart]=&quot;chartOptions.chart&quot;
          [xaxis]=&quot;chartOptions.xaxis&quot;
          [yaxis]=&quot;chartOptions.yaxis&quot;
          [dataLabels]=&quot;chartOptions.dataLabels&quot;
          [tooltip]=&quot;chartOptions.tooltip&quot;
          [stroke]=&quot;chartOptions.stroke&quot;
          [plotOptions]=&quot;chartOptions.plotOptions&quot;
          [candlestick]=&quot;chartOptions.candlestick&quot;
        &gt;&lt;/ng-apexcharts&gt;
      &lt;/div&gt;
      &lt;div class=&quot;action-buttons&quot;&gt;
        &lt;button
          *ngFor=&quot;let action of actions&quot;
          (click)=&quot;onActionClick(action)&quot;
          class=&quot;btn btn-primary&quot;
        &gt;
          {{ action.label }}
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `,
  styles: [
    `
      .stock-dashboard {
        border: 1px solid #ccc;
        padding: 15px;
        border-radius: 8px;
        margin-top: 20px;
      }
      .chart-container {
        margin-bottom: 15px;
      }
      .action-buttons button {
        margin-right: 10px;
        padding: 8px 15px;
        cursor: pointer;
      }
      .btn-primary {
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
      }
    `,
  ],
})
export class StockChartDashboardComponent implements OnInit {
  @Input() chartConfig!: ChartConfig;
  @Input() actions!: ActionButtonConfig[];
  @Output() actionTriggered = new EventEmitter&lt;{
    actionType: string;
    payload: any;
  }&gt;();

  public chartData: ChartConfig[&quot;data&quot;] | undefined;
  public chartOptions: Partial&lt;StockChartOptions&gt; | undefined;

  ngOnInit(): void {
    if (this.chartConfig) {
      this.chartData = { series: this.chartConfig.series };
      this.chartOptions = {
        ...this.chartConfig.options,
        chart: {
          ...this.chartConfig.options.chart,
          type: this.chartConfig.chartType,
        },
      };
    }
  }

  onActionClick(action: ActionButtonConfig): void {
    this.actionTriggered.emit({
      actionType: action.actionType,
      payload: action.payload,
    });
  }
}
</code></pre>
<h3>5.4 動態渲染服務 (<code>src/app/shared/dynamic-ui.service.ts</code>)</h3>
<pre><code class="language-typescript">import {
  Injectable,
  Type,
  ViewContainerRef,
  ComponentRef,
} from &quot;@angular/core&quot;;
import { GenerativeUIConfig } from &quot;./ui-config.model&quot;;
import { StockChartDashboardComponent } from &quot;../stock-chart-dashboard/stock-chart-dashboard.component&quot;;

@Injectable({ providedIn: &quot;root&quot; })
export class DynamicUiService {
  private componentRegistry: { [key: string]: Type&lt;any&gt; } = {
    &quot;stock-chart-dashboard&quot;: StockChartDashboardComponent,
  };

  // 註冊組件，允許擴展
  registerComponent(type: string, component: Type&lt;any&gt;): void {
    this.componentRegistry[type] = component;
  }

  renderDynamicComponent(
    viewContainerRef: ViewContainerRef,
    uiConfig: GenerativeUIConfig
  ): ComponentRef&lt;any&gt; | null {
    const componentType = this.componentRegistry[uiConfig.componentType];

    if (!componentType) {
      console.error(
        `Component type ${uiConfig.componentType} not found in registry.`
      );
      return null;
    }

    viewContainerRef.clear(); // 清除舊組件
    const componentRef = viewContainerRef.createComponent(componentType);

    // 設置輸入屬性
    if (uiConfig.componentType === &quot;stock-chart-dashboard&quot;) {
      const stockDashboardInstance =
        componentRef.instance as StockChartDashboardComponent;
      stockDashboardInstance.chartConfig = uiConfig.data;
      stockDashboardInstance.actions = uiConfig.actions;
      // 訂閱輸出事件
      stockDashboardInstance.actionTriggered.subscribe((event) =&gt; {
        console.log(&quot;User action triggered:&quot;, event);
        // 在這裡處理用戶互動，例如發送給 AI 後端
        alert(`執行動作: ${event.actionType} ${JSON.stringify(event.payload)}`);
      });
    }

    return componentRef;
  }
}
</code></pre>
<h3>5.5 聊天組件 (<code>src/app/chat/chat.component.ts</code>)</h3>
<pre><code class="language-typescript">import { Component, ViewChild, ViewContainerRef, OnInit } from &quot;@angular/core&quot;;
import { CommonModule } from &quot;@angular/common&quot;;
import { FormsModule } from &quot;@angular/forms&quot;;
import { DynamicUiService } from &quot;../shared/dynamic-ui.service&quot;;
import { GenerativeUIConfig } from &quot;../shared/ui-config.model&quot;;
import { StockChartDashboardComponent } from &quot;../stock-chart-dashboard/stock-chart-dashboard.component&quot;;

@Component({
  selector: &quot;app-chat&quot;,
  standalone: true,
  imports: [CommonModule, FormsModule, StockChartDashboardComponent], // 引入 StockChartDashboardComponent 確保其可用
  template: `
    &lt;div class=&quot;chat-container&quot;&gt;
      &lt;div class=&quot;messages&quot;&gt;
        &lt;div *ngFor=&quot;let message of messages&quot; class=&quot;message&quot;&gt;
          &lt;div *ngIf=&quot;message.type === &#x27;text&#x27;&quot;&gt;
            &lt;strong&gt;{{ message.sender }}:&lt;/strong&gt; {{ message.content }}
          &lt;/div&gt;
          &lt;div *ngIf=&quot;message.type === &#x27;ui&#x27;&quot;&gt;
            &lt;strong&gt;{{ message.sender }}:&lt;/strong&gt;
            &lt;ng-container #dynamicUiHost&gt;&lt;/ng-container&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&quot;input-area&quot;&gt;
        &lt;input
          [(ngModel)]=&quot;userInput&quot;
          placeholder=&quot;輸入你的問題...&quot;
          (keyup.enter)=&quot;sendMessage()&quot;
        /&gt;
        &lt;button (click)=&quot;sendMessage()&quot;&gt;發送&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `,
  styles: [
    `
      .chat-container {
        width: 80%;
        margin: 20px auto;
        border: 1px solid #eee;
        padding: 20px;
        border-radius: 8px;
      }
      .messages {
        min-height: 300px;
        max-height: 500px;
        overflow-y: auto;
        border-bottom: 1px solid #eee;
        margin-bottom: 15px;
        padding-bottom: 10px;
      }
      .message {
        margin-bottom: 10px;
      }
      .input-area {
        display: flex;
      }
      .input-area input {
        flex-grow: 1;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-right: 10px;
      }
      .input-area button {
        padding: 8px 15px;
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
    `,
  ],
})
export class ChatComponent implements OnInit {
  @ViewChild(&quot;dynamicUiHost&quot;, { read: ViewContainerRef, static: true })
  dynamicUiHost!: ViewContainerRef;

  messages: {
    type: &quot;text&quot; | &quot;ui&quot;;
    sender: string;
    content?: string;
    uiConfig?: GenerativeUIConfig;
  }[] = [];
  userInput: string = &quot;&quot;;

  constructor(private dynamicUiService: DynamicUiService) {}

  ngOnInit(): void {
    // 註冊組件，確保服務知道如何渲染
    this.dynamicUiService.registerComponent(
      &quot;stock-chart-dashboard&quot;,
      StockChartDashboardComponent
    );
  }

  sendMessage(): void {
    if (!this.userInput.trim()) return;

    this.messages.push({
      type: &quot;text&quot;,
      sender: &quot;User&quot;,
      content: this.userInput,
    });

    // 模擬 AI 回應
    if (this.userInput.includes(&quot;台積電走勢&quot;)) {
      const aiResponse: GenerativeUIConfig = {
        componentType: &quot;stock-chart-dashboard&quot;,
        data: {
          chartType: &quot;candlestick&quot;,
          series: [
            {
              name: &quot;TSM&quot;,
              data: [
                {
                  x: new Date(&quot;2026-02-03&quot;).getTime(),
                  y: [600, 610, 595, 605],
                },
                {
                  x: new Date(&quot;2026-02-04&quot;).getTime(),
                  y: [605, 615, 600, 612],
                },
                {
                  x: new Date(&quot;2026-02-05&quot;).getTime(),
                  y: [612, 620, 608, 618],
                },
                {
                  x: new Date(&quot;2026-02-06&quot;).getTime(),
                  y: [618, 625, 610, 622],
                },
                {
                  x: new Date(&quot;2026-02-07&quot;).getTime(),
                  y: [622, 630, 615, 628],
                },
                {
                  x: new Date(&quot;2026-02-10&quot;).getTime(),
                  y: [628, 635, 620, 632],
                },
                {
                  x: new Date(&quot;2026-02-11&quot;).getTime(),
                  y: [632, 640, 625, 638],
                },
              ],
            },
          ],
          options: {
            chart: {
              height: 350,
              type: &quot;candlestick&quot;,
            },
            title: {
              text: &quot;台積電 (TSM) 近期走勢&quot;,
              align: &quot;left&quot;,
            },
            xaxis: {
              type: &quot;datetime&quot;,
            },
            yaxis: {
              tooltip: {
                enabled: true,
              },
            },
          },
        },
        actions: [
          {
            label: &quot;買入 100 股&quot;,
            actionType: &quot;buy&quot;,
            payload: { symbol: &quot;TSM&quot;, amount: 100 },
          },
          {
            label: &quot;賣出 50 股&quot;,
            actionType: &quot;sell&quot;,
            payload: { symbol: &quot;TSM&quot;, amount: 50 },
          },
        ],
      };
      this.messages.push({ type: &quot;ui&quot;, sender: &quot;AI&quot;, uiConfig: aiResponse });
      this.dynamicUiService.renderDynamicComponent(
        this.dynamicUiHost,
        aiResponse
      );
    } else {
      this.messages.push({
        type: &quot;text&quot;,
        sender: &quot;AI&quot;,
        content: `您好，您說的是：&quot;${this.userInput}&quot; 嗎？`,
      });
    }

    this.userInput = &quot;&quot;;
  }
}
</code></pre>
<h3>5.6 根組件 (<code>src/app/app.component.ts</code>)</h3>
<pre><code class="language-typescript">import { Component } from &quot;@angular/core&quot;;
import { CommonModule } from &quot;@angular/common&quot;;
import { RouterOutlet } from &quot;@angular/router&quot;;
import { ChatComponent } from &quot;./chat/chat.component&quot;;

@Component({
  selector: &quot;app-root&quot;,
  standalone: true,
  imports: [CommonModule, RouterOutlet, ChatComponent],
  template: `
    &lt;div class=&quot;main-container&quot;&gt;
      &lt;h1&gt;Generative UI Demo&lt;/h1&gt;
      &lt;app-chat&gt;&lt;/app-chat&gt;
    &lt;/div&gt;
  `,
  styles: [
    `
      .main-container {
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 20px;
      }
      h1 {
        color: #333;
      }
    `,
  ],
})
export class AppComponent {
  title = &quot;generative-ui-demo&quot;;
}
</code></pre>
<h3>5.7 運行應用程式</h3>
<pre><code class="language-bash">ng serve --open
</code></pre>
<p>打開瀏覽器，在聊天框中輸入「台積電走勢」，您將會看到 AI 不僅回覆文字，還會動態渲染出一個包含 K 線圖和買賣按鈕的互動式儀表板。</p>
<h2>6. Parameters / API Reference</h2>
<p>本節將抽象出 Generative UI 實現中涉及的關鍵介面和參數。</p>
<h3>6.1 <code>GenerativeUIConfig</code> (AI 輸出結構)</h3>
<table><thead><tr><th style="text-align:left">欄位名稱</th><th style="text-align:left">類型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>componentType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">指定前端應渲染的組件類型（例如 <code>&quot;stock-chart-dashboard&quot;</code>）。</td></tr><tr><td style="text-align:left"><code>data</code></td><td style="text-align:left"><code>ChartConfig</code></td><td style="text-align:left">傳遞給組件的數據配置，例如圖表的 <code>series</code> 和 <code>options</code>。</td></tr><tr><td style="text-align:left"><code>actions</code></td><td style="text-align:left"><code>ActionButtonConfig[]</code></td><td style="text-align:left">傳遞給組件的互動按鈕配置，包含 <code>label</code>、<code>actionType</code> 和 <code>payload</code>。</td></tr></tbody></table>
<h3>6.2 <code>ChartConfig</code> (圖表配置)</h3>
<table><thead><tr><th style="text-align:left">欄位名稱</th><th style="text-align:left">類型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>chartType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">圖表類型（例如 <code>&quot;line&quot;</code>, <code>&quot;candlestick&quot;</code>）。</td></tr><tr><td style="text-align:left"><code>series</code></td><td style="text-align:left"><code>any[]</code></td><td style="text-align:left">ApexCharts 的數據系列配置。</td></tr><tr><td style="text-align:left"><code>options</code></td><td style="text-align:left"><code>any</code></td><td style="text-align:left">ApexCharts 的圖表選項配置。</td></tr></tbody></table>
<h3>6.3 <code>ActionButtonConfig</code> (互動按鈕配置)</h3>
<table><thead><tr><th style="text-align:left">欄位名稱</th><th style="text-align:left">類型</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>label</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">按鈕上顯示的文字。</td></tr><tr><td style="text-align:left"><code>actionType</code></td><td style="text-align:left"><code>string</code></td><td style="text-align:left">按鈕觸發的動作類型（例如 <code>&quot;buy&quot;</code>, <code>&quot;sell&quot;</code>）。</td></tr><tr><td style="text-align:left"><code>payload</code></td><td style="text-align:left"><code>any</code></td><td style="text-align:left">動作相關的數據，例如股票代碼、數量等。</td></tr></tbody></table>
<h3>6.4 <code>DynamicUiService</code> 介面</h3>
<table><thead><tr><th style="text-align:left">方法名稱</th><th style="text-align:left">參數</th><th style="text-align:left">返回值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td style="text-align:left"><code>registerComponent</code></td><td style="text-align:left"><code>type: string, component: Type&lt;any&gt;</code></td><td style="text-align:left"><code>void</code></td><td style="text-align:left">註冊可動態渲染的組件及其對應的類型字串。</td></tr><tr><td style="text-align:left"><code>renderDynamicComponent</code></td><td style="text-align:left"><code>viewContainerRef: ViewContainerRef, uiConfig: GenerativeUIConfig</code></td><td style="text-align:left"><code>ComponentRef&lt;any&gt; | null</code></td><td style="text-align:left">根據 <code>uiConfig</code> 動態渲染組件到指定的 <code>ViewContainerRef</code>。</td></tr></tbody></table>
<h2>7. Notes &amp; Best Practices</h2>
<ol>
<li><strong>安全性優先</strong>：GenUI 的核心挑戰之一是安全性。由於 AI 能夠生成程式碼或配置，必須嚴格限制 AI 只能生成預定義、經過安全審核的組件類型和配置選項。絕對禁止 AI 生成任意的 HTML、JavaScript 或 CSS，以防範跨站腳本攻擊 (XSS) 或其他惡意行為 [12]。</li>
<li><strong>清晰的 JSON Schema</strong>：AI 輸出的 JSON 配置必須有清晰、嚴格的 Schema 定義。這不僅有助於前端的解析和驗證，也能作為 AI 提示工程的強大約束，確保 AI 輸出符合預期格式 [5]。</li>
<li><strong>組件的原子性與可重用性</strong>：設計 GenUI 組件時，應遵循原子設計原則，使其盡可能小巧、獨立且可重用。例如，一個圖表組件、一個按鈕組件、一個表格組件等。這有助於 AI 更靈活地組合 UI，也方便前端的維護 [13]。</li>
<li><strong>錯誤處理與回退機制</strong>：當 AI 輸出無效的 JSON 配置，或前端動態載入組件失敗時，應用程式應具備健壯的錯誤處理機制。例如，可以回退到顯示純文本錯誤訊息，或提供一個預設的 UI 替代方案 [14]。</li>
<li><strong>性能優化</strong>：動態渲染組件可能會帶來性能開銷。應考慮使用 Angular 的 <code>OnPush</code> 變化檢測策略、延遲載入（Lazy Loading）組件，以及對 AI 輸出的 JSON 進行緩存，以優化渲染性能 [15]。</li>
<li><strong>提示工程的精煉</strong>：AI 的輸出品質直接影響 GenUI 的效果。需要不斷迭代和優化提示詞，讓 AI 更好地理解使用者意圖，並精確地生成所需的 UI 配置。可以利用 Few-shot 範例來訓練 AI 輸出特定格式的 JSON [6]。</li>
<li><strong>使用者體驗 (UX) 設計</strong>：即使是 AI 生成的 UI，也應考慮其可用性和一致性。確保生成的 UI 符合品牌指南，並且互動流程直觀。提供明確的視覺回饋，讓使用者知道哪些部分是 AI 生成的，哪些是靜態內容 [1]。</li>
</ol>
<h2>8. 為什麼選擇這種方式？</h2>
<p>Generative UI 代表了人機互動的未來趨勢，它將 AI 的智慧與前端的視覺化能力無縫結合，帶來了傳統 Chatbot 無法比擬的優勢：</p>
<ol>
<li><strong>從「閱讀」到「操作」的範式轉變</strong>：傳統 AI 應用要求使用者閱讀文字回應，然後自行判斷並執行後續操作。GenUI 則將這一過程簡化為直接的視覺化呈現與互動。例如，AI 分析股票後直接呈現 K 線圖和交易按鈕，使用者無需離開對話介面即可完成交易，極大地提升了效率和便利性 [2]。</li>
<li><strong>提升使用者體驗 (UX)</strong>：視覺化數據比純文本更容易理解和分析。GenUI 能夠根據上下文動態生成最適合當前任務的 UI，例如圖表、表格、表單或控制面板，使得資訊呈現更直觀、互動更自然，從而顯著改善使用者體驗 [1]。</li>
<li><strong>加速任務達成</strong>：透過將複雜的數據分析或操作流程直接嵌入到對話介面中，GenUI 減少了使用者在不同應用程式之間切換的次數，縮短了完成任務的路徑。這對於需要快速決策和響應的場景（如金融交易、即時監控）尤其有價值。</li>
<li><strong>降低認知負荷</strong>：AI 直接將複雜的數據或操作選項以結構化的 UI 呈現，降低了使用者理解和處理資訊的認知負荷。使用者無需記憶複雜的指令或在腦中構建視覺模型，只需直觀地與介面互動即可 [3]。</li>
<li><strong>高度客製化與動態性</strong>：GenUI 的核心在於其動態性。AI 可以根據每個使用者的具體查詢、偏好和歷史互動，生成高度客製化的 UI。這使得應用程式能夠提供更個人化、更具響應性的體驗，超越了傳統靜態介面的限制。</li>
<li><strong>擴展 AI 的應用邊界</strong>：GenUI 將 AI 的能力從純粹的資訊提供者，擴展到成為一個能夠主動構建和呈現功能性工具的「智慧助手」。這為 AI 在企業應用、數據分析、自動化控制等領域開闢了全新的應用場景，是從「玩具專案」跨入「產品級應用」的關鍵一步 [1]。</li>
</ol>
<hr/>
<p><strong>參考資料</strong></p>
<ul>
<li>[1] UX Planet. (2025, October 13). <em>GenUI Design: Foundational Patterns</em>. Retrieved from <a href="https://uxplanet.org/genui-design-foundational-patterns-633320d0dfea">https://uxplanet.org/genui-design-foundational-patterns-633320d0dfea</a></li>
<li>[2] YouTube. (2026, January 30). <em>Generative UI: Specs, Patterns, and the Protocols Behind</em>. Retrieved from <a href="https://www.youtube.com/watch?v=Z4aSGCs_O5A">https://www.youtube.com/watch?v=Z4aSGCs_O5A</a></li>
<li>[3] Medium. (2025, August 21). <em>Angular Meets Generative AI: Best Practices Made Easy</em>. Retrieved from <a href="https://medium.com/@davidepassafaro/angular-meets-generative-ai-best-practices-made-easy-2641fbe643ed">https://medium.com/@davidepassafaro/angular-meets-generative-ai-best-practices-made-easy-2641fbe643ed</a></li>
<li>[4] Angular.dev. (n.d.). <em>Build with AI - Angular</em>. Retrieved from <a href="https://angular.dev/ai">https://angular.dev/ai</a></li>
<li>[5] GitHub. (2026, February 1). <em>Generative UI examples for: AG-UI, A2UI/Open-JSON-UI, and MCP</em>. Retrieved from <a href="https://github.com/CopilotKit/generative-ui">https://github.com/CopilotKit/generative-ui</a></li>
<li>[6] Angular Space. (2026, January 22). <em>Gemini and Angular, Part II: Creating Generative UIs</em>. Retrieved from <a href="https://www.angularspace.com/gemini-and-angular-part-ii-creating-generative-uis/">https://www.angularspace.com/gemini-and-angular-part-ii-creating-generative-uis/</a></li>
<li>[7] Rangle.io. (2023, July 24). <em>How to render dynamic components in Angular</em>. Retrieved from <a href="https://rangle.io/blog/how-to-render-dynamic-components-in-angular">https://rangle.io/blog/how-to-render-dynamic-components-in-angular</a></li>
<li>[8] Stack Overflow. (2016, May 21). <em>Angular RC 2 - Dynamically Render Components from a json file</em>. Retrieved from <a href="https://stackoverflow.com/questions/37368068/angular-rc-2-dynamically-render-components-from-a-json-file">https://stackoverflow.com/questions/37368068/angular-rc-2-dynamically-render-components-from-a-json-file</a></li>
<li>[9] Pluralsight. (2020, February 20). <em>How to Render a Component Dynamically Based on a JSON Config</em>. Retrieved from <a href="https://www.pluralsight.com/resources/blog/guides/how-to-render-a-component-dynamically-based-on-a-json-config">https://www.pluralsight.com/resources/blog/guides/how-to-render-a-component-dynamically-based-on-a-json-config</a></li>
<li>[10] Angular.love. (2025, December 16). <em>Building Dynamic Forms in Angular Using JSON Schema and Signals</em>. Retrieved from <a href="https://angular.love/building-dynamic-forms-in-angular-using-json-schema-and-signals">https://angular.love/building-dynamic-forms-in-angular-using-json-schema-and-signals</a></li>
<li>[11] AI SDK. (n.d.). <em>Reference: AI SDK UI</em>. Retrieved from <a href="https://ai-sdk.dev/docs/reference/ai-sdk-ui">https://ai-sdk.dev/docs/reference/ai-sdk-ui</a></li>
<li>[12] Codecademy. (n.d.). <em>A Complete Guide to Vercel&#x27;s AI SDK</em>. Retrieved from <a href="https://www.codecademy.com/article/guide-to-vercels-ai-sdk">https://www.codecademy.com/article/guide-to-vercels-ai-sdk</a></li>
<li>[13] Telerik. (2024, September 3). <em>A Practical Guide to Using Vercel AI SDK in Next.js Apps</em>. Retrieved from <a href="https://www.telerik.com/blogs/practical-guide-using-vercel-ai-sdk-next-js-applications">https://www.telerik.com/blogs/practical-guide-using-vercel-ai-sdk-next-js-applications</a></li>
<li>[14] GitHub. (2024, May 22). <em>Using createStreamableUI (Generative UI) with Nuxt 3? #1671</em>. Retrieved from <a href="https://github.com/vercel/ai/discussions/1671">https://github.com/vercel/ai/discussions/1671</a></li>
<li>[15] Krasimir Tsonev. (2025, August 29). <em>React Server Components support without a framework</em>. Retrieved from <a href="https://krasimirtsonev.com/blog/article/vanilla-react-server-components-with-no-framework">https://krasimirtsonev.com/blog/article/vanilla-react-server-components-with-no-framework</a></li>
</ul></div></div></div></div></div></article><!--$--><!--/$--><!--$--><!--/$--></main><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--><noscript>You need to enable JavaScript to run this app.</noscript><div class="position-fixed" style="z-index:1050;bottom:20px;right:20px;transform:translate(0px, 0px);touch-action:none;cursor:default;display:flex;flex-direction:column;align-items:flex-end;transition:transform 0.3s ease"><div class="position-relative"><button class="btn rounded-circle d-flex align-items-center justify-content-center shadow-lg" style="width:60px;height:60px;cursor:grab;background:linear-gradient(135deg, #0d6efd, #0a58ca);border:2px solid rgba(255,255,255,0.2);transition:transform 0.2s ease" aria-label="切換聊天視窗"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="white" style="width:28px;height:28px;pointer-events:none"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg></button><span class="position-absolute bg-danger rounded-circle" style="width:12px;height:12px;top:0;right:0;border:2px solid white"></span></div></div><script src="https://qwer820921.github.io/_next/static/chunks/webpack-6eefbc0fef8fd205.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[69243,[\"6283\",\"static/chunks/6283-1586b7e20e5a28d4.js\",\"7177\",\"static/chunks/app/layout-984d35e9d146542e.js\"],\"\"]\n3:I[6476,[\"6283\",\"static/chunks/6283-1586b7e20e5a28d4.js\",\"7177\",\"static/chunks/app/layout-984d35e9d146542e.js\"],\"default\"]\n4:I[87555,[],\"\"]\n5:I[31295,[],\"\"]\n6:I[39543,[\"6283\",\"static/chunks/6283-1586b7e20e5a28d4.js\",\"7177\",\"static/chunks/app/layout-984d35e9d146542e.js\"],\"default\"]\n8:I[59665,[],\"MetadataBoundary\"]\na:I[59665,[],\"OutletBoundary\"]\nd:I[74911,[],\"AsyncMetadataOutlet\"]\nf:I[59665,[],\"ViewportBoundary\"]\n11:I[26614,[],\"\"]\n:HL[\"https://qwer820921.github.io/_next/static/css/be607b33620c6e00.css\",\"style\"]\n:HL[\"https://qwer820921.github.io/_next/static/css/739e5c607d9731d5.css\",\"style\"]\n:HL[\"https://qwer820921.github.io/_next/static/css/4bb1c53d4d41ca49.css\",\"style\"]\n:HL[\"https://qwer820921.github.io/_next/static/css/828ce2d6ffc7bb41.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"a6fkMmdzKiQkN24CpWhxx\",\"p\":\"https://qwer820921.github.io\",\"c\":[\"\",\"blog\",\"generative-ui-with-angular-and-apexcharts\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"generative-ui-with-angular-and-apexcharts\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://qwer820921.github.io/_next/static/css/be607b33620c6e00.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"https://qwer820921.github.io/_next/static/css/739e5c607d9731d5.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"https://qwer820921.github.io/_next/static/css/4bb1c53d4d41ca49.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"zh-Hant\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"href\":\"/logo192.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/manifest.json\"}],[\"$\",\"link\",null,{\"rel\":\"preload\",\"href\":\"/logo192.png\",\"as\":\"image\"}],[\"$\",\"$L2\",null,{\"async\":true,\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-CCKVESHCQ1\"}],[\"$\",\"$L2\",null,{\"id\":\"google-analytics\",\"children\":\"\\n            window.dataLayer = window.dataLayer || [];\\n            function gtag(){dataLayer.push(arguments);}\\n            gtag('js', new Date());\\n            gtag('config', 'G-CCKVESHCQ1');\\n          \"}],[\"$\",\"$L2\",null,{\"async\":true,\"src\":\"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2709303513603814\",\"crossOrigin\":\"anonymous\"}]]}],[\"$\",\"body\",null,{\"children\":[[\"$\",\"$L3\",null,{\"children\":[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L6\",null,{}]]}]]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"generative-ui-with-angular-and-apexcharts\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L4\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L5\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L7\",[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"https://qwer820921.github.io/_next/static/css/828ce2d6ffc7bb41.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$La\",null,{\"children\":[\"$Lb\",\"$Lc\",[\"$\",\"$Ld\",null,{\"promise\":\"$@e\"}]]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"XHSGoKa0qDEPDeTkI8H7h\",{\"children\":[[\"$\",\"$Lf\",null,{\"children\":\"$L10\"}],null]}],null]}],false]],\"m\":\"$undefined\",\"G\":[\"$11\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"12:\"$Sreact.suspense\"\n13:I[74911,[],\"AsyncMetadata\"]\n9:[\"$\",\"$12\",null,{\"fallback\":null,\"children\":[\"$\",\"$L13\",null,{\"promise\":\"$@14\"}]}]\n"])</script><script>self.__next_f.push([1,"15:I[57113,[\"5953\",\"static/chunks/app/blog/%5Bslug%5D/page-55dd06bf73e32a25.js\"],\"default\"]\nc:null\n7:[\"$\",\"article\",null,{\"className\":\"container py-5\",\"children\":[[\"$\",\"div\",null,{\"className\":\"row justify-content-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"col-12 col-lg-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"card shadow-sm border-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"card-body p-4 p-md-5\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-5 pb-4 border-bottom\",\"children\":[[\"$\",\"$L15\",null,{\"mode\":\"static\",\"id\":\"static-back-btn\"}],[\"$\",\"h1\",null,{\"className\":\"fw-bold mb-3 display-6\",\"children\":\"【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件\"}],[\"$\",\"div\",null,{\"className\":\"text-muted d-flex align-items-center gap-3\",\"children\":[[\"$\",\"div\",null,{\"className\":\"d-flex align-items-center gap-2\",\"children\":[[\"$\",\"i\",null,{\"className\":\"bi bi-person-fill\"}],[\"$\",\"span\",null,{\"children\":\"作者:\"}],\"子yee\"]}],[\"$\",\"div\",null,{\"className\":\"d-flex align-items-center gap-2\",\"children\":[[\"$\",\"i\",null,{\"className\":\"bi bi-calendar3\"}],[\"$\",\"span\",null,{\"children\":\"日期:\"}],\"2026-02-11\"]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"blogContent_blogContent__VY_R4\",\"children\":\"$L16\"}]]}]}]}]}],[\"$\",\"$L15\",null,{\"mode\":\"floating\",\"targetId\":\"static-back-btn\"}]]}]\n"])</script><script>self.__next_f.push([1,"17:Tc59,"])</script><script>self.__next_f.push([1,"import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  ViewChild,\n} from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { NgApexchartsModule } from \"ng-apexcharts\";\nimport { ChartConfig, ActionButtonConfig } from \"../shared/ui-config.model\";\n\n// 引入 ApexCharts 類型定義\nimport {\n  ChartOptions,\n  ApexAxisChartSeries,\n  ApexChart,\n  ApexXAxis,\n  ApexDataLabels,\n  ApexTooltip,\n  ApexStroke,\n  ApexYAxis,\n  ApexPlotOptions,\n  ApexCandlestick,\n} from \"ng-apexcharts\";\n\n// 擴展 ChartOptions 以包含所有可能的 ApexCharts 配置\nexport type StockChartOptions = {\n  series: ApexAxisChartSeries;\n  chart: ApexChart;\n  xaxis: ApexXAxis;\n  yaxis: ApexYAxis | ApexYAxis[];\n  dataLabels: ApexDataLabels;\n  tooltip: ApexTooltip;\n  stroke: ApexStroke;\n  plotOptions: ApexPlotOptions;\n  candlestick: ApexCandlestick;\n} \u0026 ChartOptions;\n\n@Component({\n  selector: \"app-stock-chart-dashboard\",\n  standalone: true,\n  imports: [CommonModule, NgApexchartsModule],\n  template: `\n    \u003cdiv class=\"stock-dashboard\"\u003e\n      \u003cdiv class=\"chart-container\"\u003e\n        \u003cng-apexcharts\n          *ngIf=\"chartData \u0026\u0026 chartOptions\"\n          [series]=\"chartData.series\"\n          [chart]=\"chartOptions.chart\"\n          [xaxis]=\"chartOptions.xaxis\"\n          [yaxis]=\"chartOptions.yaxis\"\n          [dataLabels]=\"chartOptions.dataLabels\"\n          [tooltip]=\"chartOptions.tooltip\"\n          [stroke]=\"chartOptions.stroke\"\n          [plotOptions]=\"chartOptions.plotOptions\"\n          [candlestick]=\"chartOptions.candlestick\"\n        \u003e\u003c/ng-apexcharts\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"action-buttons\"\u003e\n        \u003cbutton\n          *ngFor=\"let action of actions\"\n          (click)=\"onActionClick(action)\"\n          class=\"btn btn-primary\"\n        \u003e\n          {{ action.label }}\n        \u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  `,\n  styles: [\n    `\n      .stock-dashboard {\n        border: 1px solid #ccc;\n        padding: 15px;\n        border-radius: 8px;\n        margin-top: 20px;\n      }\n      .chart-container {\n        margin-bottom: 15px;\n      }\n      .action-buttons button {\n        margin-right: 10px;\n        padding: 8px 15px;\n        cursor: pointer;\n      }\n      .btn-primary {\n        background-color: #007bff;\n        color: white;\n        border: none;\n        border-radius: 4px;\n      }\n    `,\n  ],\n})\nexport class StockChartDashboardComponent implements OnInit {\n  @Input() chartConfig!: ChartConfig;\n  @Input() actions!: ActionButtonConfig[];\n  @Output() actionTriggered = new EventEmitter\u003c{\n    actionType: string;\n    payload: any;\n  }\u003e();\n\n  public chartData: ChartConfig[\"data\"] | undefined;\n  public chartOptions: Partial\u003cStockChartOptions\u003e | undefined;\n\n  ngOnInit(): void {\n    if (this.chartConfig) {\n      this.chartData = { series: this.chartConfig.series };\n      this.chartOptions = {\n        ...this.chartConfig.options,\n        chart: {\n          ...this.chartConfig.options.chart,\n          type: this.chartConfig.chartType,\n        },\n      };\n    }\n  }\n\n  onActionClick(action: ActionButtonConfig): void {\n    this.actionTriggered.emit({\n      actionType: action.actionType,\n      payload: action.payload,\n    });\n  }\n}\n"])</script><script>self.__next_f.push([1,"18:T6c7,import {\n  Injectable,\n  Type,\n  ViewContainerRef,\n  ComponentRef,\n} from \"@angular/core\";\nimport { GenerativeUIConfig } from \"./ui-config.model\";\nimport { StockChartDashboardComponent } from \"../stock-chart-dashboard/stock-chart-dashboard.component\";\n\n@Injectable({ providedIn: \"root\" })\nexport class DynamicUiService {\n  private componentRegistry: { [key: string]: Type\u003cany\u003e } = {\n    \"stock-chart-dashboard\": StockChartDashboardComponent,\n  };\n\n  // 註冊組件，允許擴展\n  registerComponent(type: string, component: Type\u003cany\u003e): void {\n    this.componentRegistry[type] = component;\n  }\n\n  renderDynamicComponent(\n    viewContainerRef: ViewContainerRef,\n    uiConfig: GenerativeUIConfig\n  ): ComponentRef\u003cany\u003e | null {\n    const componentType = this.componentRegistry[uiConfig.componentType];\n\n    if (!componentType) {\n      console.error(\n        `Component type ${uiConfig.componentType} not found in registry.`\n      );\n      return null;\n    }\n\n    viewContainerRef.clear(); // 清除舊組件\n    const componentRef = viewContainerRef.createComponent(componentType);\n\n    // 設置輸入屬性\n    if (uiConfig.componentType === \"stock-chart-dashboard\") {\n      const stockDashboardInstance =\n        componentRef.instance as StockChartDashboardComponent;\n      stockDashboardInstance.chartConfig = uiConfig.data;\n      stockDashboardInstance.actions = uiConfig.actions;\n      // 訂閱輸出事件\n      stockDashboardInstance.actionTriggered.subscribe((event) =\u003e {\n        console.log(\"User action triggered:\", event);\n        // 在這裡處理用戶互動，例如發送給 AI 後端\n        alert(`執行動作: ${event.actionType} ${JSON.stringify(event.payload)}`);\n      });\n    }\n\n    return componentRef;\n  }\n}\n19:T150d,"])</script><script>self.__next_f.push([1,"import { Component, ViewChild, ViewContainerRef, OnInit } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { DynamicUiService } from \"../shared/dynamic-ui.service\";\nimport { GenerativeUIConfig } from \"../shared/ui-config.model\";\nimport { StockChartDashboardComponent } from \"../stock-chart-dashboard/stock-chart-dashboard.component\";\n\n@Component({\n  selector: \"app-chat\",\n  standalone: true,\n  imports: [CommonModule, FormsModule, StockChartDashboardComponent], // 引入 StockChartDashboardComponent 確保其可用\n  template: `\n    \u003cdiv class=\"chat-container\"\u003e\n      \u003cdiv class=\"messages\"\u003e\n        \u003cdiv *ngFor=\"let message of messages\" class=\"message\"\u003e\n          \u003cdiv *ngIf=\"message.type === 'text'\"\u003e\n            \u003cstrong\u003e{{ message.sender }}:\u003c/strong\u003e {{ message.content }}\n          \u003c/div\u003e\n          \u003cdiv *ngIf=\"message.type === 'ui'\"\u003e\n            \u003cstrong\u003e{{ message.sender }}:\u003c/strong\u003e\n            \u003cng-container #dynamicUiHost\u003e\u003c/ng-container\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"input-area\"\u003e\n        \u003cinput\n          [(ngModel)]=\"userInput\"\n          placeholder=\"輸入你的問題...\"\n          (keyup.enter)=\"sendMessage()\"\n        /\u003e\n        \u003cbutton (click)=\"sendMessage()\"\u003e發送\u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n  `,\n  styles: [\n    `\n      .chat-container {\n        width: 80%;\n        margin: 20px auto;\n        border: 1px solid #eee;\n        padding: 20px;\n        border-radius: 8px;\n      }\n      .messages {\n        min-height: 300px;\n        max-height: 500px;\n        overflow-y: auto;\n        border-bottom: 1px solid #eee;\n        margin-bottom: 15px;\n        padding-bottom: 10px;\n      }\n      .message {\n        margin-bottom: 10px;\n      }\n      .input-area {\n        display: flex;\n      }\n      .input-area input {\n        flex-grow: 1;\n        padding: 8px;\n        border: 1px solid #ccc;\n        border-radius: 4px;\n        margin-right: 10px;\n      }\n      .input-area button {\n        padding: 8px 15px;\n        background-color: #28a745;\n        color: white;\n        border: none;\n        border-radius: 4px;\n        cursor: pointer;\n      }\n    `,\n  ],\n})\nexport class ChatComponent implements OnInit {\n  @ViewChild(\"dynamicUiHost\", { read: ViewContainerRef, static: true })\n  dynamicUiHost!: ViewContainerRef;\n\n  messages: {\n    type: \"text\" | \"ui\";\n    sender: string;\n    content?: string;\n    uiConfig?: GenerativeUIConfig;\n  }[] = [];\n  userInput: string = \"\";\n\n  constructor(private dynamicUiService: DynamicUiService) {}\n\n  ngOnInit(): void {\n    // 註冊組件，確保服務知道如何渲染\n    this.dynamicUiService.registerComponent(\n      \"stock-chart-dashboard\",\n      StockChartDashboardComponent\n    );\n  }\n\n  sendMessage(): void {\n    if (!this.userInput.trim()) return;\n\n    this.messages.push({\n      type: \"text\",\n      sender: \"User\",\n      content: this.userInput,\n    });\n\n    // 模擬 AI 回應\n    if (this.userInput.includes(\"台積電走勢\")) {\n      const aiResponse: GenerativeUIConfig = {\n        componentType: \"stock-chart-dashboard\",\n        data: {\n          chartType: \"candlestick\",\n          series: [\n            {\n              name: \"TSM\",\n              data: [\n                {\n                  x: new Date(\"2026-02-03\").getTime(),\n                  y: [600, 610, 595, 605],\n                },\n                {\n                  x: new Date(\"2026-02-04\").getTime(),\n                  y: [605, 615, 600, 612],\n                },\n                {\n                  x: new Date(\"2026-02-05\").getTime(),\n                  y: [612, 620, 608, 618],\n                },\n                {\n                  x: new Date(\"2026-02-06\").getTime(),\n                  y: [618, 625, 610, 622],\n                },\n                {\n                  x: new Date(\"2026-02-07\").getTime(),\n                  y: [622, 630, 615, 628],\n                },\n                {\n                  x: new Date(\"2026-02-10\").getTime(),\n                  y: [628, 635, 620, 632],\n                },\n                {\n                  x: new Date(\"2026-02-11\").getTime(),\n                  y: [632, 640, 625, 638],\n                },\n              ],\n            },\n          ],\n          options: {\n            chart: {\n              height: 350,\n              type: \"candlestick\",\n            },\n            title: {\n              text: \"台積電 (TSM) 近期走勢\",\n              align: \"left\",\n            },\n            xaxis: {\n              type: \"datetime\",\n            },\n            yaxis: {\n              tooltip: {\n                enabled: true,\n              },\n            },\n          },\n        },\n        actions: [\n          {\n            label: \"買入 100 股\",\n            actionType: \"buy\",\n            payload: { symbol: \"TSM\", amount: 100 },\n          },\n          {\n            label: \"賣出 50 股\",\n            actionType: \"sell\",\n            payload: { symbol: \"TSM\", amount: 50 },\n          },\n        ],\n      };\n      this.messages.push({ type: \"ui\", sender: \"AI\", uiConfig: aiResponse });\n      this.dynamicUiService.renderDynamicComponent(\n        this.dynamicUiHost,\n        aiResponse\n      );\n    } else {\n      this.messages.push({\n        type: \"text\",\n        sender: \"AI\",\n        content: `您好，您說的是：\"${this.userInput}\" 嗎？`,\n      });\n    }\n\n    this.userInput = \"\";\n  }\n}\n"])</script><script>self.__next_f.push([1,"16:[[\"$\",\"h2\",null,{\"children\":\"1. Overview\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"在人工智慧（AI）與使用者介面（UI）的交匯點，一個革命性的概念正在崛起：\",[\"$\",\"strong\",null,{\"children\":\"Generative UI (GenUI)\"}],\"。傳統上，AI 應用程式主要透過文字回應與使用者互動，無論是聊天機器人、內容生成器或數據分析工具，其輸出形式多為純文本。這意味著使用者在接收到 AI 的洞察或建議後，仍需手動將這些資訊轉化為實際的操作或視覺化呈現。然而，GenUI 的出現，正在打破這一限制，它允許 AI 不僅能「說」出答案，更能直接「畫」出一個可互動、功能性的使用者介面 [1]。\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"本文件將深入探討 Generative UI 的核心概念，並結合您在 Angular 與 ApexCharts 的經驗，實作一個端到端的工作流。我們將學習如何讓 AI 不再僅僅回傳文字，而是輸出結構化的 JSON 配置，前端應用程式（特別是 Angular）能夠即時解析這些配置，動態渲染出圖表、按鈕或其他互動組件。例如，當使用者詢問「分析台積電走勢」時，AI 不再僅回傳文字描述，而是直接生成一個包含 K 線圖與買賣按鈕的互動式儀表板，讓使用者能夠直接點擊操作。這將 Chatbot 從單純的對話介面，升級為一個真正的「功能性 GUI」，大幅提升使用者體驗與任務達成效率 [2]。\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"2. Architecture / Design\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"實現 Generative UI 需要 AI 後端與前端應用程式之間緊密的協同工作。其核心在於建立一個標準化的通訊協定，讓 AI 能夠以結構化的方式描述所需的 UI 組件，而前端則負責解析並動態渲染這些組件 [3]。\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"2.1 AI 端：結構化輸出 (Structured Output)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"AI 後端是 GenUI 的「設計師」，負責根據使用者的意圖和上下文，決定生成何種 UI 組件及其配置。這需要以下關鍵能力：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Tool Calling / Function Calling\"}],\"：AI 必須具備調用預定義工具的能力。這些工具可以是抽象的 UI 渲染指令，例如 \",[\"$\",\"code\",null,{\"children\":\"render_chart(config)\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"show_action_buttons(buttons)\"}],\" 等。當 AI 判斷需要視覺化或互動時，它會選擇調用這些工具 [4]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"JSON Schema 定義\"}],\"：為了確保 AI 輸出的 UI 配置能夠被前端正確解析，必須為每個可生成的 UI 組件定義嚴格的 JSON Schema。例如，一個圖表組件的配置可能包含 \",[\"$\",\"code\",null,{\"children\":\"chartType\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"series\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"options\"}],\" 等欄位，而按鈕組件則包含 \",[\"$\",\"code\",null,{\"children\":\"label\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"action\"}],\" 等。JSON Schema 不僅規範了數據格式，也作為 AI 生成時的「藍圖」 [5]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Prompt Engineering\"}],\"：引導 AI 根據上下文決定「何時」以及「如何」生成 UI 是關鍵。提示詞需要明確指示 AI 在特定情境下，應優先輸出結構化的 UI 配置而非純文本。這可能涉及 Few-shot Learning，提供 AI 範例來學習如何將用戶意圖映射到 UI 組件的 JSON 描述 [6]。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"2.2 前端端：Angular 動態渲染 (Dynamic Rendering)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"前端應用程式（在此為 Angular）是 GenUI 的「建造者」，負責接收 AI 輸出的結構化配置，並將其轉換為實際的互動式 UI。這需要強大的動態組件渲染能力：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Component Registry (組件註冊表)\"}],\"：前端需要維護一個可用的 UI 組件映射表。這個註冊表將 AI 輸出中的組件類型字串（例如 \",[\"$\",\"code\",null,{\"children\":\"\\\"stock-chart\\\"\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"\\\"action-buttons\\\"\"}],\"）對應到實際的 Angular 組件類別（例如 \",[\"$\",\"code\",null,{\"children\":\"StockChartComponent\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"ActionButtonsComponent\"}],\"）。這使得前端能夠根據 AI 的指令，找到並載入正確的組件 [7]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Dynamic Component Loader (動態組件載入器)\"}],\"：Angular 提供了強大的機制來動態載入和實例化組件。主要方法包括：\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ViewContainerRef\"}]}],\"：允許在運行時動態地將組件插入到 DOM 中。這是最常見且靈活的動態組件載入方式 [8]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"ngComponentOutlet\"}]}],\"：一個結構型指令，可以根據組件類別動態渲染組件，通常用於更簡單的場景 [9]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"ComponentMirror\"}],\" (Angular 17+)\"]}],\"：提供更現代化的 API 來操作組件實例，尤其是在 Signals 時代，可以更高效地處理組件的輸入與輸出 [10]。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"State \u0026 Input Binding\"}],\"：將 AI 輸出的 JSON 配置中的數據和屬性，綁定到動態載入組件的 \",[\"$\",\"code\",null,{\"children\":\"@Input()\"}],\" 屬性上。同時，監聽組件發出的 \",[\"$\",\"code\",null,{\"children\":\"@Output()\"}],\" 事件，將使用者的互動（例如點擊按鈕、圖表縮放）回傳給 AI 後端或處理本地業務邏輯 [11]。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"3. 實作工作流 (Workflow)\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"以下是一個基於 Angular 與 ApexCharts 實現 Generative UI 的典型工作流：\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"使用者查詢 (User Query)\"}],\"：使用者在聊天介面中輸入：「幫我分析台積電最近一週的走勢，並提供買賣建議。」\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"AI 推理 (AI Reasoning)\"}],\"：\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"AI 接收到查詢後，透過其內部的工具調用機制，判斷需要獲取股票數據並以圖表形式呈現，同時提供交易操作。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"AI 調用一個名為 \",[\"$\",\"code\",null,{\"children\":\"render_stock_analysis_ui\"}],\" 的工具，並根據其對話上下文和知識，生成該工具所需的參數。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"JSON 配置輸出 (JSON Output)\"}],\"：AI 後端將生成一個符合預定義 JSON Schema 的配置對象，例如：\",\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-json\",\"children\":\"{\\n  \\\"componentType\\\": \\\"stock-chart-dashboard\\\",\\n  \\\"data\\\": {\\n    \\\"symbol\\\": \\\"TSM\\\",\\n    \\\"timeframe\\\": \\\"1W\\\",\\n    \\\"chartOptions\\\": {\\n      /* ApexCharts 配置 */\\n    },\\n    \\\"series\\\": [\\n      /* 股票數據 */\\n    ]\\n  },\\n  \\\"actions\\\": [\\n    {\\n      \\\"label\\\": \\\"買入\\\",\\n      \\\"actionType\\\": \\\"buy\\\",\\n      \\\"payload\\\": { \\\"symbol\\\": \\\"TSM\\\", \\\"amount\\\": 100 }\\n    },\\n    {\\n      \\\"label\\\": \\\"賣出\\\",\\n      \\\"actionType\\\": \\\"sell\\\",\\n      \\\"payload\\\": { \\\"symbol\\\": \\\"TSM\\\", \\\"amount\\\": 100 }\\n    }\\n  ]\\n}\\n\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Angular 聊天組件攔截 (Angular Interceptor)\"}],\"：前端的聊天組件（例如 \",[\"$\",\"code\",null,{\"children\":\"ChatComponent\"}],\"）接收到 AI 的回應。它會檢查回應內容，如果發現是結構化的 UI 配置（例如以特定標籤或 JSON 格式開頭），則會攔截並處理。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"動態組件渲染 (Dynamic Render)\"}],\"：\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"聊天組件根據 \",[\"$\",\"code\",null,{\"children\":\"componentType\"}],\" 查找 \",[\"$\",\"code\",null,{\"children\":\"Component Registry\"}],\"，找到對應的 \",[\"$\",\"code\",null,{\"children\":\"StockChartDashboardComponent\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"利用 \",[\"$\",\"code\",null,{\"children\":\"ViewContainerRef\"}],\" 或 \",[\"$\",\"code\",null,{\"children\":\"ComponentMirror\"}],\" 動態載入 \",[\"$\",\"code\",null,{\"children\":\"StockChartDashboardComponent\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"將 JSON 配置中的 \",[\"$\",\"code\",null,{\"children\":\"data\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"actions\"}],\" 綁定到 \",[\"$\",\"code\",null,{\"children\":\"StockChartDashboardComponent\"}],\" 的 \",[\"$\",\"code\",null,{\"children\":\"@Input()\"}],\" 屬性。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"code\",null,{\"children\":\"StockChartDashboardComponent\"}],\" 內部使用 ApexCharts 庫，根據接收到的 \",[\"$\",\"code\",null,{\"children\":\"chartOptions\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"series\"}],\" 數據渲染出 K 線圖，並根據 \",[\"$\",\"code\",null,{\"children\":\"actions\"}],\" 渲染出買賣按鈕。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"使用者互動 (User Interaction)\"}],\"：\",\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"使用者可以直接在 K 線圖上進行縮放、平移等操作。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"使用者點擊「買入」按鈕，\",[\"$\",\"code\",null,{\"children\":\"StockChartDashboardComponent\"}],\" 發出一個 \",[\"$\",\"code\",null,{\"children\":\"@Output()\"}],\" 事件，包含 \",[\"$\",\"code\",null,{\"children\":\"actionType\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"payload\"}],\"。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"聊天組件接收到這個事件，並將其轉發回 AI 後端，觸發後續的交易執行邏輯。\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"4. Prerequisites\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"要實作 Generative UI 與 Angular 動態渲染，您需要具備以下環境和知識：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Angular 開發環境\"}],\"：Node.js、Angular CLI (v17+ 推薦)。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Angular 基礎知識\"}],\"：組件、服務、模組、輸入/輸出屬性、生命週期鉤子。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Angular 動態組件載入\"}],\"：熟悉 \",[\"$\",\"code\",null,{\"children\":\"ViewContainerRef\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"ComponentFactoryResolver\"}],\" (舊版) 或 \",[\"$\",\"code\",null,{\"children\":\"ComponentMirror\"}],\" (新版) 的使用。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"ApexCharts 知識\"}],\"：了解 ApexCharts 的配置選項、數據格式和事件處理。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"AI SDK / LLM API 存取\"}],\"：如果使用 Vercel AI SDK 或其他 LLM 服務，需要相關的 API 金鑰和 SDK 配置。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"TypeScript 基礎\"}],\"：強型別語言有助於定義清晰的 JSON Schema 和組件介面。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"JSON Schema 知識\"}],\"：理解如何定義和驗證 JSON 數據結構。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"5. Implementation / Code Example\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"本節將提供一個簡化的 Angular 程式碼範例，展示如何動態渲染基於 AI 輸出的 JSON 配置的組件。我們將專注於前端的動態渲染邏輯，假設 AI 後端已經能夠輸出符合預期格式的 JSON。\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.1 專案初始化\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"ng new generative-ui-demo --standalone --routing=false\\ncd generative-ui-demo\\nng add ng-apexcharts # 安裝 ApexCharts for Angular\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"5.2 定義 UI 配置介面 (\",[\"$\",\"code\",null,{\"children\":\"src/app/shared/ui-config.model.ts\"}],\")\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"export interface ChartConfig {\\n  chartType: string; // e.g., 'line', 'candlestick'\\n  series: any[];\\n  options: any;\\n}\\n\\nexport interface ActionButtonConfig {\\n  label: string;\\n  actionType: string; // e.g., 'buy', 'sell'\\n  payload: any;\\n}\\n\\nexport interface GenerativeUIConfig {\\n  componentType: \\\"stock-chart-dashboard\\\"; // 假設只有一種 GenUI 組件類型\\n  data: ChartConfig;\\n  actions: ActionButtonConfig[];\\n}\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"5.3 股票圖表儀表板組件 (\",[\"$\",\"code\",null,{\"children\":\"src/app/stock-chart-dashboard/stock-chart-dashboard.component.ts\"}],\")\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"$17\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"5.4 動態渲染服務 (\",[\"$\",\"code\",null,{\"children\":\"src/app/shared/dynamic-ui.service.ts\"}],\")\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"$18\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"5.5 聊天組件 (\",[\"$\",\"code\",null,{\"children\":\"src/app/chat/chat.component.ts\"}],\")\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"$19\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"5.6 根組件 (\",[\"$\",\"code\",null,{\"children\":\"src/app/app.component.ts\"}],\")\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-typescript\",\"children\":\"import { Component } from \\\"@angular/core\\\";\\nimport { CommonModule } from \\\"@angular/common\\\";\\nimport { RouterOutlet } from \\\"@angular/router\\\";\\nimport { ChatComponent } from \\\"./chat/chat.component\\\";\\n\\n@Component({\\n  selector: \\\"app-root\\\",\\n  standalone: true,\\n  imports: [CommonModule, RouterOutlet, ChatComponent],\\n  template: `\\n    \u003cdiv class=\\\"main-container\\\"\u003e\\n      \u003ch1\u003eGenerative UI Demo\u003c/h1\u003e\\n      \u003capp-chat\u003e\u003c/app-chat\u003e\\n    \u003c/div\u003e\\n  `,\\n  styles: [\\n    `\\n      .main-container {\\n        font-family: Arial, sans-serif;\\n        text-align: center;\\n        padding: 20px;\\n      }\\n      h1 {\\n        color: #333;\\n      }\\n    `,\\n  ],\\n})\\nexport class AppComponent {\\n  title = \\\"generative-ui-demo\\\";\\n}\\n\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"5.7 運行應用程式\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"language-bash\",\"children\":\"ng serve --open\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"打開瀏覽器，在聊天框中輸入「台積電走勢」，您將會看到 AI 不僅回覆文字，還會動態渲染出一個包含 K 線圖和買賣按鈕的互動式儀表板。\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"6. Parameters / API Reference\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"本節將抽象出 Generative UI 實現中涉及的關鍵介面和參數。\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"6.1 \",[\"$\",\"code\",null,{\"children\":\"GenerativeUIConfig\"}],\" (AI 輸出結構)\"]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"欄位名稱\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"類型\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"描述\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"componentType\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"string\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"指定前端應渲染的組件類型（例如 \",[\"$\",\"code\",null,{\"children\":\"\\\"stock-chart-dashboard\\\"\"}],\"）。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"data\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"ChartConfig\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"傳遞給組件的數據配置，例如圖表的 \",[\"$\",\"code\",null,{\"children\":\"series\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"options\"}],\"。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"actions\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"ActionButtonConfig[]\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"傳遞給組件的互動按鈕配置，包含 \",[\"$\",\"code\",null,{\"children\":\"label\"}],\"、\",[\"$\",\"code\",null,{\"children\":\"actionType\"}],\" 和 \",[\"$\",\"code\",null,{\"children\":\"payload\"}],\"。\"]}]]}]]}]]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"6.2 \",[\"$\",\"code\",null,{\"children\":\"ChartConfig\"}],\" (圖表配置)\"]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"欄位名稱\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"類型\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"描述\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"chartType\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"string\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"圖表類型（例如 \",[\"$\",\"code\",null,{\"children\":\"\\\"line\\\"\"}],\", \",[\"$\",\"code\",null,{\"children\":\"\\\"candlestick\\\"\"}],\"）。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"series\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"any[]\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"ApexCharts 的數據系列配置。\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"options\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"any\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"ApexCharts 的圖表選項配置。\"}]]}]]}]]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"6.3 \",[\"$\",\"code\",null,{\"children\":\"ActionButtonConfig\"}],\" (互動按鈕配置)\"]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"欄位名稱\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"類型\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"描述\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"label\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"string\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"按鈕上顯示的文字。\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"actionType\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"string\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"按鈕觸發的動作類型（例如 \",[\"$\",\"code\",null,{\"children\":\"\\\"buy\\\"\"}],\", \",[\"$\",\"code\",null,{\"children\":\"\\\"sell\\\"\"}],\"）。\"]}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"payload\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"any\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"動作相關的數據，例如股票代碼、數量等。\"}]]}]]}]]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":[\"6.4 \",[\"$\",\"code\",null,{\"children\":\"DynamicUiService\"}],\" 介面\"]}],\"\\n\",[\"$\",\"table\",null,{\"children\":[[\"$\",\"thead\",null,{\"children\":[\"$\",\"tr\",null,{\"children\":[[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"方法名稱\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"參數\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"返回值\"}],[\"$\",\"th\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"描述\"}]]}]}],[\"$\",\"tbody\",null,{\"children\":[[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"registerComponent\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"type: string, component: Type\u003cany\u003e\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"void\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":\"註冊可動態渲染的組件及其對應的類型字串。\"}]]}],[\"$\",\"tr\",null,{\"children\":[[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"renderDynamicComponent\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"viewContainerRef: ViewContainerRef, uiConfig: GenerativeUIConfig\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"$\",\"code\",null,{\"children\":\"ComponentRef\u003cany\u003e | null\"}]}],[\"$\",\"td\",null,{\"style\":{\"textAlign\":\"left\"},\"children\":[\"根據 \",[\"$\",\"code\",null,{\"children\":\"uiConfig\"}],\" 動態渲染組件到指定的 \",[\"$\",\"code\",null,{\"children\":\"ViewContainerRef\"}],\"。\"]}]]}]]}]]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"7. Notes \u0026 Best Practices\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"安全性優先\"}],\"：GenUI 的核心挑戰之一是安全性。由於 AI 能夠生成程式碼或配置，必須嚴格限制 AI 只能生成預定義、經過安全審核的組件類型和配置選項。絕對禁止 AI 生成任意的 HTML、JavaScript 或 CSS，以防範跨站腳本攻擊 (XSS) 或其他惡意行為 [12]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"清晰的 JSON Schema\"}],\"：AI 輸出的 JSON 配置必須有清晰、嚴格的 Schema 定義。這不僅有助於前端的解析和驗證，也能作為 AI 提示工程的強大約束，確保 AI 輸出符合預期格式 [5]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"組件的原子性與可重用性\"}],\"：設計 GenUI 組件時，應遵循原子設計原則，使其盡可能小巧、獨立且可重用。例如，一個圖表組件、一個按鈕組件、一個表格組件等。這有助於 AI 更靈活地組合 UI，也方便前端的維護 [13]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"錯誤處理與回退機制\"}],\"：當 AI 輸出無效的 JSON 配置，或前端動態載入組件失敗時，應用程式應具備健壯的錯誤處理機制。例如，可以回退到顯示純文本錯誤訊息，或提供一個預設的 UI 替代方案 [14]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"性能優化\"}],\"：動態渲染組件可能會帶來性能開銷。應考慮使用 Angular 的 \",[\"$\",\"code\",null,{\"children\":\"OnPush\"}],\" 變化檢測策略、延遲載入（Lazy Loading）組件，以及對 AI 輸出的 JSON 進行緩存，以優化渲染性能 [15]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"提示工程的精煉\"}],\"：AI 的輸出品質直接影響 GenUI 的效果。需要不斷迭代和優化提示詞，讓 AI 更好地理解使用者意圖，並精確地生成所需的 UI 配置。可以利用 Few-shot 範例來訓練 AI 輸出特定格式的 JSON [6]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"使用者體驗 (UX) 設計\"}],\"：即使是 AI 生成的 UI，也應考慮其可用性和一致性。確保生成的 UI 符合品牌指南，並且互動流程直觀。提供明確的視覺回饋，讓使用者知道哪些部分是 AI 生成的，哪些是靜態內容 [1]。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"8. 為什麼選擇這種方式？\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Generative UI 代表了人機互動的未來趨勢，它將 AI 的智慧與前端的視覺化能力無縫結合，帶來了傳統 Chatbot 無法比擬的優勢：\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"從「閱讀」到「操作」的範式轉變\"}],\"：傳統 AI 應用要求使用者閱讀文字回應，然後自行判斷並執行後續操作。GenUI 則將這一過程簡化為直接的視覺化呈現與互動。例如，AI 分析股票後直接呈現 K 線圖和交易按鈕，使用者無需離開對話介面即可完成交易，極大地提升了效率和便利性 [2]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"提升使用者體驗 (UX)\"}],\"：視覺化數據比純文本更容易理解和分析。GenUI 能夠根據上下文動態生成最適合當前任務的 UI，例如圖表、表格、表單或控制面板，使得資訊呈現更直觀、互動更自然，從而顯著改善使用者體驗 [1]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"加速任務達成\"}],\"：透過將複雜的數據分析或操作流程直接嵌入到對話介面中，GenUI 減少了使用者在不同應用程式之間切換的次數，縮短了完成任務的路徑。這對於需要快速決策和響應的場景（如金融交易、即時監控）尤其有價值。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"降低認知負荷\"}],\"：AI 直接將複雜的數據或操作選項以結構化的 UI 呈現，降低了使用者理解和處理資訊的認知負荷。使用者無需記憶複雜的指令或在腦中構建視覺模型，只需直觀地與介面互動即可 [3]。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"高度客製化與動態性\"}],\"：GenUI 的核心在於其動態性。AI 可以根據每個使用者的具體查詢、偏好和歷史互動，生成高度客製化的 UI。這使得應用程式能夠提供更個人化、更具響應性的體驗，超越了傳統靜態介面的限制。\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"擴展 AI 的應用邊界\"}],\"：GenUI 將 AI 的能力從純粹的資訊提供者，擴展到成為一個能夠主動構建和呈現功能性工具的「智慧助手」。這為 AI 在企業應用、數據分析、自動化控制等領域開闢了全新的應用場景，是從「玩具專案」跨入「產品級應用」的關鍵一步 [1]。\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"hr\",null,{}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"strong\",null,{\"children\":\"參考資料\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[1] UX Planet. (2025, October 13). \",[\"$\",\"em\",null,{\"children\":\"GenUI Design: Foundational Patterns\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://uxplanet.org/genui-design-foundational-patterns-633320d0dfea\",\"children\":\"https://uxplanet.org/genui-design-foundational-patterns-633320d0dfea\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[2] YouTube. (2026, January 30). \",[\"$\",\"em\",null,{\"children\":\"Generative UI: Specs, Patterns, and the Protocols Behind\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://www.youtube.com/watch?v=Z4aSGCs_O5A\",\"children\":\"https://www.youtube.com/watch?v=Z4aSGCs_O5A\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[3] Medium. (2025, August 21). \",[\"$\",\"em\",null,{\"children\":\"Angular Meets Generative AI: Best Practices Made Easy\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://medium.com/@davidepassafaro/angular-meets-generative-ai-best-practices-made-easy-2641fbe643ed\",\"children\":\"https://medium.com/@davidepassafaro/angular-meets-generative-ai-best-practices-made-easy-2641fbe643ed\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[4] Angular.dev. (n.d.). \",[\"$\",\"em\",null,{\"children\":\"Build with AI - Angular\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://angular.dev/ai\",\"children\":\"https://angular.dev/ai\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[5] GitHub. (2026, February 1). \",[\"$\",\"em\",null,{\"children\":\"Generative UI examples for: AG-UI, A2UI/Open-JSON-UI, and MCP\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://github.com/CopilotKit/generative-ui\",\"children\":\"https://github.com/CopilotKit/generative-ui\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[6] Angular Space. (2026, January 22). \",[\"$\",\"em\",null,{\"children\":\"Gemini and Angular, Part II: Creating Generative UIs\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://www.angularspace.com/gemini-and-angular-part-ii-creating-generative-uis/\",\"children\":\"https://www.angularspace.com/gemini-and-angular-part-ii-creating-generative-uis/\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[7] Rangle.io. (2023, July 24). \",[\"$\",\"em\",null,{\"children\":\"How to render dynamic components in Angular\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://rangle.io/blog/how-to-render-dynamic-components-in-angular\",\"children\":\"https://rangle.io/blog/how-to-render-dynamic-components-in-angular\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[8] Stack Overflow. (2016, May 21). \",[\"$\",\"em\",null,{\"children\":\"Angular RC 2 - Dynamically Render Components from a json file\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://stackoverflow.com/questions/37368068/angular-rc-2-dynamically-render-components-from-a-json-file\",\"children\":\"https://stackoverflow.com/questions/37368068/angular-rc-2-dynamically-render-components-from-a-json-file\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[9] Pluralsight. (2020, February 20). \",[\"$\",\"em\",null,{\"children\":\"How to Render a Component Dynamically Based on a JSON Config\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://www.pluralsight.com/resources/blog/guides/how-to-render-a-component-dynamically-based-on-a-json-config\",\"children\":\"https://www.pluralsight.com/resources/blog/guides/how-to-render-a-component-dynamically-based-on-a-json-config\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[10] Angular.love. (2025, December 16). \",[\"$\",\"em\",null,{\"children\":\"Building Dynamic Forms in Angular Using JSON Schema and Signals\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://angular.love/building-dynamic-forms-in-angular-using-json-schema-and-signals\",\"children\":\"https://angular.love/building-dynamic-forms-in-angular-using-json-schema-and-signals\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[11] AI SDK. (n.d.). \",[\"$\",\"em\",null,{\"children\":\"Reference: AI SDK UI\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://ai-sdk.dev/docs/reference/ai-sdk-ui\",\"children\":\"https://ai-sdk.dev/docs/reference/ai-sdk-ui\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[12] Codecademy. (n.d.). \",[\"$\",\"em\",null,{\"children\":\"A Complete Guide to Vercel's AI SDK\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://www.codecademy.com/article/guide-to-vercels-ai-sdk\",\"children\":\"https://www.codecademy.com/article/guide-to-vercels-ai-sdk\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[13] Telerik. (2024, September 3). \",[\"$\",\"em\",null,{\"children\":\"A Practical Guide to Using Vercel AI SDK in Next.js Apps\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://www.telerik.com/blogs/practical-guide-using-vercel-ai-sdk-next-js-applications\",\"children\":\"https://www.telerik.com/blogs/practical-guide-using-vercel-ai-sdk-next-js-applications\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[14] GitHub. (2024, May 22). \",[\"$\",\"em\",null,{\"children\":\"Using createStreamableUI (Generative UI) with Nuxt 3? #1671\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://github.com/vercel/ai/discussions/1671\",\"children\":\"https://github.com/vercel/ai/discussions/1671\"}]]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"[15] Krasimir Tsonev. (2025, August 29). \",[\"$\",\"em\",null,{\"children\":\"React Server Components support without a framework\"}],\". Retrieved from \",[\"$\",\"a\",null,{\"href\":\"https://krasimirtsonev.com/blog/article/vanilla-react-server-components-with-no-framework\",\"children\":\"https://krasimirtsonev.com/blog/article/vanilla-react-server-components-with-no-framework\"}]]}],\"\\n\"]}]]\n"])</script><script>self.__next_f.push([1,"10:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"14:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件 | 子yee 萬事屋 | 子yee\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"子yee\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"子yee 萬事屋, 台股查詢, 自選股, 技術小工具, 股票資訊平台, 技術顧問, 自動化工具\"}],[\"$\",\"meta\",\"4\",{\"name\":\"google-site-verification\",\"content\":\"adHIcDQiasHY4YzPlrpmSSPKl7Oj1WxrPJ_4GV4PQcM\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:image\",\"content\":\"https://qwer820921.github.io/images/img15.jpg\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:image:alt\",\"content\":\"【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:title\",\"content\":\"【新一代互動領域】Generative UI：讓 AI 直接「畫」出 Angular 組件\"}],[\"$\",\"meta\",\"14\",{\"name\":\"twitter:description\",\"content\":\"深入探討 Generative UI (GenUI) 如何將 AI 的文字輸出轉化為可互動的 Angular 組件，結合 ApexCharts 實現動態數據視覺化，將 Chatbot 升級為功能性 GUI。\"}],[\"$\",\"meta\",\"15\",{\"name\":\"twitter:image\",\"content\":\"https://qwer820921.github.io/images/img15.jpg\"}],[\"$\",\"link\",\"16\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"e:{\"metadata\":\"$14:metadata\",\"error\":null,\"digest\":\"$undefined\"}\n"])</script></body></html>