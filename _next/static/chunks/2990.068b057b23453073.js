"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2990],{12990:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(95155),n=r(35695),s=r(40283),l=r(55028);let u=(0,l.default)(()=>Promise.all([r.e(6874),r.e(6766),r.e(2278)]).then(r.bind(r,12278)),{loadableGenerated:{webpack:()=>[12278]},ssr:!1}),o=(0,l.default)(()=>r.e(1875).then(r.bind(r,31875)),{loadableGenerated:{webpack:()=>[31875]},ssr:!1}),d=(0,l.default)(()=>r.e(7761).then(r.bind(r,77761)),{loadableGenerated:{webpack:()=>[77761]},ssr:!1}),i=(0,l.default)(()=>Promise.all([r.e(5737),r.e(1721)]).then(r.bind(r,91721)),{loadableGenerated:{webpack:()=>[91721]},ssr:!1}),c=(0,l.default)(()=>r.e(6927).then(r.bind(r,46927)),{loadableGenerated:{webpack:()=>[46927]},ssr:!1}),h=["/clickAscension","/towerDefense"];function m(e){let{children:t}=e,r=(0,n.usePathname)(),l=h.some(e=>null==r?void 0:r.startsWith(e));return(0,a.jsxs)(s.O,{children:[(0,a.jsx)(d,{}),(0,a.jsx)(u,{}),(0,a.jsx)("main",{className:l?"":"container-fluid mt-5 p-0",children:t}),!l&&(0,a.jsx)(o,{}),(0,a.jsx)(i,{}),(0,a.jsx)(c,{}),(0,a.jsx)("noscript",{children:"You need to enable JavaScript to run this app."})]})}},35695:(e,t,r)=>{var a=r(18999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},40283:(e,t,r)=>{r.d(t,{A:()=>u,O:()=>l});var a=r(95155),n=r(12115);let s=(0,n.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,n.useState)(!1),[u,o]=(0,n.useState)({isAuthenticated:!1,userId:null,username:null});(0,n.useEffect)(()=>{let e=()=>{{let e=localStorage.getItem("user_id"),t=localStorage.getItem("username");e&&t?o({isAuthenticated:!0,userId:e,username:t}):o({isAuthenticated:!1,userId:null,username:null})}};return e(),l(!0),window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);let d={...u,isInitialized:r,login:(e,t)=>{try{localStorage.setItem("user_id",e),localStorage.setItem("username",t),o({isAuthenticated:!0,userId:e,username:t}),window.dispatchEvent(new Event("storage"))}catch(e){throw console.error("登入時出錯:",e),e}},logout:()=>{try{localStorage.removeItem("user_id"),localStorage.removeItem("username"),o({isAuthenticated:!1,userId:null,username:null}),window.dispatchEvent(new Event("storage"))}catch(e){throw console.error("登出時出錯:",e),e}}};return(0,a.jsx)(s.Provider,{value:d,children:t})},u=()=>{let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}}]);