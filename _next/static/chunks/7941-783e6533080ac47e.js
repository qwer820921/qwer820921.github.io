(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7941],{255:(t,e,i)=>{"use strict";i.d(e,{W:()=>n});var s=i(89447);function n(t){return+(0,s.a)(t)}},3898:(t,e,i)=>{"use strict";i.d(e,{r:()=>r});var s=i(61183),n=i(6711);function r(t,e,i){let[r,l]=(0,s.x)(null==i?void 0:i.in,t,e);return+(0,n.o)(r)==+(0,n.o)(l)}},6711:(t,e,i)=>{"use strict";i.d(e,{o:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in);return i.setHours(0,0,0,0),i}},7038:(t,e,i)=>{"use strict";i.d(e,{F:()=>n});var s=i(89447);function n(t,e){return Math.trunc((0,s.a)(t,null==e?void 0:e.in).getMonth()/3)+1}},7239:(t,e,i)=>{"use strict";i.d(e,{w:()=>n});var s=i(25703);function n(t,e){return"function"==typeof t?t(e):t&&"object"==typeof t&&s._P in t?t[s._P](e):t instanceof Date?new t.constructor(e):new Date(e)}},8093:(t,e,i)=>{"use strict";i.d(e,{c:()=>a});let s={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function n(t){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.width?String(e.width):t.defaultWidth;return t.formats[i]||t.formats[t.defaultWidth]}}let r={date:n({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:n({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:n({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},l={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function h(t){return(e,i)=>{let s;if("formatting"===((null==i?void 0:i.context)?String(i.context):"standalone")&&t.formattingValues){let e=t.defaultFormattingWidth||t.defaultWidth,n=(null==i?void 0:i.width)?String(i.width):e;s=t.formattingValues[n]||t.formattingValues[e]}else{let e=t.defaultWidth,n=(null==i?void 0:i.width)?String(i.width):t.defaultWidth;s=t.values[n]||t.values[e]}return s[t.argumentCallback?t.argumentCallback(e):e]}}function o(t){return function(e){let i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s.width,r=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],l=e.match(r);if(!l)return null;let h=l[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],a=Array.isArray(o)?function(t,e){for(let i=0;i<t.length;i++)if(e(t[i]))return i}(o,t=>t.test(h)):function(t,e){for(let i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&e(t[i]))return i}(o,t=>t.test(h));return i=t.valueCallback?t.valueCallback(a):a,{value:i=s.valueCallback?s.valueCallback(i):i,rest:e.slice(h.length)}}}let a={code:"en-US",formatDistance:(t,e,i)=>{let n,r=s[t];if(n="string"==typeof r?r:1===e?r.one:r.other.replace("{{count}}",e.toString()),null==i?void 0:i.addSuffix)if(i.comparison&&i.comparison>0)return"in "+n;else return n+" ago";return n},formatLong:r,formatRelative:(t,e,i,s)=>l[t],localize:{ordinalNumber:(t,e)=>{let i=Number(t),s=i%100;if(s>20||s<10)switch(s%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},era:h({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:h({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:t=>t-1}),month:h({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:h({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:h({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function(t){return function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e.match(t.matchPattern);if(!s)return null;let n=s[0],r=e.match(t.parsePattern);if(!r)return null;let l=t.valueCallback?t.valueCallback(r[0]):r[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:e.slice(n.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:o({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:o({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:o({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:o({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:o({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}}},9107:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});var s=i(40714);function n(t,e,i){return(0,s.f)(t,-e,i)}},10255:(t,e,i)=>{"use strict";function s(t){let{moduleIds:e}=t;return null}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"PreloadChunks",{enumerable:!0,get:function(){return s}}),i(95155),i(47650),i(85744),i(20589)},10265:(t,e,i)=>{"use strict";i.d(e,{c:()=>n});var s=i(39624);function n(t,e,i){return(0,s.z)(t,-e,i)}},16687:(t,e,i)=>{"use strict";i.d(e,{g:()=>n});var s=i(89447);function n(t,e,i){let n=(0,s.a)(t,null==i?void 0:i.in);return n.setSeconds(e),n}},17519:(t,e,i)=>{"use strict";i.d(e,{s:()=>o});var s=i(25703),n=i(70540),r=i(7239),l=i(71182),h=i(89447);function o(t,e){let i=(0,h.a)(t,null==e?void 0:e.in);return Math.round(((0,n.b)(i)-function(t,e){let i=(0,l.p)(t,void 0),s=(0,r.w)(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),(0,n.b)(s)}(i))/s.my)+1}},17828:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"workAsyncStorageInstance",{enumerable:!0,get:function(){return s}});let s=(0,i(64054).createAsyncLocalStorage)()},19315:(t,e,i)=>{"use strict";i.d(e,{h:()=>h});var s=i(95490),n=i(7239),r=i(84423),l=i(89447);function h(t,e){var i,h,o,a,u,c,d,f;let m=(0,l.a)(t,null==e?void 0:e.in),p=m.getFullYear(),v=(0,s.q)(),g=null!=(f=null!=(d=null!=(c=null!=(u=null==e?void 0:e.firstWeekContainsDate)?u:null==e||null==(h=e.locale)||null==(i=h.options)?void 0:i.firstWeekContainsDate)?c:v.firstWeekContainsDate)?d:null==(a=v.locale)||null==(o=a.options)?void 0:o.firstWeekContainsDate)?f:1,b=(0,n.w)((null==e?void 0:e.in)||t,0);b.setFullYear(p+1,0,g),b.setHours(0,0,0,0);let w=(0,r.k)(b,e),y=(0,n.w)((null==e?void 0:e.in)||t,0);y.setFullYear(p,0,g),y.setHours(0,0,0,0);let x=(0,r.k)(y,e);return+m>=+w?p+1:+m>=+x?p:p-1}},19828:(t,e,i)=>{"use strict";i.d(e,{D:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in);return i.setHours(23,59,59,999),i}},20856:(t,e,i)=>{"use strict";i.d(e,{T:()=>r});var s=i(7239),n=i(89447);function r(t,e){let i,r=null==e?void 0:e.in;return t.forEach(t=>{r||"object"!=typeof t||(r=s.w.bind(null,t));let e=(0,n.a)(t,r);(!i||i<e||isNaN(+e))&&(i=e)}),(0,s.w)(r,i||NaN)}},21391:(t,e,i)=>{"use strict";i.d(e,{N:()=>a});var s=i(25703),n=i(84423),r=i(95490),l=i(7239),h=i(19315),o=i(89447);function a(t,e){let i=(0,o.a)(t,null==e?void 0:e.in);return Math.round(((0,n.k)(i,e)-function(t,e){var i,s,o,a,u,c,d,f;let m=(0,r.q)(),p=null!=(f=null!=(d=null!=(c=null!=(u=null==e?void 0:e.firstWeekContainsDate)?u:null==e||null==(s=e.locale)||null==(i=s.options)?void 0:i.firstWeekContainsDate)?c:m.firstWeekContainsDate)?d:null==(a=m.locale)||null==(o=a.options)?void 0:o.firstWeekContainsDate)?f:1,v=(0,h.h)(t,e),g=(0,l.w)((null==e?void 0:e.in)||t,0);return g.setFullYear(v,0,p),g.setHours(0,0,0,0),(0,n.k)(g,e)}(i,e))/s.my)+1}},22739:(t,e,i)=>{"use strict";i.d(e,{i:()=>r});var s=i(7239),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in);return isNaN(+r)?(0,s.w)((null==i?void 0:i.in)||t,NaN):(r.setFullYear(e),r)}},23068:(t,e,i)=>{"use strict";i.d(e,{f:()=>r});var s=i(99026),n=i(89447);function r(t){return!(!(0,s.$)(t)&&"number"!=typeof t||isNaN(+(0,n.a)(t)))}},23910:(t,e,i)=>{"use strict";i.d(e,{p:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getDate()}},25126:(t,e,i)=>{"use strict";i.d(e,{Jt:()=>o,OS:()=>l});var s,n=i(12115);function r(){let t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(t=>{let{brand:e,version:i}=t;return e+"/"+i}).join(" "):navigator.userAgent}var l="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;let h={...s||(s=i.t(n,2))}.useInsertionEffect||(t=>t());function o(t){let e=n.useRef(()=>{});return h(()=>{e.current=t}),n.useCallback(function(){for(var t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];return null==e.current?void 0:e.current(...i)},[])}let a=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"})},25645:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});var s=i(48882);function n(t,e,i){return(0,s.P)(t,12*e,i)}},25703:(t,e,i)=>{"use strict";i.d(e,{Cg:()=>r,_P:()=>o,_m:()=>h,my:()=>s,s0:()=>l,w4:()=>n});let s=6048e5,n=864e5,r=6e4,l=36e5,h=1e3,o=Symbol.for("constructDateFrom")},26382:(t,e,i)=>{"use strict";i.d(e,{n:()=>n});var s=i(89447);function n(t,e){return+(0,s.a)(t)==+(0,s.a)(e)}},26681:(t,e,i)=>{"use strict";i.d(e,{GP:()=>z});var s=i(8093),n=i(95490),r=i(50007),l=i(67386),h=i(89447),o=i(17519),a=i(71182),u=i(21391),c=i(19315);function d(t,e){let i=Math.abs(t).toString().padStart(e,"0");return(t<0?"-":"")+i}let f={y(t,e){let i=t.getFullYear(),s=i>0?i:1-i;return d("yy"===e?s%100:s,e.length)},M(t,e){let i=t.getMonth();return"M"===e?String(i+1):d(i+1,2)},d:(t,e)=>d(t.getDate(),e.length),a(t,e){let i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];default:return"am"===i?"a.m.":"p.m."}},h:(t,e)=>d(t.getHours()%12||12,e.length),H:(t,e)=>d(t.getHours(),e.length),m:(t,e)=>d(t.getMinutes(),e.length),s:(t,e)=>d(t.getSeconds(),e.length),S(t,e){let i=e.length;return d(Math.trunc(t.getMilliseconds()*Math.pow(10,i-3)),e.length)}},m={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},p={G:function(t,e,i){let s=+(t.getFullYear()>0);switch(e){case"G":case"GG":case"GGG":return i.era(s,{width:"abbreviated"});case"GGGGG":return i.era(s,{width:"narrow"});default:return i.era(s,{width:"wide"})}},y:function(t,e,i){if("yo"===e){let e=t.getFullYear();return i.ordinalNumber(e>0?e:1-e,{unit:"year"})}return f.y(t,e)},Y:function(t,e,i,s){let n=(0,c.h)(t,s),r=n>0?n:1-n;return"YY"===e?d(r%100,2):"Yo"===e?i.ordinalNumber(r,{unit:"year"}):d(r,e.length)},R:function(t,e){return d((0,a.p)(t),e.length)},u:function(t,e){return d(t.getFullYear(),e.length)},Q:function(t,e,i){let s=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return d(s,2);case"Qo":return i.ordinalNumber(s,{unit:"quarter"});case"QQQ":return i.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(s,{width:"narrow",context:"formatting"});default:return i.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,e,i){let s=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return d(s,2);case"qo":return i.ordinalNumber(s,{unit:"quarter"});case"qqq":return i.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(s,{width:"narrow",context:"standalone"});default:return i.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,e,i){let s=t.getMonth();switch(e){case"M":case"MM":return f.M(t,e);case"Mo":return i.ordinalNumber(s+1,{unit:"month"});case"MMM":return i.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(s,{width:"narrow",context:"formatting"});default:return i.month(s,{width:"wide",context:"formatting"})}},L:function(t,e,i){let s=t.getMonth();switch(e){case"L":return String(s+1);case"LL":return d(s+1,2);case"Lo":return i.ordinalNumber(s+1,{unit:"month"});case"LLL":return i.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(s,{width:"narrow",context:"standalone"});default:return i.month(s,{width:"wide",context:"standalone"})}},w:function(t,e,i,s){let n=(0,u.N)(t,s);return"wo"===e?i.ordinalNumber(n,{unit:"week"}):d(n,e.length)},I:function(t,e,i){let s=(0,o.s)(t);return"Io"===e?i.ordinalNumber(s,{unit:"week"}):d(s,e.length)},d:function(t,e,i){return"do"===e?i.ordinalNumber(t.getDate(),{unit:"date"}):f.d(t,e)},D:function(t,e,i){let s=function(t,e){let i=(0,h.a)(t,void 0);return(0,r.m)(i,(0,l.D)(i))+1}(t);return"Do"===e?i.ordinalNumber(s,{unit:"dayOfYear"}):d(s,e.length)},E:function(t,e,i){let s=t.getDay();switch(e){case"E":case"EE":case"EEE":return i.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},e:function(t,e,i,s){let n=t.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return d(r,2);case"eo":return i.ordinalNumber(r,{unit:"day"});case"eee":return i.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"});default:return i.day(n,{width:"wide",context:"formatting"})}},c:function(t,e,i,s){let n=t.getDay(),r=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return d(r,e.length);case"co":return i.ordinalNumber(r,{unit:"day"});case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"});default:return i.day(n,{width:"wide",context:"standalone"})}},i:function(t,e,i){let s=t.getDay(),n=0===s?7:s;switch(e){case"i":return String(n);case"ii":return d(n,e.length);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return i.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(s,{width:"short",context:"formatting"});default:return i.day(s,{width:"wide",context:"formatting"})}},a:function(t,e,i){let s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,i){let s,n=t.getHours();switch(s=12===n?m.noon:0===n?m.midnight:n/12>=1?"pm":"am",e){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,i){let s,n=t.getHours();switch(s=n>=17?m.evening:n>=12?m.afternoon:n>=4?m.morning:m.night,e){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,i){if("ho"===e){let e=t.getHours()%12;return 0===e&&(e=12),i.ordinalNumber(e,{unit:"hour"})}return f.h(t,e)},H:function(t,e,i){return"Ho"===e?i.ordinalNumber(t.getHours(),{unit:"hour"}):f.H(t,e)},K:function(t,e,i){let s=t.getHours()%12;return"Ko"===e?i.ordinalNumber(s,{unit:"hour"}):d(s,e.length)},k:function(t,e,i){let s=t.getHours();return(0===s&&(s=24),"ko"===e)?i.ordinalNumber(s,{unit:"hour"}):d(s,e.length)},m:function(t,e,i){return"mo"===e?i.ordinalNumber(t.getMinutes(),{unit:"minute"}):f.m(t,e)},s:function(t,e,i){return"so"===e?i.ordinalNumber(t.getSeconds(),{unit:"second"}):f.s(t,e)},S:function(t,e){return f.S(t,e)},X:function(t,e,i){let s=t.getTimezoneOffset();if(0===s)return"Z";switch(e){case"X":return g(s);case"XXXX":case"XX":return b(s);default:return b(s,":")}},x:function(t,e,i){let s=t.getTimezoneOffset();switch(e){case"x":return g(s);case"xxxx":case"xx":return b(s);default:return b(s,":")}},O:function(t,e,i){let s=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+v(s,":");default:return"GMT"+b(s,":")}},z:function(t,e,i){let s=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+v(s,":");default:return"GMT"+b(s,":")}},t:function(t,e,i){return d(Math.trunc(t/1e3),e.length)},T:function(t,e,i){return d(+t,e.length)}};function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=t>0?"-":"+",s=Math.abs(t),n=Math.trunc(s/60),r=s%60;return 0===r?i+String(n):i+String(n)+e+d(r,2)}function g(t,e){return t%60==0?(t>0?"-":"+")+d(Math.abs(t)/60,2):b(t,e)}function b(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Math.abs(t);return(t>0?"-":"+")+d(Math.trunc(i/60),2)+e+d(i%60,2)}var w=i(51308),y=i(40861),x=i(23068);let M=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,S=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,C=/^'([^]*?)'?$/,_=/''/g,k=/[a-zA-Z]/;function z(t,e,i){var r,l,o,a,u,c,d,f,m,v,g,b,z,L,T,O,E,P;let D=(0,n.q)(),N=null!=(v=null!=(m=null==i?void 0:i.locale)?m:D.locale)?v:s.c,W=null!=(L=null!=(z=null!=(b=null!=(g=null==i?void 0:i.firstWeekContainsDate)?g:null==i||null==(l=i.locale)||null==(r=l.options)?void 0:r.firstWeekContainsDate)?b:D.firstWeekContainsDate)?z:null==(a=D.locale)||null==(o=a.options)?void 0:o.firstWeekContainsDate)?L:1,R=null!=(P=null!=(E=null!=(O=null!=(T=null==i?void 0:i.weekStartsOn)?T:null==i||null==(c=i.locale)||null==(u=c.options)?void 0:u.weekStartsOn)?O:D.weekStartsOn)?E:null==(f=D.locale)||null==(d=f.options)?void 0:d.weekStartsOn)?P:0,$=(0,h.a)(t,null==i?void 0:i.in);if(!(0,x.f)($))throw RangeError("Invalid time value");let F=e.match(S).map(t=>{let e=t[0];return"p"===e||"P"===e?(0,w.m[e])(t,N.formatLong):t}).join("").match(M).map(t=>{if("''"===t)return{isToken:!1,value:"'"};let e=t[0];if("'"===e)return{isToken:!1,value:function(t){let e=t.match(C);return e?e[1].replace(_,"'"):t}(t)};if(p[e])return{isToken:!0,value:t};if(e.match(k))throw RangeError("Format string contains an unescaped latin alphabet character `"+e+"`");return{isToken:!1,value:t}});N.localize.preprocessor&&(F=N.localize.preprocessor($,F));let B={firstWeekContainsDate:W,weekStartsOn:R,locale:N};return F.map(s=>{if(!s.isToken)return s.value;let n=s.value;return(!(null==i?void 0:i.useAdditionalWeekYearTokens)&&(0,y.xM)(n)||!(null==i?void 0:i.useAdditionalDayOfYearTokens)&&(0,y.ef)(n))&&(0,y.Ss)(n,e,String(t)),(0,p[n[0]])($,n,N.localize,B)}).join("")}},27981:(t,e,i)=>{"use strict";i.d(e,{a:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in),n=i.getMonth();return i.setMonth(n-n%3,1),i.setHours(0,0,0,0),i}},28738:(t,e,i)=>{"use strict";i.d(e,{qg:()=>tw});var s=i(8093),n=i(51308),r=i(40861),l=i(7239),h=i(95490),o=i(89447);class a{validate(t,e){return!0}constructor(){this.subPriority=0}}class u extends a{validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}constructor(t,e,i,s,n){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=s,n&&(this.subPriority=n)}}class c extends a{set(t,e){return e.timestampIsSet?t:(0,l.w)(t,function(t,e){var i,s;let n="function"==typeof(i=e)&&(null==(s=i.prototype)?void 0:s.constructor)===i?new e(0):(0,l.w)(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}(t,this.context))}constructor(t,e){super(),this.priority=10,this.subPriority=-1,this.context=t||(t=>(0,l.w)(e,t))}}class d{run(t,e,i,s){let n=this.parse(t,e,i,s);return n?{setter:new u(n.value,this.validate,this.set,this.priority,this.subPriority),rest:n.rest}:null}validate(t,e,i){return!0}}class f extends d{parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=140,this.incompatibleTokens=["R","u","t","T"]}}var m=i(25703);let p={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},v={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function g(t,e){return t?{value:e(t.value),rest:t.rest}:t}function b(t,e){let i=e.match(t);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function w(t,e){let i=e.match(t);if(!i)return null;if("Z"===i[0])return{value:0,rest:e.slice(1)};let s="+"===i[1]?1:-1,n=i[2]?parseInt(i[2],10):0,r=i[3]?parseInt(i[3],10):0,l=i[5]?parseInt(i[5],10):0;return{value:s*(n*m.s0+r*m.Cg+l*m._m),rest:e.slice(i[0].length)}}function y(t){return b(p.anyDigitsSigned,t)}function x(t,e){switch(t){case 1:return b(p.singleDigit,e);case 2:return b(p.twoDigits,e);case 3:return b(p.threeDigits,e);case 4:return b(p.fourDigits,e);default:return b(RegExp("^\\d{1,"+t+"}"),e)}}function M(t,e){switch(t){case 1:return b(p.singleDigitSigned,e);case 2:return b(p.twoDigitsSigned,e);case 3:return b(p.threeDigitsSigned,e);case 4:return b(p.fourDigitsSigned,e);default:return b(RegExp("^-?\\d{1,"+t+"}"),e)}}function S(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function C(t,e){let i,s=e>0,n=s?e:1-e;if(n<=50)i=t||100;else{let e=n+50;i=t+100*Math.trunc(e/100)-100*(t>=e%100)}return s?i:1-i}function _(t){return t%400==0||t%4==0&&t%100!=0}class k extends d{parse(t,e,i){let s=t=>({year:t,isTwoDigitYear:"yy"===e});switch(e){case"y":return g(x(4,t),s);case"yo":return g(i.ordinalNumber(t,{unit:"year"}),s);default:return g(x(e.length,t),s)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let s=t.getFullYear();if(i.isTwoDigitYear){let e=C(i.year,s);return t.setFullYear(e,0,1),t.setHours(0,0,0,0),t}let n="era"in e&&1!==e.era?1-i.year:i.year;return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"]}}var z=i(19315),L=i(84423);class T extends d{parse(t,e,i){let s=t=>({year:t,isTwoDigitYear:"YY"===e});switch(e){case"Y":return g(x(4,t),s);case"Yo":return g(i.ordinalNumber(t,{unit:"year"}),s);default:return g(x(e.length,t),s)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,s){let n=(0,z.h)(t,s);if(i.isTwoDigitYear){let e=C(i.year,n);return t.setFullYear(e,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),(0,L.k)(t,s)}let r="era"in e&&1!==e.era?1-i.year:i.year;return t.setFullYear(r,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),(0,L.k)(t,s)}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}}var O=i(70540);class E extends d{parse(t,e){return"R"===e?M(4,t):M(e.length,t)}set(t,e,i){let s=(0,l.w)(t,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),(0,O.b)(s)}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}}class P extends d{parse(t,e){return"u"===e?M(4,t):M(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=130,this.incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}}class D extends d{parse(t,e,i){switch(e){case"Q":case"QQ":return x(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=120,this.incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}}class N extends d{parse(t,e,i){switch(e){case"q":case"qq":return x(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=120,this.incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}}class W extends d{parse(t,e,i){let s=t=>t-1;switch(e){case"M":return g(b(p.month,t),s);case"MM":return g(x(2,t),s);case"Mo":return g(i.ordinalNumber(t,{unit:"month"}),s);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"],this.priority=110}}class R extends d{parse(t,e,i){let s=t=>t-1;switch(e){case"L":return g(b(p.month,t),s);case"LL":return g(x(2,t),s);case"Lo":return g(i.ordinalNumber(t,{unit:"month"}),s);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=110,this.incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}}var $=i(21391);class F extends d{parse(t,e,i){switch(e){case"w":return b(p.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return x(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,s){return(0,L.k)(function(t,e,i){let s=(0,o.a)(t,null==i?void 0:i.in),n=(0,$.N)(s,i)-e;return s.setDate(s.getDate()-7*n),(0,o.a)(s,null==i?void 0:i.in)}(t,i,s),s)}constructor(...t){super(...t),this.priority=100,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}}var B=i(17519);class I extends d{parse(t,e,i){switch(e){case"I":return b(p.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return x(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return(0,O.b)(function(t,e,i){let s=(0,o.a)(t,void 0),n=(0,B.s)(s,void 0)-e;return s.setDate(s.getDate()-7*n),s}(t,i))}constructor(...t){super(...t),this.priority=100,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}}let A=[31,28,31,30,31,30,31,31,30,31,30,31],H=[31,29,31,30,31,30,31,31,30,31,30,31];class V extends d{parse(t,e,i){switch(e){case"d":return b(p.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return x(e.length,t)}}validate(t,e){let i=_(t.getFullYear()),s=t.getMonth();return i?e>=1&&e<=H[s]:e>=1&&e<=A[s]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.subPriority=1,this.incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}}class Y extends d{parse(t,e,i){switch(e){case"D":case"DD":return b(p.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return x(e.length,t)}}validate(t,e){return _(t.getFullYear())?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.subpriority=1,this.incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}}var j=i(40714);function U(t,e,i){var s,n,r,l,a,u,c,d;let f=(0,h.q)(),m=null!=(d=null!=(c=null!=(u=null!=(a=null==i?void 0:i.weekStartsOn)?a:null==i||null==(n=i.locale)||null==(s=n.options)?void 0:s.weekStartsOn)?u:f.weekStartsOn)?c:null==(l=f.locale)||null==(r=l.options)?void 0:r.weekStartsOn)?d:0,p=(0,o.a)(t,null==i?void 0:i.in),v=p.getDay(),g=7-m,b=e<0||e>6?e-(v+g)%7:((e%7+7)%7+g)%7-(v+g)%7;return(0,j.f)(p,b,i)}class q extends d{parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,s){return(t=U(t,i,s)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["D","i","e","c","t","T"]}}class G extends d{parse(t,e,i,s){let n=t=>{let e=7*Math.floor((t-1)/7);return(t+s.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return g(x(e.length,t),n);case"eo":return g(i.ordinalNumber(t,{unit:"day"}),n);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,s){return(t=U(t,i,s)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}}class J extends d{parse(t,e,i,s){let n=t=>{let e=7*Math.floor((t-1)/7);return(t+s.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return g(x(e.length,t),n);case"co":return g(i.ordinalNumber(t,{unit:"day"}),n);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,s){return(t=U(t,i,s)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}}class Z extends d{parse(t,e,i){let s=t=>0===t?7:t;switch(e){case"i":case"ii":return x(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return g(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return g(i.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return g(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s);default:return g(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return(t=function(t,e,i){let s=(0,o.a)(t,void 0),n=function(t,e){let i=(0,o.a)(t,null==e?void 0:e.in).getDay();return 0===i?7:i}(s,void 0);return(0,j.f)(s,e-n,i)}(t,i)).setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=90,this.incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}}class X extends d{parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(S(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["b","B","H","k","t","T"]}}class K extends d{parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(S(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["a","B","H","k","t","T"]}}class Q extends d{parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(S(i),0,0,0),t}constructor(...t){super(...t),this.priority=80,this.incompatibleTokens=["a","b","t","T"]}}class tt extends d{parse(t,e,i){switch(e){case"h":return b(p.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return x(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let s=t.getHours()>=12;return s&&i<12?t.setHours(i+12,0,0,0):s||12!==i?t.setHours(i,0,0,0):t.setHours(0,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["H","K","k","t","T"]}}class te extends d{parse(t,e,i){switch(e){case"H":return b(p.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return x(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["a","b","h","K","k","t","T"]}}class ti extends d{parse(t,e,i){switch(e){case"K":return b(p.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return x(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["h","H","k","t","T"]}}class ts extends d{parse(t,e,i){switch(e){case"k":return b(p.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return x(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){return t.setHours(i<=24?i%24:i,0,0,0),t}constructor(...t){super(...t),this.priority=70,this.incompatibleTokens=["a","b","h","H","K","t","T"]}}class tn extends d{parse(t,e,i){switch(e){case"m":return b(p.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return x(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}constructor(...t){super(...t),this.priority=60,this.incompatibleTokens=["t","T"]}}class tr extends d{parse(t,e,i){switch(e){case"s":return b(p.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return x(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}constructor(...t){super(...t),this.priority=50,this.incompatibleTokens=["t","T"]}}class tl extends d{parse(t,e){return g(x(e.length,t),t=>Math.trunc(t*Math.pow(10,-e.length+3)))}set(t,e,i){return t.setMilliseconds(i),t}constructor(...t){super(...t),this.priority=30,this.incompatibleTokens=["t","T"]}}var th=i(97444);class to extends d{parse(t,e){switch(e){case"X":return w(v.basicOptionalMinutes,t);case"XX":return w(v.basic,t);case"XXXX":return w(v.basicOptionalSeconds,t);case"XXXXX":return w(v.extendedOptionalSeconds,t);default:return w(v.extended,t)}}set(t,e,i){return e.timestampIsSet?t:(0,l.w)(t,t.getTime()-(0,th.G)(t)-i)}constructor(...t){super(...t),this.priority=10,this.incompatibleTokens=["t","T","x"]}}class ta extends d{parse(t,e){switch(e){case"x":return w(v.basicOptionalMinutes,t);case"xx":return w(v.basic,t);case"xxxx":return w(v.basicOptionalSeconds,t);case"xxxxx":return w(v.extendedOptionalSeconds,t);default:return w(v.extended,t)}}set(t,e,i){return e.timestampIsSet?t:(0,l.w)(t,t.getTime()-(0,th.G)(t)-i)}constructor(...t){super(...t),this.priority=10,this.incompatibleTokens=["t","T","X"]}}class tu extends d{parse(t){return y(t)}set(t,e,i){return[(0,l.w)(t,1e3*i),{timestampIsSet:!0}]}constructor(...t){super(...t),this.priority=40,this.incompatibleTokens="*"}}class tc extends d{parse(t){return y(t)}set(t,e,i){return[(0,l.w)(t,i),{timestampIsSet:!0}]}constructor(...t){super(...t),this.priority=20,this.incompatibleTokens="*"}}let td={G:new f,y:new k,Y:new T,R:new E,u:new P,Q:new D,q:new N,M:new W,L:new R,w:new F,I:new I,d:new V,D:new Y,E:new q,e:new G,c:new J,i:new Z,a:new X,b:new K,B:new Q,h:new tt,H:new te,K:new ti,k:new ts,m:new tn,s:new tr,S:new tl,X:new to,x:new ta,t:new tu,T:new tc},tf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,tm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tp=/^'([^]*?)'?$/,tv=/''/g,tg=/\S/,tb=/[a-zA-Z]/;function tw(t,e,i,a){var u,d,f,m,p,v,g,b,w,y,x,M,S,C,_,k,z,L;let T=()=>(0,l.w)((null==a?void 0:a.in)||i,NaN),O=Object.assign({},(0,h.q)()),E=null!=(y=null!=(w=null==a?void 0:a.locale)?w:O.locale)?y:s.c,P=null!=(C=null!=(S=null!=(M=null!=(x=null==a?void 0:a.firstWeekContainsDate)?x:null==a||null==(d=a.locale)||null==(u=d.options)?void 0:u.firstWeekContainsDate)?M:O.firstWeekContainsDate)?S:null==(m=O.locale)||null==(f=m.options)?void 0:f.firstWeekContainsDate)?C:1,D=null!=(L=null!=(z=null!=(k=null!=(_=null==a?void 0:a.weekStartsOn)?_:null==a||null==(v=a.locale)||null==(p=v.options)?void 0:p.weekStartsOn)?k:O.weekStartsOn)?z:null==(b=O.locale)||null==(g=b.options)?void 0:g.weekStartsOn)?L:0;if(!e)return t?T():(0,o.a)(i,null==a?void 0:a.in);let N={firstWeekContainsDate:P,weekStartsOn:D,locale:E},W=[new c(null==a?void 0:a.in,i)],R=e.match(tm).map(t=>{let e=t[0];return e in n.m?(0,n.m[e])(t,E.formatLong):t}).join("").match(tf),$=[];for(let i of R){!(null==a?void 0:a.useAdditionalWeekYearTokens)&&(0,r.xM)(i)&&(0,r.Ss)(i,e,t),!(null==a?void 0:a.useAdditionalDayOfYearTokens)&&(0,r.ef)(i)&&(0,r.Ss)(i,e,t);let s=i[0],n=td[s];if(n){let{incompatibleTokens:e}=n;if(Array.isArray(e)){let t=$.find(t=>e.includes(t.token)||t.token===s);if(t)throw RangeError("The format string mustn't contain `".concat(t.fullToken,"` and `").concat(i,"` at the same time"))}else if("*"===n.incompatibleTokens&&$.length>0)throw RangeError("The format string mustn't contain `".concat(i,"` and any other token at the same time"));$.push({token:s,fullToken:i});let r=n.run(t,i,E.match,N);if(!r)return T();W.push(r.setter),t=r.rest}else{if(s.match(tb))throw RangeError("Format string contains an unescaped latin alphabet character `"+s+"`");if("''"===i?i="'":"'"===s&&(i=i.match(tp)[1].replace(tv,"'")),0!==t.indexOf(i))return T();t=t.slice(i.length)}}if(t.length>0&&tg.test(t))return T();let F=W.map(t=>t.priority).sort((t,e)=>e-t).filter((t,e,i)=>i.indexOf(t)===e).map(t=>W.filter(e=>e.priority===t).sort((t,e)=>e.subPriority-t.subPriority)).map(t=>t[0]),B=(0,o.a)(i,null==a?void 0:a.in);if(isNaN(+B))return T();let I={};for(let t of F){if(!t.validate(B,N))return T();let e=t.set(B,I,N);Array.isArray(e)?(B=e[0],Object.assign(I,e[1])):B=e}return B}},29161:(t,e,i)=>{"use strict";i.d(e,{Y:()=>n});var s=i(89447);function n(t,e){return+(0,s.a)(t)<+(0,s.a)(e)}},32944:(t,e,i)=>{"use strict";i.d(e,{p:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in),n=i.getMonth();return i.setFullYear(i.getFullYear(),n+1,0),i.setHours(23,59,59,999),i}},34138:(t,e,i)=>{"use strict";i.d(e,{z:()=>r});var s=i(49291),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in),l=Math.trunc(r.getMonth()/3)+1;return(0,s.Z)(r,r.getMonth()+3*(e-l))}},35279:()=>{},36489:(t,e,i)=>{"use strict";i.d(e,{q:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getHours()}},36645:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});let s=i(88229)._(i(67357));function n(t,e){var i;let n={};"function"==typeof t&&(n.loader=t);let r={...n,...e};return(0,s.default)({...r,modules:null==(i=r.loadableGenerated)?void 0:i.modules})}("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},37223:(t,e,i)=>{"use strict";i.d(e,{a:()=>n});var s=i(48882);function n(t,e,i){return(0,s.P)(t,-e,i)}},38619:(t,e,i)=>{"use strict";i.d(e,{g:()=>n});var s=i(89447);function n(t,e,i){let n=(0,s.a)(t,null==i?void 0:i.in);return n.setMinutes(e),n}},38991:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});var s=i(7239),n=i(89447);function r(t,e,i){return(0,s.w)((null==i?void 0:i.in)||t,+(0,n.a)(t)+e)}},39624:(t,e,i)=>{"use strict";i.d(e,{z:()=>n});var s=i(48882);function n(t,e,i){return(0,s.P)(t,3*e,i)}},40150:(t,e,i)=>{"use strict";i.d(e,{p:()=>n});var s=i(38991);function n(t,e,i){return(0,s.A)(t,1e3*e,i)}},40714:(t,e,i)=>{"use strict";i.d(e,{f:()=>r});var s=i(7239),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in);return isNaN(e)?(0,s.w)((null==i?void 0:i.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}},40861:(t,e,i)=>{"use strict";i.d(e,{Ss:()=>o,ef:()=>l,xM:()=>h});let s=/^D+$/,n=/^Y+$/,r=["D","DD","YY","YYYY"];function l(t){return s.test(t)}function h(t){return n.test(t)}function o(t,e,i){let s=function(t,e,i){let s="Y"===t[0]?"years":"days of the month";return"Use `".concat(t.toLowerCase(),"` instead of `").concat(t,"` (in `").concat(e,"`) for formatting ").concat(s," to the input `").concat(i,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md")}(t,e,i);if(console.warn(s),r.includes(t))throw RangeError(s)}},43163:(t,e,i)=>{"use strict";i.d(e,{Q:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in),n=i.getFullYear();return i.setFullYear(n+1,0,0),i.setHours(23,59,59,999),i}},48882:(t,e,i)=>{"use strict";i.d(e,{P:()=>r});var s=i(7239),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in);if(isNaN(e))return(0,s.w)((null==i?void 0:i.in)||t,NaN);if(!e)return r;let l=r.getDate(),h=(0,s.w)((null==i?void 0:i.in)||t,r.getTime());return(h.setMonth(r.getMonth()+e+1,0),l>=h.getDate())?h:(r.setFullYear(h.getFullYear(),h.getMonth(),l),r)}},49291:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var s=i(7239),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in),l=r.getFullYear(),h=r.getDate(),o=(0,s.w)((null==i?void 0:i.in)||t,0);o.setFullYear(l,e,15),o.setHours(0,0,0,0);let a=function(t,e){let i=(0,n.a)(t,void 0),r=i.getFullYear(),l=i.getMonth(),h=(0,s.w)(i,0);return h.setFullYear(r,l+1,0),h.setHours(0,0,0,0),h.getDate()}(o);return r.setMonth(e,Math.min(h,a)),r}},50007:(t,e,i)=>{"use strict";i.d(e,{m:()=>h});var s=i(97444),n=i(61183),r=i(25703),l=i(6711);function h(t,e,i){let[h,o]=(0,n.x)(null==i?void 0:i.in,t,e),a=(0,l.o)(h),u=(0,l.o)(o);return Math.round((a-(0,s.G)(a)-(u-(0,s.G)(u)))/r.w4)}},51308:(t,e,i)=>{"use strict";i.d(e,{m:()=>r});let s=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});default:return e.date({width:"full"})}},n=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});default:return e.time({width:"full"})}},r={p:n,P:(t,e)=>{let i,r=t.match(/(P+)(p+)?/)||[],l=r[1],h=r[2];if(!h)return s(t,e);switch(l){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;default:i=e.dateTime({width:"full"})}return i.replace("{{date}}",s(l,e)).replace("{{time}}",n(h,e))}}},52596:(t,e,i)=>{"use strict";function s(){for(var t,e,i=0,s="",n=arguments.length;i<n;i++)(t=arguments[i])&&(e=function t(e){var i,s,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var r=e.length;for(i=0;i<r;i++)e[i]&&(s=t(e[i]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}(t))&&(s&&(s+=" "),s+=e);return s}i.d(e,{$:()=>s})},53231:(t,e,i)=>{"use strict";i.d(e,{w:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in);return i.setDate(1),i.setHours(0,0,0,0),i}},54549:(t,e,i)=>{"use strict";i.d(e,{k:()=>n});var s=i(85118);function n(t,e,i){return(0,s.J)(t,-e,i)}},55028:(t,e,i)=>{"use strict";i.d(e,{default:()=>n.a});var s=i(36645),n=i.n(s)},55551:(t,e,i)=>{"use strict";i.d(e,{C:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getFullYear()}},56146:(t,e,i)=>{"use strict";i.d(e,{j:()=>r});var s=i(7239),n=i(89447);function r(t,e){let i,r=null==e?void 0:e.in;return t.forEach(t=>{r||"object"!=typeof t||(r=s.w.bind(null,t));let e=(0,n.a)(t,r);(!i||i>e||isNaN(+e))&&(i=e)}),(0,s.w)(r,i||NaN)}},57716:(t,e,i)=>{"use strict";i.d(e,{d:()=>n});var s=i(89447);function n(t,e){return+(0,s.a)(t)>+(0,s.a)(e)}},58086:(t,e,i)=>{"use strict";i.d(e,{z:()=>r});var s=i(25703),n=i(89447);function r(t,e,i){let r=(0,n.a)(t,null==i?void 0:i.in);return r.setTime(r.getTime()+e*s.Cg),r}},59875:(t,e,i)=>{"use strict";i.d(e,{U:()=>n});var s=i(61183);function n(t,e,i){let[n,r]=(0,s.x)(null==i?void 0:i.in,t,e);return 12*(n.getFullYear()-r.getFullYear())+(n.getMonth()-r.getMonth())}},61183:(t,e,i)=>{"use strict";i.d(e,{x:()=>n});var s=i(7239);function n(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];let r=s.w.bind(null,t||i.find(t=>"object"==typeof t));return i.map(r)}},62146:(t,e,i)=>{"use strict";function s(t){let{reason:e,children:i}=t;return i}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BailoutToCSR",{enumerable:!0,get:function(){return s}}),i(45262)},63280:(t,e,i)=>{"use strict";i.d(e,{d:()=>r});var s=i(61183),n=i(27981);function r(t,e,i){let[r,l]=(0,s.x)(null==i?void 0:i.in,t,e);return+(0,n.a)(r)==+(0,n.a)(l)}},64044:(t,e,i)=>{"use strict";i.d(e,{L:()=>r});var s=i(38991),n=i(25703);function r(t,e,i){return(0,s.A)(t,e*n.s0,i)}},64054:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),!function(t,e){for(var i in e)Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}(e,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return r},createSnapshot:function(){return h}});let i=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class s{disable(){throw i}getStore(){}run(){throw i}exit(){throw i}enterWith(){throw i}static bind(t){return t}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function r(){return n?new n:new s}function l(t){return n?n.bind(t):s.bind(t)}function h(){return n?n.snapshot():function(t,...e){return t(...e)}}},66848:(t,e,i)=>{"use strict";i.d(e,{P:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getDay()}},67357:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o}});let s=i(95155),n=i(12115),r=i(62146);function l(t){return{default:t&&"default"in t?t.default:t}}i(10255);let h={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},o=function(t){let e={...h,...t},i=(0,n.lazy)(()=>e.loader().then(l)),o=e.loading;function a(t){let l=o?(0,s.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,h=!e.ssr||!!e.loading,a=h?n.Suspense:n.Fragment,u=e.ssr?(0,s.jsxs)(s.Fragment,{children:[null,(0,s.jsx)(i,{...t})]}):(0,s.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(i,{...t})});return(0,s.jsx)(a,{...h?{fallback:l}:{},children:u})}return a.displayName="LoadableComponent",a}},67386:(t,e,i)=>{"use strict";i.d(e,{D:()=>n});var s=i(89447);function n(t,e){let i=(0,s.a)(t,null==e?void 0:e.in);return i.setFullYear(i.getFullYear(),0,1),i.setHours(0,0,0,0),i}},70540:(t,e,i)=>{"use strict";i.d(e,{b:()=>n});var s=i(84423);function n(t,e){return(0,s.k)(t,{...e,weekStartsOn:1})}},70542:(t,e,i)=>{"use strict";i.d(e,{t:()=>n});var s=i(61183);function n(t,e,i){let[n,r]=(0,s.x)(null==i?void 0:i.in,t,e);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}},71182:(t,e,i)=>{"use strict";i.d(e,{p:()=>l});var s=i(7239),n=i(70540),r=i(89447);function l(t,e){let i=(0,r.a)(t,null==e?void 0:e.in),l=i.getFullYear(),h=(0,s.w)(i,0);h.setFullYear(l+1,0,4),h.setHours(0,0,0,0);let o=(0,n.b)(h),a=(0,s.w)(i,0);a.setFullYear(l,0,4),a.setHours(0,0,0,0);let u=(0,n.b)(a);return i.getTime()>=o.getTime()?l+1:i.getTime()>=u.getTime()?l:l-1}},71423:(t,e,i)=>{"use strict";i.d(e,{O:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getMinutes()}},72794:(t,e,i)=>{"use strict";i.d(e,{$:()=>r});var s=i(95490),n=i(89447);function r(t,e){var i,r,l,h,o,a,u,c;let d=(0,s.q)(),f=null!=(c=null!=(u=null!=(a=null!=(o=null==e?void 0:e.weekStartsOn)?o:null==e||null==(r=e.locale)||null==(i=r.options)?void 0:i.weekStartsOn)?a:d.weekStartsOn)?u:null==(h=d.locale)||null==(l=h.options)?void 0:l.weekStartsOn)?c:0,m=(0,n.a)(t,null==e?void 0:e.in),p=m.getDay();return m.setDate(m.getDate()+((p<f?-7:0)+6-(p-f))),m.setHours(23,59,59,999),m}},76492:(t,e,i)=>{"use strict";i.d(e,{UE:()=>V,ll:()=>I,rD:()=>Y,UU:()=>H,cY:()=>A});let s=Math.min,n=Math.max,r=Math.round,l=Math.floor,h=t=>({x:t,y:t}),o={left:"right",right:"left",bottom:"top",top:"bottom"},a={start:"end",end:"start"};function u(t,e){return"function"==typeof t?t(e):t}function c(t){return t.split("-")[0]}function d(t){return t.split("-")[1]}function f(t){return"y"===t?"height":"width"}function m(t){return["top","bottom"].includes(c(t))?"y":"x"}function p(t){return"x"===m(t)?"y":"x"}function v(t){return t.replace(/start|end/g,t=>a[t])}function g(t){return t.replace(/left|right|bottom|top/g,t=>o[t])}function b(t){return"number"!=typeof t?{top:0,right:0,bottom:0,left:0,...t}:{top:t,right:t,bottom:t,left:t}}function w(t){let{x:e,y:i,width:s,height:n}=t;return{width:s,height:n,top:i,left:e,right:e+s,bottom:i+n,x:e,y:i}}function y(t,e,i){let s,{reference:n,floating:r}=t,l=m(e),h=p(e),o=f(h),a=c(e),u="y"===l,v=n.x+n.width/2-r.width/2,g=n.y+n.height/2-r.height/2,b=n[o]/2-r[o]/2;switch(a){case"top":s={x:v,y:n.y-r.height};break;case"bottom":s={x:v,y:n.y+n.height};break;case"right":s={x:n.x+n.width,y:g};break;case"left":s={x:n.x-r.width,y:g};break;default:s={x:n.x,y:n.y}}switch(d(e)){case"start":s[h]-=b*(i&&u?-1:1);break;case"end":s[h]+=b*(i&&u?-1:1)}return s}let x=async(t,e,i)=>{let{placement:s="bottom",strategy:n="absolute",middleware:r=[],platform:l}=i,h=r.filter(Boolean),o=await (null==l.isRTL?void 0:l.isRTL(e)),a=await l.getElementRects({reference:t,floating:e,strategy:n}),{x:u,y:c}=y(a,s,o),d=s,f={},m=0;for(let i=0;i<h.length;i++){let{name:r,fn:p}=h[i],{x:v,y:g,data:b,reset:w}=await p({x:u,y:c,initialPlacement:s,placement:d,strategy:n,middlewareData:f,rects:a,platform:l,elements:{reference:t,floating:e}});u=null!=v?v:u,c=null!=g?g:c,f={...f,[r]:{...f[r],...b}},w&&m<=50&&(m++,"object"==typeof w&&(w.placement&&(d=w.placement),w.rects&&(a=!0===w.rects?await l.getElementRects({reference:t,floating:e,strategy:n}):w.rects),{x:u,y:c}=y(a,d,o)),i=-1)}return{x:u,y:c,placement:d,strategy:n,middlewareData:f}};async function M(t,e){var i;void 0===e&&(e={});let{x:s,y:n,platform:r,rects:l,elements:h,strategy:o}=t,{boundary:a="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:m=0}=u(e,t),p=b(m),v=h[f?"floating"===d?"reference":"floating":d],g=w(await r.getClippingRect({element:null==(i=await (null==r.isElement?void 0:r.isElement(v)))||i?v:v.contextElement||await (null==r.getDocumentElement?void 0:r.getDocumentElement(h.floating)),boundary:a,rootBoundary:c,strategy:o})),y="floating"===d?{x:s,y:n,width:l.floating.width,height:l.floating.height}:l.reference,x=await (null==r.getOffsetParent?void 0:r.getOffsetParent(h.floating)),M=await (null==r.isElement?void 0:r.isElement(x))&&await (null==r.getScale?void 0:r.getScale(x))||{x:1,y:1},S=w(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:y,offsetParent:x,strategy:o}):y);return{top:(g.top-S.top+p.top)/M.y,bottom:(S.bottom-g.bottom+p.bottom)/M.y,left:(g.left-S.left+p.left)/M.x,right:(S.right-g.right+p.right)/M.x}}async function S(t,e){let{placement:i,platform:s,elements:n}=t,r=await (null==s.isRTL?void 0:s.isRTL(n.floating)),l=c(i),h=d(i),o="y"===m(i),a=["left","top"].includes(l)?-1:1,f=r&&o?-1:1,p=u(e,t),{mainAxis:v,crossAxis:g,alignmentAxis:b}="number"==typeof p?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return h&&"number"==typeof b&&(g="end"===h?-1*b:b),o?{x:g*f,y:v*a}:{x:v*a,y:g*f}}var C=i(86301);function _(t){let e=(0,C.L9)(t),i=parseFloat(e.width)||0,s=parseFloat(e.height)||0,n=(0,C.sb)(t),l=n?t.offsetWidth:i,h=n?t.offsetHeight:s,o=r(i)!==l||r(s)!==h;return o&&(i=l,s=h),{width:i,height:s,$:o}}function k(t){return(0,C.vq)(t)?t:t.contextElement}function z(t){let e=k(t);if(!(0,C.sb)(e))return h(1);let i=e.getBoundingClientRect(),{width:s,height:n,$:l}=_(e),o=(l?r(i.width):i.width)/s,a=(l?r(i.height):i.height)/n;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}let L=h(0);function T(t){let e=(0,C.zk)(t);return(0,C.Tc)()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:L}function O(t,e,i,s){var n;void 0===e&&(e=!1),void 0===i&&(i=!1);let r=t.getBoundingClientRect(),l=k(t),o=h(1);e&&(s?(0,C.vq)(s)&&(o=z(s)):o=z(t));let a=(void 0===(n=i)&&(n=!1),s&&(!n||s===(0,C.zk)(l))&&n)?T(l):h(0),u=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,d=r.width/o.x,f=r.height/o.y;if(l){let t=(0,C.zk)(l),e=s&&(0,C.vq)(s)?(0,C.zk)(s):s,i=t,n=(0,C._m)(i);for(;n&&s&&e!==i;){let t=z(n),e=n.getBoundingClientRect(),s=(0,C.L9)(n),r=e.left+(n.clientLeft+parseFloat(s.paddingLeft))*t.x,l=e.top+(n.clientTop+parseFloat(s.paddingTop))*t.y;u*=t.x,c*=t.y,d*=t.x,f*=t.y,u+=r,c+=l,i=(0,C.zk)(n),n=(0,C._m)(i)}}return w({width:d,height:f,x:u,y:c})}function E(t,e){let i=(0,C.CP)(t).scrollLeft;return e?e.left+i:O((0,C.ep)(t)).left+i}function P(t,e,i){void 0===i&&(i=!1);let s=t.getBoundingClientRect();return{x:s.left+e.scrollLeft-(i?0:E(t,s)),y:s.top+e.scrollTop}}function D(t,e,i){let s;if("viewport"===e)s=function(t,e){let i=(0,C.zk)(t),s=(0,C.ep)(t),n=i.visualViewport,r=s.clientWidth,l=s.clientHeight,h=0,o=0;if(n){r=n.width,l=n.height;let t=(0,C.Tc)();(!t||t&&"fixed"===e)&&(h=n.offsetLeft,o=n.offsetTop)}return{width:r,height:l,x:h,y:o}}(t,i);else if("document"===e)s=function(t){let e=(0,C.ep)(t),i=(0,C.CP)(t),s=t.ownerDocument.body,r=n(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),l=n(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight),h=-i.scrollLeft+E(t),o=-i.scrollTop;return"rtl"===(0,C.L9)(s).direction&&(h+=n(e.clientWidth,s.clientWidth)-r),{width:r,height:l,x:h,y:o}}((0,C.ep)(t));else if((0,C.vq)(e))s=function(t,e){let i=O(t,!0,"fixed"===e),s=i.top+t.clientTop,n=i.left+t.clientLeft,r=(0,C.sb)(t)?z(t):h(1),l=t.clientWidth*r.x,o=t.clientHeight*r.y;return{width:l,height:o,x:n*r.x,y:s*r.y}}(e,i);else{let i=T(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return w(s)}function N(t){return"static"===(0,C.L9)(t).position}function W(t,e){if(!(0,C.sb)(t)||"fixed"===(0,C.L9)(t).position)return null;if(e)return e(t);let i=t.offsetParent;return(0,C.ep)(t)===i&&(i=i.ownerDocument.body),i}function R(t,e){let i=(0,C.zk)(t);if((0,C.Tf)(t))return i;if(!(0,C.sb)(t)){let e=(0,C.$4)(t);for(;e&&!(0,C.eu)(e);){if((0,C.vq)(e)&&!N(e))return e;e=(0,C.$4)(e)}return i}let s=W(t,e);for(;s&&(0,C.Lv)(s)&&N(s);)s=W(s,e);return s&&(0,C.eu)(s)&&N(s)&&!(0,C.sQ)(s)?i:s||(0,C.gJ)(t)||i}let $=async function(t){let e=this.getOffsetParent||R,i=this.getDimensions,s=await i(t.floating);return{reference:function(t,e,i){let s=(0,C.sb)(e),n=(0,C.ep)(e),r="fixed"===i,l=O(t,!0,r,e),o={scrollLeft:0,scrollTop:0},a=h(0);if(s||!s&&!r)if(("body"!==(0,C.mq)(e)||(0,C.ZU)(n))&&(o=(0,C.CP)(e)),s){let t=O(e,!0,r,e);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}else n&&(a.x=E(n));r&&!s&&n&&(a.x=E(n));let u=!n||s||r?h(0):P(n,o);return{x:l.left+o.scrollLeft-a.x-u.x,y:l.top+o.scrollTop-a.y-u.y,width:l.width,height:l.height}}(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}},F={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:i,offsetParent:s,strategy:n}=t,r="fixed"===n,l=(0,C.ep)(s),o=!!e&&(0,C.Tf)(e.floating);if(s===l||o&&r)return i;let a={scrollLeft:0,scrollTop:0},u=h(1),c=h(0),d=(0,C.sb)(s);if((d||!d&&!r)&&(("body"!==(0,C.mq)(s)||(0,C.ZU)(l))&&(a=(0,C.CP)(s)),(0,C.sb)(s))){let t=O(s);u=z(s),c.x=t.x+s.clientLeft,c.y=t.y+s.clientTop}let f=!l||d||r?h(0):P(l,a,!0);return{width:i.width*u.x,height:i.height*u.y,x:i.x*u.x-a.scrollLeft*u.x+c.x+f.x,y:i.y*u.y-a.scrollTop*u.y+c.y+f.y}},getDocumentElement:C.ep,getClippingRect:function(t){let{element:e,boundary:i,rootBoundary:r,strategy:l}=t,h=[..."clippingAncestors"===i?(0,C.Tf)(e)?[]:function(t,e){let i=e.get(t);if(i)return i;let s=(0,C.v9)(t,[],!1).filter(t=>(0,C.vq)(t)&&"body"!==(0,C.mq)(t)),n=null,r="fixed"===(0,C.L9)(t).position,l=r?(0,C.$4)(t):t;for(;(0,C.vq)(l)&&!(0,C.eu)(l);){let e=(0,C.L9)(l),i=(0,C.sQ)(l);i||"fixed"!==e.position||(n=null),(r?!i&&!n:!i&&"static"===e.position&&!!n&&["absolute","fixed"].includes(n.position)||(0,C.ZU)(l)&&!i&&function t(e,i){let s=(0,C.$4)(e);return!(s===i||!(0,C.vq)(s)||(0,C.eu)(s))&&("fixed"===(0,C.L9)(s).position||t(s,i))}(t,l))?s=s.filter(t=>t!==l):n=e,l=(0,C.$4)(l)}return e.set(t,s),s}(e,this._c):[].concat(i),r],o=h[0],a=h.reduce((t,i)=>{let r=D(e,i,l);return t.top=n(r.top,t.top),t.right=s(r.right,t.right),t.bottom=s(r.bottom,t.bottom),t.left=n(r.left,t.left),t},D(e,o,l));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:R,getElementRects:$,getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){let{width:e,height:i}=_(t);return{width:e,height:i}},getScale:z,isElement:C.vq,isRTL:function(t){return"rtl"===(0,C.L9)(t).direction}};function B(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function I(t,e,i,r){let h;void 0===r&&(r={});let{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:u="function"==typeof ResizeObserver,layoutShift:c="function"==typeof IntersectionObserver,animationFrame:d=!1}=r,f=k(t),m=o||a?[...f?(0,C.v9)(f):[],...(0,C.v9)(e)]:[];m.forEach(t=>{o&&t.addEventListener("scroll",i,{passive:!0}),a&&t.addEventListener("resize",i)});let p=f&&c?function(t,e){let i,r=null,h=(0,C.ep)(t);function o(){var t;clearTimeout(i),null==(t=r)||t.disconnect(),r=null}return!function a(u,c){void 0===u&&(u=!1),void 0===c&&(c=1),o();let d=t.getBoundingClientRect(),{left:f,top:m,width:p,height:v}=d;if(u||e(),!p||!v)return;let g=l(m),b=l(h.clientWidth-(f+p)),w={rootMargin:-g+"px "+-b+"px "+-l(h.clientHeight-(m+v))+"px "+-l(f)+"px",threshold:n(0,s(1,c))||1},y=!0;function x(e){let s=e[0].intersectionRatio;if(s!==c){if(!y)return a();s?a(!1,s):i=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==s||B(d,t.getBoundingClientRect())||a(),y=!1}try{r=new IntersectionObserver(x,{...w,root:h.ownerDocument})}catch(t){r=new IntersectionObserver(x,w)}r.observe(t)}(!0),o}(f,i):null,v=-1,g=null;u&&(g=new ResizeObserver(t=>{let[s]=t;s&&s.target===f&&g&&(g.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var t;null==(t=g)||t.observe(e)})),i()}),f&&!d&&g.observe(f),g.observe(e));let b=d?O(t):null;return d&&function e(){let s=O(t);b&&!B(b,s)&&i(),b=s,h=requestAnimationFrame(e)}(),i(),()=>{var t;m.forEach(t=>{o&&t.removeEventListener("scroll",i),a&&t.removeEventListener("resize",i)}),null==p||p(),null==(t=g)||t.disconnect(),g=null,d&&cancelAnimationFrame(h)}}let A=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var i,s;let{x:n,y:r,placement:l,middlewareData:h}=e,o=await S(e,t);return l===(null==(i=h.offset)?void 0:i.placement)&&null!=(s=h.arrow)&&s.alignmentOffset?{}:{x:n+o.x,y:r+o.y,data:{...o,placement:l}}}}},H=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var i,s,n,r,l,h;let{placement:o,middlewareData:a,rects:b,initialPlacement:w,platform:y,elements:x}=e,{mainAxis:S=!0,crossAxis:C=!0,fallbackPlacements:_,fallbackStrategy:k="bestFit",fallbackAxisSideDirection:z="none",flipAlignment:L=!0,...T}=u(t,e);if(null!=(i=a.arrow)&&i.alignmentOffset)return{};let O=c(o),E=m(w),P=c(w)===w,D=await (null==y.isRTL?void 0:y.isRTL(x.floating)),N=_||(P||!L?[g(w)]:function(t){let e=g(t);return[v(t),e,v(e)]}(w)),W="none"!==z;!_&&W&&N.push(...function(t,e,i,s){let n=d(t),r=function(t,e,i){let s=["left","right"],n=["right","left"];switch(t){case"top":case"bottom":if(i)return e?n:s;return e?s:n;case"left":case"right":return e?["top","bottom"]:["bottom","top"];default:return[]}}(c(t),"start"===i,s);return n&&(r=r.map(t=>t+"-"+n),e&&(r=r.concat(r.map(v)))),r}(w,L,z,D));let R=[w,...N],$=await M(e,T),F=[],B=(null==(s=a.flip)?void 0:s.overflows)||[];if(S&&F.push($[O]),C){let t=function(t,e,i){void 0===i&&(i=!1);let s=d(t),n=p(t),r=f(n),l="x"===n?s===(i?"end":"start")?"right":"left":"start"===s?"bottom":"top";return e.reference[r]>e.floating[r]&&(l=g(l)),[l,g(l)]}(o,b,D);F.push($[t[0]],$[t[1]])}if(B=[...B,{placement:o,overflows:F}],!F.every(t=>t<=0)){let t=((null==(n=a.flip)?void 0:n.index)||0)+1,e=R[t];if(e){let i="alignment"===C&&E!==m(e),s=(null==(l=B[0])?void 0:l.overflows[0])>0;if(!i||s)return{data:{index:t,overflows:B},reset:{placement:e}}}let i=null==(r=B.filter(t=>t.overflows[0]<=0).sort((t,e)=>t.overflows[1]-e.overflows[1])[0])?void 0:r.placement;if(!i)switch(k){case"bestFit":{let t=null==(h=B.filter(t=>{if(W){let e=m(t.placement);return e===E||"y"===e}return!0}).map(t=>[t.placement,t.overflows.filter(t=>t>0).reduce((t,e)=>t+e,0)]).sort((t,e)=>t[1]-e[1])[0])?void 0:h[0];t&&(i=t);break}case"initialPlacement":i=w}if(o!==i)return{reset:{placement:i}}}return{}}}},V=t=>({name:"arrow",options:t,async fn(e){let{x:i,y:r,placement:l,rects:h,platform:o,elements:a,middlewareData:c}=e,{element:m,padding:v=0}=u(t,e)||{};if(null==m)return{};let g=b(v),w={x:i,y:r},y=p(l),x=f(y),M=await o.getDimensions(m),S="y"===y,C=S?"clientHeight":"clientWidth",_=h.reference[x]+h.reference[y]-w[y]-h.floating[x],k=w[y]-h.reference[y],z=await (null==o.getOffsetParent?void 0:o.getOffsetParent(m)),L=z?z[C]:0;L&&await (null==o.isElement?void 0:o.isElement(z))||(L=a.floating[C]||h.floating[x]);let T=L/2-M[x]/2-1,O=s(g[S?"top":"left"],T),E=s(g[S?"bottom":"right"],T),P=L-M[x]-E,D=L/2-M[x]/2+(_/2-k/2),N=n(O,s(D,P)),W=!c.arrow&&null!=d(l)&&D!==N&&h.reference[x]/2-(D<O?O:E)-M[x]/2<0,R=W?D<O?D-O:D-P:0;return{[y]:w[y]+R,data:{[y]:N,centerOffset:D-N-R,...W&&{alignmentOffset:R}},reset:W}}}),Y=(t,e,i)=>{let s=new Map,n={platform:F,...i},r={...n.platform,_c:s};return x(t,e,{...n,platform:r})}},79466:(t,e,i)=>{"use strict";function s(t){var e=t.width,i=t.height;if(e<0)throw Error("Negative width is not allowed for Size");if(i<0)throw Error("Negative height is not allowed for Size");return{width:e,height:i}}function n(t,e){return t.width===e.width&&t.height===e.height}i.d(e,{R9:()=>sF});var r,l,h,o,a,u,c,d,f,m,p,v=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter(function(t){return t!==i})}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach(function(e){return e.next(t._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}(),g=function(){function t(t,e,i){var n;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=s({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null==(n=null==i?void 0:i.allowResizeObserver)||n,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw Error("Object is disposed");null==(t=this._canvasElementResizeObserver)||t.disconnect(),this._canvasElementResizeObserver=null,null==(e=this._devicePixelRatioObservable)||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return s({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=s(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(e){return e!==t})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(e){return e!==t})},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;n(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=s(this._transformBitmapSize(t,this._canvasElementClientSize)),r=n(this.bitmapSize,i)?null:i;(null!==e||null!==r)&&(null!==e&&null!==r&&n(e,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(e,r)))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(i,t,e)})},t.prototype._chooseAndInitObserver=function(){var t=this;if(!this._allowResizeObserver)return void this._initDevicePixelRatioObservable();new Promise(function(t){var e=new ResizeObserver(function(i){t(i.every(function(t){return"devicePixelContentBoxSize"in t})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=b(this._canvasElement);if(null===e)throw Error("No window is associated with the canvas");this._devicePixelRatioObservable=new v(e),this._devicePixelRatioObservable.subscribe(function(){return t._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){if(null!==this._canvasElement){var t,e,i=b(this._canvasElement);if(null!==i){var n,r,l=null!=(e=null==(t=this._devicePixelRatioObservable)?void 0:t.value)?e:i.devicePixelRatio,h=this._canvasElement.getClientRects(),o=void 0!==h[0]?(n=h[0],r=l,s({width:Math.round(n.left*r+n.width*r)-Math.round(n.left*r),height:Math.round(n.top*r+n.height*r)-Math.round(n.top*r)})):s({width:this._canvasElementClientSize.width*l,height:this._canvasElementClientSize.height*l});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(e){var i=e.find(function(e){return e.target===t._canvasElement});if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var n=i.devicePixelContentBoxSize[0],r=s({width:n.inlineSize,height:n.blockSize});t._suggestNewBitmapSize(r)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function b(t){return t.ownerDocument.defaultView}var w=function(){function t(t,e,i){if(0===e.width||0===e.height)throw TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function y(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var n=t.canvasElement.getContext("2d",e);return null===n?null:new w(n,i,s)}let x={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},M={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},S={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},C={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},_={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},k={color:"#26a69a",base:0},z={color:"#2196f3"},L={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};function T(t,e){let i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function O(t,e,i,s){t.beginPath();let n=t.lineWidth%2?.5:0;t.moveTo(i,e+n),t.lineTo(s,e+n),t.stroke()}function E(t,e){if(!t)throw Error("Assertion failed"+(e?": "+e:""))}function P(t){if(void 0===t)throw Error("Value is undefined");return t}function D(t){if(null===t)throw Error("Value is null");return t}function N(t){return D(P(t))}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"}(r||(r={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(l||(l={}));let W={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function R(t){return t<0?0:t>255?255:Math.round(t)||0}function $(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}let F=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,B=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,I=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,A=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function H(t){(t=t.toLowerCase())in W&&(t=W[t]);{let e=A.exec(t)||I.exec(t);if(e)return[R(parseInt(e[1],10)),R(parseInt(e[2],10)),R(parseInt(e[3],10)),$(e.length<5?1:parseFloat(e[4]))]}{let e=B.exec(t);if(e)return[R(parseInt(e[1],16)),R(parseInt(e[2],16)),R(parseInt(e[3],16)),1]}{let e=F.exec(t);if(e)return[R(17*parseInt(e[1],16)),R(17*parseInt(e[2],16)),R(17*parseInt(e[3],16)),1]}throw Error(`Cannot parse color: ${t}`)}function V(t){let e=H(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:.199*e[0]+.687*e[1]+.114*e[2]>160?"black":"white"}}class Y{constructor(){this.h=[]}l(t,e,i){this.h.push({o:t,_:e,u:!0===i})}v(t){let e=this.h.findIndex(e=>t===e.o);e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter(e=>e._!==t)}m(t,e,i){let s=[...this.h];this.h=this.h.filter(t=>!t.u),s.forEach(s=>s.o(t,e,i))}M(){return this.h.length>0}S(){this.h=[]}}function j(t,...e){for(let i of e)for(let e in i)void 0!==i[e]&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:j(t[e],i[e]));return t}function U(t){return"number"==typeof t&&isFinite(t)}function q(t){return"number"==typeof t&&t%1==0}function G(t){return"string"==typeof t}function J(t){return"boolean"==typeof t}function Z(t){let e,i,s;if(!t||"object"!=typeof t)return t;for(i in e=Array.isArray(t)?[]:{},t)t.hasOwnProperty(i)&&(s=t[i],e[i]=s&&"object"==typeof s?Z(s):s);return e}function X(t){return null!==t}function K(t){return null===t?void 0:t}let Q="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function tt(t,e,i){return void 0===e&&(e=Q),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class te{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",B:0,V:0,I:0,L:0,N:0},this.F=t}W(){let t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=tt(e,i),t.L=2.5/12*e,t.B=t.L,t.V=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class ti{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach(s=>{s.K(t,e,i)})}}class ts{K(t,e,i){t.useBitmapCoordinateSpace(t=>this.Z(t,e,i))}}class tn extends ts{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.G||null===this.G.tt)return;let s=this.G.tt,n=this.G,r=Math.max(1,Math.floor(e))%2/2,l=l=>{t.beginPath();for(let h=s.to-1;h>=s.from;--h){let s=n.it[h],o=Math.round(s.nt*e)+r,a=s.st*i,u=l*i+r;t.moveTo(o,a),t.arc(o,a,u,0,2*Math.PI)}t.fill()};n.et>0&&(t.fillStyle=n.rt,l(n.ht+n.et)),t.fillStyle=n.lt,l(n.ht)}}function tr(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}let tl={from:0,to:1};class th{constructor(t,e){this.ut=new ti,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.X(this.ct)}bt(t){let e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(tr),this.ct=this.dt.map(t=>{let e=new tn;return e.J(t),e}),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){let t=2===this.vt.W().mode,e=this.F.wt(),i=this.vt.xt(),s=this.F.St();e.forEach((e,n)=>{var r;let l=this.dt[n],h=e.kt(i);if(t||null===h||!e.yt())return void(l.tt=null);let o=D(e.Ct());l.lt=h.Tt,l.ht=h.ht,l.et=h.Pt,l.it[0]._t=h._t,l.it[0].st=e.Dt().Rt(h._t,o.Ot),l.rt=null!=(r=h.At)?r:this.F.Bt(l.it[0].st/e.Dt().Vt()),l.it[0].ot=i,l.it[0].nt=s.It(i),l.tt=tl})}}class to extends ts{constructor(t){super(),this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;let n=this.zt.Lt.yt,r=this.zt.Et.yt;if(!n&&!r)return;let l=Math.round(this.zt.nt*i),h=Math.round(this.zt.st*s);t.lineCap="butt",n&&l>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.O,t.fillStyle=this.zt.Lt.O,T(t,this.zt.Lt.Nt),function(t,e,i,s){t.beginPath();let n=t.lineWidth%2?.5:0;t.moveTo(e+n,0),t.lineTo(e+n,s),t.stroke()}(t,l,0,e.height)),r&&h>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*s),t.strokeStyle=this.zt.Et.O,t.fillStyle=this.zt.Et.O,T(t,this.zt.Et.Nt),O(t,h,0,e.width))}}class ta{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new to(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let t=this.jt.yt(),e=D(this.jt.Ht()),i=e.$t().W().crosshair,s=this.Ft;if(2===i.mode)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=t&&this.jt.Ut(e),s.Lt.yt=t&&this.jt.qt(),s.Et.et=i.horzLine.width,s.Et.Nt=i.horzLine.style,s.Et.O=i.horzLine.color,s.Lt.et=i.vertLine.width,s.Lt.Nt=i.vertLine.style,s.Lt.O=i.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Xt()}}function tu(t,e,i,s,n,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(e,i,s,n),t.restore()}function tc(t,e,i,s,n,r){t.beginPath(),t.roundRect?t.roundRect(e,i,s,n,r):(t.lineTo(e+s-r[1],i),0!==r[1]&&t.arcTo(e+s,i,e+s,i+r[1],r[1]),t.lineTo(e+s,i+n-r[2]),0!==r[2]&&t.arcTo(e+s,i+n,e+s-r[2],i+n,r[2]),t.lineTo(e+r[3],i+n),0!==r[3]&&t.arcTo(e,i+n,e,i+n-r[3],r[3]),t.lineTo(e,i+r[0]),0!==r[0]&&t.arcTo(e,i,e+r[0],i,r[0]))}function td(t,e,i,s,n,r,l=0,h=[0,0,0,0],o=""){var a;if(t.save(),!l||!o||o===r)return tc(t,e,i,s,n,h),t.fillStyle=r,t.fill(),void t.restore();let u=l/2;tc(t,e+u,i+u,s-l,n-l,(a=-u,h.map(t=>0===t?t:t+a))),"transparent"!==r&&(t.fillStyle=r,t.fill()),"transparent"!==o&&(t.lineWidth=l,t.strokeStyle=o,t.closePath(),t.stroke()),t.restore()}function tf(t,e,i,s,n,r,l){t.save(),t.globalCompositeOperation="copy";let h=t.createLinearGradient(0,0,0,n);h.addColorStop(0,r),h.addColorStop(1,l),t.fillStyle=h,t.fillRect(e,i,s,n),t.restore()}class tm{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Kt=e}Vt(t,e){return this.zt.yt?t.P+t.L+t.B:0}K(t,e,i,s){if(!this.zt.yt||0===this.zt.Zt.length)return;let n=this.zt.O,r=this.Kt.t,l=t.useBitmapCoordinateSpace(t=>{let l=t.context;l.font=e.R;let h=this.Gt(t,e,i,s),o=h.Jt,a=(t,e)=>{h.Qt?td(l,o.ti,o.ii,o.ni,o.si,t,o.ei,[o.ht,0,0,o.ht],e):td(l,o.ri,o.ii,o.ni,o.si,t,o.ei,[0,o.ht,o.ht,0],e)};return a(r,"transparent"),this.zt.hi&&(l.fillStyle=n,l.fillRect(o.ri,o.li,o.ai-o.ri,o.oi)),a("transparent",r),this.zt._i&&(l.fillStyle=e.A,l.fillRect(h.Qt?o.ui-o.ei:0,o.ii,o.ei,o.ci-o.ii)),h});t.useMediaCoordinateSpace(({context:t})=>{let i=l.di;t.font=e.R,t.textAlign=l.Qt?"right":"left",t.textBaseline="middle",t.fillStyle=n,t.fillText(this.zt.Zt,i.fi,(i.ii+i.ci)/2+i.pi)})}Gt(t,e,i,s){var n;let r,l,h,{context:o,bitmapSize:a,mediaSize:u,horizontalPixelRatio:c,verticalPixelRatio:d}=t,f=this.zt.hi||!this.zt.mi?e.T:0,m=this.zt.bi?e.C:0,p=e.L+this.Kt.wi,v=e.B+this.Kt.gi,g=e.V,b=e.I,w=this.zt.Zt,y=e.P,x=i.Mi(o,w),M=Math.ceil(i.xi(o,w)),S=e.C+g+b+M+f,C=Math.max(1,Math.floor(d)),_=Math.round((y+p+v)*d);_%2!=C%2&&(_+=1);let k=m>0?Math.max(1,Math.floor(m*c)):0,z=Math.round(S*c),L=Math.round(f*c),T=Math.round((null!=(n=this.Kt.Si)?n:this.Kt.ki)*d)-Math.floor(.5*d),O=Math.floor(T+C/2-_/2),E=O+_,P="right"===s,D=P?u.width-m:m,N=P?a.width-k:k;return P?(r=N-z,l=N-L,h=D-f-g-m):(r=N+z,l=N+L,h=D+f+g),{Qt:P,Jt:{ii:O,li:T,ci:E,ni:z,si:_,ht:2*c,ei:k,ti:r,ri:N,ai:l,oi:C,ui:a.width},di:{ii:O/d,ci:E/d,fi:h,pi:x}}}}class tp{constructor(t){this.yi={ki:0,t:"#000",gi:0,wi:0},this.Ci={Zt:"",yt:!1,hi:!0,mi:!1,At:"",O:"#FFF",_i:!1,bi:!1},this.Ti={Zt:"",yt:!1,hi:!1,mi:!0,At:"",O:"#FFF",_i:!0,bi:!0},this.ft=!0,this.Pi=new(t||tm)(this.Ci,this.yi),this.Ri=new(t||tm)(this.Ti,this.yi)}Zt(){return this.Di(),this.Ci.Zt}ki(){return this.Di(),this.yi.ki}bt(){this.ft=!0}Vt(t,e=!1){return Math.max(this.Pi.Vt(t,e),this.Ri.Vt(t,e))}Oi(){return this.yi.Si||0}Ai(t){this.yi.Si=t}Bi(){return this.Di(),this.Ci.yt||this.Ti.yt}Vi(){return this.Di(),this.Ci.yt}gt(t){return this.Di(),this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.hi=this.Ti.hi&&t.W().ticksVisible,this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Pi}Ii(){return this.Di(),this.Pi.J(this.Ci,this.yi),this.Ri.J(this.Ti,this.yi),this.Ri}Di(){this.ft&&(this.Ci.hi=!0,this.Ti.hi=!1,this.zi(this.Ci,this.Ti,this.yi))}}class tv extends tp{constructor(t,e,i){super(),this.jt=t,this.Li=e,this.Ei=i}zi(t,e,i){if(t.yt=!1,2===this.jt.W().mode)return;let s=this.jt.W().horzLine;if(!s.labelVisible)return;let n=this.Li.Ct();if(!this.jt.yt()||this.Li.Ni()||null===n)return;let r=V(s.labelBackgroundColor);i.t=r.t,t.O=r.i;let l=2/12*this.Li.P();i.wi=l,i.gi=l;let h=this.Ei(this.Li);i.ki=h.ki,t.Zt=this.Li.Fi(h._t,n),t.yt=!0}}let tg=/[1-9]/g;class tb{constructor(){this.zt=null}J(t){this.zt=t}K(t,e){if(null===this.zt||!1===this.zt.yt||0===this.zt.Zt.length)return;let i=t.useMediaCoordinateSpace(({context:t})=>(t.font=e.R,Math.round(e.Wi.xi(t,D(this.zt).Zt,tg))));if(i<=0)return;let s=e.ji,n=i+2*s,r=n/2,l=this.zt.Hi,h=this.zt.ki,o=Math.floor(h-r)+.5;o<0?(h+=Math.abs(0-o),o=Math.floor(h-r)+.5):o+n>l&&(h-=Math.abs(l-(o+n)),o=Math.floor(h-r)+.5);let a=o+n,u=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{let n=D(this.zt);t.fillStyle=n.t;let r=Math.round(o*i),l=Math.round(0*s),h=Math.round(a*i),c=Math.round(u*s),d=Math.round(2*i);if(t.beginPath(),t.moveTo(r,l),t.lineTo(r,c-d),t.arcTo(r,c,r+d,c,d),t.lineTo(h-d,c),t.arcTo(h,c,h,c-d,d),t.lineTo(h,l),t.fill(),n.hi){let r=Math.round(n.ki*i),h=Math.round((l+e.T)*s);t.fillStyle=n.O;let o=Math.max(1,Math.floor(i)),a=Math.floor(.5*i);t.fillRect(r-a,l,o,h-l)}}),t.useMediaCoordinateSpace(({context:t})=>{let i=D(this.zt),n=0+e.C+e.T+e.L+e.P/2;t.font=e.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.O;let r=e.Wi.Mi(t,"Apr0");t.translate(o+s,n+r),t.fillText(i.Zt,0,0)})}}class tw{constructor(t,e,i){this.ft=!0,this.Wt=new tb,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",Hi:0,ki:NaN,hi:!0},this.vt=t,this.$i=e,this.Ei=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){let t=this.Ft;if(t.yt=!1,2===this.vt.W().mode)return;let e=this.vt.W().vertLine;if(!e.labelVisible)return;let i=this.$i.St();if(i.Ni())return;t.Hi=i.Hi();let s=this.Ei();if(null===s)return;t.ki=s.ki;let n=i.Ui(this.vt.xt());t.Zt=i.qi(D(n)),t.yt=!0;let r=V(e.labelBackgroundColor);t.t=r.t,t.O=r.i,t.hi=i.W().ticksVisible}}class ty{constructor(){this.Yi=null,this.Xi=0}Ki(){return this.Xi}Zi(t){this.Xi=t}Dt(){return this.Yi}Gi(t){this.Yi=t}Ji(t){return[]}Qi(){return[]}yt(){return!0}}!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(h||(h={}));class tx extends ty{constructor(t,e){let i,s,n,r;super(),this.tn=null,this.nn=NaN,this.sn=0,this.en=!0,this.rn=new Map,this.hn=!1,this.ln=NaN,this.an=NaN,this._n=NaN,this.un=NaN,this.$i=t,this.cn=e,this.dn=new th(t,this),this.fn=(i=()=>this.nn,s=()=>this.an,t=>{let e=s(),n=i();if(t===D(this.tn).vn())return{_t:n,ki:e};{let i=D(t.Ct());return{_t:t.pn(e,i),ki:e}}});let l=(n=()=>this.sn,r=()=>this.Yt(),()=>{let t=this.$i.St().mn(n()),e=r();return t&&Number.isFinite(e)?{ot:t,ki:e}:null});this.bn=new tw(this,t,l),this.wn=new ta(this)}W(){return this.cn}gn(t,e){this._n=t,this.un=e}Mn(){this._n=NaN,this.un=NaN}xn(){return this._n}Sn(){return this.un}kn(t,e,i){this.hn||(this.hn=!0),this.en=!0,this.yn(t,e,i)}xt(){return this.sn}Yt(){return this.ln}Xt(){return this.an}yt(){return this.en}Cn(){this.en=!1,this.Tn(),this.nn=NaN,this.ln=NaN,this.an=NaN,this.tn=null,this.Mn()}Pn(t){return null!==this.tn?[this.wn,this.dn]:[]}Ut(t){return t===this.tn&&this.cn.horzLine.visible}qt(){return this.cn.vertLine.visible}Rn(t,e){this.en&&this.tn===t||this.rn.clear();let i=[];return this.tn===t&&i.push(this.Dn(this.rn,e,this.fn)),i}Qi(){return this.en?[this.bn]:[]}Ht(){return this.tn}On(){this.wn.bt(),this.rn.forEach(t=>t.bt()),this.bn.bt(),this.dn.bt()}An(t){return t&&!t.vn().Ni()?t.vn():null}yn(t,e,i){this.Bn(t,e,i)&&this.On()}Bn(t,e,i){let s=this.ln,n=this.an,r=this.nn,l=this.sn,h=this.tn,o=this.An(i);this.sn=t,this.ln=isNaN(t)?NaN:this.$i.St().It(t),this.tn=i;let a=null!==o?o.Ct():null;return null!==o&&null!==a?(this.nn=e,this.an=o.Rt(e,a)):(this.nn=NaN,this.an=NaN),s!==this.ln||n!==this.an||l!==this.sn||r!==this.nn||h!==this.tn}Tn(){let t=this.$i.wt().map(t=>t.In().Vn()).filter(X),e=0===t.length?null:Math.max(...t);this.sn=null!==e?e:NaN}Dn(t,e,i){let s=t.get(e);return void 0===s&&(s=new tv(this,e,i),t.set(e,s)),s}}function tM(t){return"left"===t||"right"===t}class tS{constructor(t){this.zn=new Map,this.Ln=[],this.En=t}Nn(t,e){var i;let s=(i=this.zn.get(t),void 0===i?e:{Fn:Math.max(i.Fn,e.Fn),Wn:i.Wn||e.Wn});this.zn.set(t,s)}jn(){return this.En}Hn(t){let e=this.zn.get(t);return void 0===e?{Fn:this.En}:{Fn:Math.max(this.En,e.Fn),Wn:e.Wn}}$n(){this.Un(),this.Ln=[{qn:0}]}Yn(t){this.Un(),this.Ln=[{qn:1,Ot:t}]}Xn(t){this.Kn(),this.Ln.push({qn:5,Ot:t})}Un(){this.Kn(),this.Ln.push({qn:6})}Zn(){this.Un(),this.Ln=[{qn:4}]}Gn(t){this.Un(),this.Ln.push({qn:2,Ot:t})}Jn(t){this.Un(),this.Ln.push({qn:3,Ot:t})}Qn(){return this.Ln}ts(t){for(let e of t.Ln)this.ns(e);this.En=Math.max(this.En,t.En),t.zn.forEach((t,e)=>{this.Nn(e,t)})}static ss(){return new tS(2)}static es(){return new tS(3)}ns(t){switch(t.qn){case 0:this.$n();break;case 1:this.Yn(t.Ot);break;case 2:this.Gn(t.Ot);break;case 3:this.Jn(t.Ot);break;case 4:this.Zn();break;case 5:this.Xn(t.Ot);break;case 6:this.Kn()}}Kn(){let t=this.Ln.findIndex(t=>5===t.qn);-1!==t&&this.Ln.splice(t,1)}}function tC(t,e){if(!U(t))return"n/a";if(!q(e)||e<0||e>16)throw TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class t_{constructor(t,e){if(e||(e=1),U(t)&&q(t)||(t=100),t<0)throw TypeError("invalid base");this.Li=t,this.rs=e,this.hs()}format(t){let e=t<0?"":"";return t=Math.abs(t),e+this.ls(t)}hs(){if(this.os=0,this.Li>0&&this.rs>0){let t=this.Li;for(;t>1;)t/=10,this.os++}}ls(t){let e=this.Li/this.rs,i=Math.floor(t),s="",n=void 0!==this.os?this.os:NaN;if(e>1){let r=+(Math.round(t*e)-i*e).toFixed(this.os);r>=e&&(r-=e,i+=1),s="."+tC(r.toFixed(this.os)*this.rs,n)}else i=Math.round(i*e)/e,n>0&&(s="."+tC(0,n));return i.toFixed(0)+s}}class tk extends t_{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class tz{constructor(t){this._s=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.us(t):t<999995?e+this.us(t/1e3)+"K":t<0x3b9ac9fb?(t=1e3*Math.round(t/1e3),e+this.us(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.us(t/1e9)+"B")}us(t){let e=Math.pow(10,this._s);return((t=Math.round(t*e)/e)>=1e-15&&t<1?t.toFixed(this._s).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(t,e)=>e)}}function tL(t,e,i,s,n,r,l){if(0===e.length||s.from>=e.length||s.to<=0)return;let{context:h,horizontalPixelRatio:o,verticalPixelRatio:a}=t,u=e[s.from],c=r(t,u),d=u;if(s.to-s.from<2){let e=n/2;h.beginPath();let i={nt:u.nt-e,st:u.st},s={nt:u.nt+e,st:u.st};h.moveTo(i.nt*o,i.st*a),h.lineTo(s.nt*o,s.st*a),l(t,c,i,s)}else{let n=(e,i)=>{l(t,c,d,i),h.beginPath(),c=e,d=i},f=d;h.beginPath(),h.moveTo(u.nt*o,u.st*a);for(let l=s.from+1;l<s.to;++l){let s=r(t,f=e[l]);switch(i){case 0:h.lineTo(f.nt*o,f.st*a);break;case 1:h.lineTo(f.nt*o,e[l-1].st*a),s!==c&&(n(s,f),h.lineTo(f.nt*o,e[l-1].st*a)),h.lineTo(f.nt*o,f.st*a);break;case 2:{let[t,i]=function(t,e,i){var s,n;let r=Math.max(0,e-1),l=Math.min(t.length-1,i+1);return[(s=t[e],n=tO(tT(t[i],t[r]),6),{nt:s.nt+n.nt,st:s.st+n.st}),tT(t[i],tO(tT(t[l],t[e]),6))]}(e,l-1,l);h.bezierCurveTo(t.nt*o,t.st*a,i.nt*o,i.st*a,f.nt*o,f.st*a)}}1!==i&&s!==c&&(n(s,f),h.moveTo(f.nt*o,f.st*a))}(d!==f||d===f&&1===i)&&l(t,c,d,f)}}function tT(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function tO(t,e){return{nt:t.nt/e,st:t.st/e}}function tE(t,e,i,s,n){let{context:r,horizontalPixelRatio:l,verticalPixelRatio:h}=e;r.lineTo(n.nt*l,t*h),r.lineTo(s.nt*l,t*h),r.closePath(),r.fillStyle=i,r.fill()}class tP extends ts{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){var e;if(null===this.G)return;let{it:i,tt:s,cs:n,et:r,Nt:l,ds:h}=this.G,o=null!=(e=this.G.fs)?e:this.G.vs?0:t.mediaSize.height;if(null===s)return;let a=t.context;a.lineCap="butt",a.lineJoin="round",a.lineWidth=r,T(a,l),a.lineWidth=1,tL(t,i,h,s,n,this.ps.bind(this),tE.bind(null,o))}}function tD(t,e,i){return Math.min(Math.max(t,e),i)}function tN(t){let e=Math.ceil(t);return e%2==0?e-1:e}class tW{bs(t,e){let i=this.ws,{gs:s,Ms:n,xs:r,Ss:l,ks:h,fs:o}=e;if(void 0===this.ys||void 0===i||i.gs!==s||i.Ms!==n||i.xs!==r||i.Ss!==l||i.fs!==o||i.ks!==h){let i=t.context.createLinearGradient(0,0,0,h);if(i.addColorStop(0,s),null!=o){let e=tD(o*t.verticalPixelRatio/h,0,1);i.addColorStop(e,n),i.addColorStop(e,r)}i.addColorStop(1,l),this.ys=i,this.ws=e}return this.ys}}class tR extends tP{constructor(){super(...arguments),this.Cs=new tW}ps(t,e){return this.Cs.bs(t,{gs:e.Ts,Ms:"",xs:"",Ss:e.Ps,ks:t.bitmapSize.height})}}function t$(t,e){let i=t.context;i.strokeStyle=e,i.stroke()}class tF extends ts{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){if(null===this.G)return;let{it:e,tt:i,cs:s,ds:n,et:r,Nt:l,Rs:h}=this.G;if(null===i)return;let o=t.context;o.lineCap="butt",o.lineWidth=r*t.verticalPixelRatio,T(o,l),o.lineJoin="round";let a=this.Ds.bind(this);void 0!==n&&tL(t,e,n,i,s,a,t$),h&&function(t,e,i,s,n){let{horizontalPixelRatio:r,verticalPixelRatio:l,context:h}=t,o=null,a=Math.max(1,Math.floor(r))%2/2,u=i*l+a;for(let i=s.to-1;i>=s.from;--i){let s=e[i];if(s){let e=n(t,s);e!==o&&(h.beginPath(),null!==o&&h.fill(),h.fillStyle=e,o=e);let i=Math.round(s.nt*r)+a,c=s.st*l;h.moveTo(i,c),h.arc(i,c,u,0,2*Math.PI)}}h.fill()}(t,e,h,i,a)}}class tB extends tF{Ds(t,e){return e.lt}}function tI(t,e,i,s,n=0,r=e.length){let l=r-n;for(;0<l;){let r=l>>1,h=n+r;s(e[h],i)===t?(n=h+1,l-=r+1):l=r}return n}let tA=tI.bind(null,!0),tH=tI.bind(null,!1);function tV(t,e){return t.ot<e}function tY(t,e){return e<t.ot}function tj(t,e,i){let s=e.Os(),n=e.ui(),r=tA(t,s,tV),l=tH(t,n,tY);if(!i)return{from:r,to:l};let h=r,o=l;return r>0&&r<t.length&&t[r].ot>=s&&(h=r-1),l>0&&l<t.length&&t[l-1].ot<=n&&(o=l+1),{from:h,to:o}}class tU{constructor(t,e,i){this.As=!0,this.Bs=!0,this.Vs=!0,this.Is=[],this.zs=null,this.Ls=t,this.Es=e,this.Ns=i}bt(t){this.As=!0,"data"===t&&(this.Bs=!0),"options"===t&&(this.Vs=!0)}gt(){return this.Ls.yt()?(this.Fs(),null===this.zs?null:this.Ws):null}js(){this.Is=this.Is.map(t=>Object.assign(Object.assign({},t),this.Ls.$s().Hs(t.ot)))}Us(){this.zs=null}Fs(){this.Bs&&(this.qs(),this.Bs=!1),this.Vs&&(this.js(),this.Vs=!1),this.As&&(this.Ys(),this.As=!1)}Ys(){let t=this.Ls.Dt(),e=this.Es.St();if(this.Us(),e.Ni()||t.Ni())return;let i=e.Xs();if(null===i||0===this.Ls.In().Ks())return;let s=this.Ls.Ct();null!==s&&(this.zs=tj(this.Is,i,this.Ns),this.Zs(t,e,s.Ot),this.Gs())}}class tq extends tU{constructor(t,e){super(t,e,!0)}Zs(t,e,i){e.Js(this.Is,K(this.zs)),t.Qs(this.Is,i,K(this.zs))}te(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}qs(){let t=this.Ls.$s();this.Is=this.Ls.In().ie().map(e=>{let i=e.Ot[3];return this.ne(e.se,i,t)})}}class tG extends tq{constructor(t,e){super(t,e),this.Ws=new ti,this.ee=new tR,this.re=new tB,this.Ws.X([this.ee,this.re])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){let t=this.Ls.W();this.ee.J({ds:t.lineType,it:this.Is,Nt:t.lineStyle,et:t.lineWidth,fs:null,vs:t.invertFilledArea,tt:this.zs,cs:this.Es.St().he()}),this.re.J({ds:t.lineVisible?t.lineType:void 0,it:this.Is,Nt:t.lineStyle,et:t.lineWidth,tt:this.zs,cs:this.Es.St().he(),Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class tJ extends ts{constructor(){super(...arguments),this.zt=null,this.le=0,this.ae=0}J(t){this.zt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;this.le=this.oe(e),this.le>=2&&Math.max(1,Math.floor(e))%2!=this.le%2&&this.le--,this.ae=this.zt._e?Math.min(this.le,Math.floor(e)):this.le;let s=null,n=this.ae<=this.le&&this.zt.he>=Math.floor(1.5*e);for(let r=this.zt.tt.from;r<this.zt.tt.to;++r){let l=this.zt.In[r];s!==l.ue&&(t.fillStyle=l.ue,s=l.ue);let h=Math.floor(.5*this.ae),o=Math.round(l.nt*e),a=o-h,u=this.ae,c=a+u-1,d=Math.min(l.ce,l.de),f=Math.max(l.ce,l.de),m=Math.round(d*i)-h,p=Math.max(Math.round(f*i)+h-m,this.ae);t.fillRect(a,m,u,p);let v=Math.ceil(1.5*this.le);if(n){if(this.zt.fe){let e=o-v,s=Math.max(m,Math.round(l.ve*i)-h),n=s+u-1;n>m+p-1&&(s=(n=m+p-1)-u+1),t.fillRect(e,s,a-e,n-s+1)}let e=o+v,s=Math.max(m,Math.round(l.pe*i)-h),n=s+u-1;n>m+p-1&&(s=(n=m+p-1)-u+1),t.fillRect(c+1,s,e-c,n-s+1)}}}oe(t){return Math.max(Math.floor(t),Math.floor(Math.floor(.3*D(this.zt).he*t)))}}class tZ extends tU{constructor(t,e){super(t,e,!1)}Zs(t,e,i){e.Js(this.Is,K(this.zs)),t.me(this.Is,i,K(this.zs))}be(t,e,i){return{ot:t,we:e.Ot[0],ge:e.Ot[1],Me:e.Ot[2],xe:e.Ot[3],nt:NaN,ve:NaN,ce:NaN,de:NaN,pe:NaN}}qs(){let t=this.Ls.$s();this.Is=this.Ls.In().ie().map(e=>this.ne(e.se,e,t))}}class tX extends tZ{constructor(){super(...arguments),this.Ws=new tJ}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){let t=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),fe:t.openVisible,_e:t.thinBars,tt:this.zs})}}class tK extends tP{constructor(){super(...arguments),this.Cs=new tW}ps(t,e){let i=this.G;return this.Cs.bs(t,{gs:e.Se,Ms:e.ke,xs:e.ye,Ss:e.Ce,ks:t.bitmapSize.height,fs:i.fs})}}class tQ extends tF{constructor(){super(...arguments),this.Te=new tW}Ds(t,e){let i=this.G;return this.Te.bs(t,{gs:e.Pe,Ms:e.Pe,xs:e.Re,Ss:e.Re,ks:t.bitmapSize.height,fs:i.fs})}}class t0 extends tq{constructor(t,e){super(t,e),this.Ws=new ti,this.De=new tK,this.Oe=new tQ,this.Ws.X([this.De,this.Oe])}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){let t=this.Ls.Ct();if(null===t)return;let e=this.Ls.W(),i=this.Ls.Dt().Rt(e.baseValue.price,t.Ot),s=this.Es.St().he();this.De.J({it:this.Is,et:e.lineWidth,Nt:e.lineStyle,ds:e.lineType,fs:i,vs:!1,tt:this.zs,cs:s}),this.Oe.J({it:this.Is,et:e.lineWidth,Nt:e.lineStyle,ds:e.lineVisible?e.lineType:void 0,Rs:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,fs:i,tt:this.zs,cs:s})}}class t1 extends ts{constructor(){super(...arguments),this.zt=null,this.le=0}J(t){this.zt=t}Z(t){if(null===this.zt||0===this.zt.In.length||null===this.zt.tt)return;let{horizontalPixelRatio:e}=t;this.le=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);let i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.min(Math.floor(t*i*e),Math.floor(t*e));return Math.max(Math.floor(e),s)}(this.zt.he,e),this.le>=2&&Math.floor(e)%2!=this.le%2&&this.le--;let i=this.zt.In;this.zt.Ae&&this.Be(t,i,this.zt.tt),this.zt._i&&this.Ve(t,i,this.zt.tt);let s=this.Ie(e);(!this.zt._i||this.le>2*s)&&this.ze(t,i,this.zt.tt)}Be(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,l="",h=Math.min(Math.floor(n),Math.floor(this.zt.he*n)),o=Math.floor(.5*(h=Math.max(Math.floor(n),Math.min(h,this.le)))),a=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.Le!==l&&(s.fillStyle=i.Le,l=i.Le);let u=Math.round(Math.min(i.ve,i.pe)*r),c=Math.round(Math.max(i.ve,i.pe)*r),d=Math.round(i.ce*r),f=Math.round(i.de*r),m=Math.round(n*i.nt)-o,p=m+h-1;null!==a&&(m=Math.min(m=Math.max(a+1,m),p));let v=p-m+1;s.fillRect(m,d,v,u-d),s.fillRect(m,c+1,v,f-c),a=p}}Ie(t){let e=Math.floor(+t);this.le<=2*e&&(e=Math.floor(.5*(this.le-1)));let i=Math.max(Math.floor(t),e);return this.le<=2*i?Math.max(Math.floor(t),Math.floor(+t)):i}Ve(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,l="",h=this.Ie(n),o=null;for(let t=i.from;t<i.to;t++){let i=e[t];i.Ee!==l&&(s.fillStyle=i.Ee,l=i.Ee);let d=Math.round(i.nt*n)-Math.floor(.5*this.le),f=d+this.le-1,m=Math.round(Math.min(i.ve,i.pe)*r),p=Math.round(Math.max(i.ve,i.pe)*r);if(null!==o&&(d=Math.min(d=Math.max(o+1,d),f)),this.zt.he*n>2*h){var a,u,c;a=d,u=f-d+1,c=p-m+1,s.fillRect(a+h,m,u-2*h,h),s.fillRect(a+h,m+c-h,u-2*h,h),s.fillRect(a,m,h,c),s.fillRect(a+u-h,m,h,c)}else{let t=f-d+1;s.fillRect(d,m,t,p-m+1)}o=f}}ze(t,e,i){if(null===this.zt)return;let{context:s,horizontalPixelRatio:n,verticalPixelRatio:r}=t,l="",h=this.Ie(n);for(let t=i.from;t<i.to;t++){let i=e[t],o=Math.round(Math.min(i.ve,i.pe)*r),a=Math.round(Math.max(i.ve,i.pe)*r),u=Math.round(i.nt*n)-Math.floor(.5*this.le),c=u+this.le-1;if(i.ue!==l){let t=i.ue;s.fillStyle=t,l=t}this.zt._i&&(u+=h,o+=h,c-=h,a-=h),o>a||s.fillRect(u,o,c-u+1,a-o+1)}}}class t2 extends tZ{constructor(){super(...arguments),this.Ws=new t1}ne(t,e,i){return Object.assign(Object.assign({},this.be(t,e,i)),i.Hs(t))}Gs(){let t=this.Ls.W();this.Ws.J({In:this.Is,he:this.Es.St().he(),Ae:t.wickVisible,_i:t.borderVisible,tt:this.zs})}}class t3{constructor(t,e){this.Ne=t,this.Li=e}K(t,e,i){this.Ne.draw(t,this.Li,e,i)}}class t4 extends tU{constructor(t,e,i){super(t,e,!1),this.wn=i,this.Ws=new t3(this.wn.renderer(),e=>{let i=t.Ct();return null===i?null:t.Dt().Rt(e,i.Ot)})}Fe(t){return this.wn.priceValueBuilder(t)}We(t){return this.wn.isWhitespace(t)}qs(){let t=this.Ls.$s();this.Is=this.Ls.In().ie().map(e=>Object.assign(Object.assign({ot:e.se,nt:NaN},t.Hs(e.se)),{je:e.He}))}Zs(t,e){e.Js(this.Is,K(this.zs))}Gs(){this.wn.update({bars:this.Is.map(t5),barSpacing:this.Es.St().he(),visibleRange:this.zs},this.Ls.W())}}function t5(t){return{x:t.nt,time:t.ot,originalData:t.je,barColor:t.ue}}class t9 extends ts{constructor(){super(...arguments),this.zt=null,this.$e=[]}J(t){this.zt=t,this.$e=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.$e.length||this.Ue(e);let s=Math.max(1,Math.floor(i)),n=Math.round(this.zt.qe*i)-Math.floor(s/2),r=n+s;for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let l,h,o=this.zt.it[e],a=this.$e[e-this.zt.tt.from],u=Math.round(o.st*i);t.fillStyle=o.ue,u<=n?(l=u,h=r):(l=n,h=u-Math.floor(s/2)+s),t.fillRect(a.Os,l,a.ui-a.Os+1,h-l)}}Ue(t){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.$e=[]);let e=1>=Math.ceil(this.zt.he*t)?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.he*t)-e;this.$e=Array(this.zt.tt.to-this.zt.tt.from);for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){let s,n,r=this.zt.it[e],l=Math.round(r.nt*t);if(i%2){let t=(i-1)/2;s=l-t,n=l+t}else{let t=i/2;s=l-t,n=l+t-1}this.$e[e-this.zt.tt.from]={Os:s,ui:n,Ye:l,Xe:r.nt*t,ot:r.ot}}for(let t=this.zt.tt.from+1;t<this.zt.tt.to;t++){let i=this.$e[t-this.zt.tt.from],s=this.$e[t-this.zt.tt.from-1];i.ot===s.ot+1&&i.Os-s.ui!==e+1&&(s.Ye>s.Xe?s.ui=i.Os-e-1:i.Os=s.ui+e+1)}let s=Math.ceil(this.zt.he*t);for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){let e=this.$e[t-this.zt.tt.from];e.ui<e.Os&&(e.ui=e.Os),s=Math.min(e.ui-e.Os+1,s)}if(e>0&&s<4)for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){let e=this.$e[t-this.zt.tt.from];e.ui-e.Os+1>s&&(e.Ye>e.Xe?e.ui-=1:e.Os+=1)}}}class t8 extends tq{constructor(){super(...arguments),this.Ws=new t9}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){let t={it:this.Is,he:this.Es.St().he(),tt:this.zs,qe:this.Ls.Dt().Rt(this.Ls.W().base,D(this.Ls.Ct()).Ot)};this.Ws.J(t)}}class t7 extends tq{constructor(){super(...arguments),this.Ws=new tB}ne(t,e,i){return Object.assign(Object.assign({},this.te(t,e)),i.Hs(t))}Gs(){let t=this.Ls.W(),e={it:this.Is,Nt:t.lineStyle,ds:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Rs:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.zs,cs:this.Es.St().he()};this.Ws.J(e)}}let t6=/[2-9]/g;class et{constructor(t=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Je={},this.Qe=new Map,this.tr=t}ir(){this.Ke=0,this.Qe.clear(),this.Ze=1,this.Ge=1,this.Je={}}xi(t,e,i){return this.nr(t,e,i).width}Mi(t,e,i){let s=this.nr(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}nr(t,e,i){let s=String(e).replace(i||t6,"0");if(this.Qe.has(s))return P(this.Qe.get(s)).sr;if(this.Ke===this.tr){let t=this.Je[this.Ge];delete this.Je[this.Ge],this.Qe.delete(t),this.Ge++,this.Ke--}t.save(),t.textBaseline="middle";let n=t.measureText(s);return t.restore(),0===n.width&&e.length||(this.Qe.set(s,{sr:n,er:this.Ze}),this.Je[this.Ze]=s,this.Ke++,this.Ze++),n}}class ee{constructor(t){this.rr=null,this.k=null,this.hr="right",this.lr=t}ar(t,e,i){this.rr=t,this.k=e,this.hr=i}K(t){null!==this.k&&null!==this.rr&&this.rr.K(t,this.k,this.lr,this.hr)}}class ei{constructor(t,e,i){this._r=t,this.lr=new et(50),this.ur=e,this.F=i,this.j=-1,this.Wt=new ee(this.lr)}gt(){let t=this.F.cr(this.ur);if(null===t)return null;let e=t.dr(this.ur)?t.vr():this.ur.Dt();if(null===e)return null;let i=t.pr(e);if("overlay"===i)return null;let s=this.F.mr();return s.P!==this.j&&(this.j=s.P,this.lr.ir()),this.Wt.ar(this._r.Ii(),s,i),this.Wt}}class es extends ts{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}br(t,e){var i;if(!(null==(i=this.zt)?void 0:i.yt))return null;let{st:s,et:n,wr:r}=this.zt;return e>=s-n-7&&e<=s+n+7?{gr:this.zt,wr:r}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt||!1===this.zt.yt)return;let n=Math.round(this.zt.st*s);n<0||n>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.O,t.lineWidth=Math.floor(this.zt.et*i),T(t,this.zt.Nt),O(t,n,0,e.width))}}class en{constructor(t){this.Mr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.Sr=new es,this.ft=!0,this.Ls=t,this.Es=t.$t(),this.Sr.J(this.Mr)}bt(){this.ft=!0}gt(){return this.Ls.yt()?(this.ft&&(this.kr(),this.ft=!1),this.Sr):null}}class er extends en{constructor(t){super(t)}kr(){this.Mr.yt=!1;let t=this.Ls.Dt(),e=t.yr().yr;if(2!==e&&3!==e)return;let i=this.Ls.W();if(!i.baseLineVisible||!this.Ls.yt())return;let s=this.Ls.Ct();null!==s&&(this.Mr.yt=!0,this.Mr.st=t.Rt(s.Ot,s.Ot),this.Mr.O=i.baseLineColor,this.Mr.et=i.baseLineWidth,this.Mr.Nt=i.baseLineStyle)}}class el extends ts{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}He(){return this.zt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){let s=this.zt;if(null===s)return;let n=Math.max(1,Math.floor(e)),r=n%2/2,l=Math.round(s.Xe.x*e)+r,h=s.Xe.y*i;t.fillStyle=s.Cr,t.beginPath();let o=Math.max(2,1.5*s.Tr)*e;t.arc(l,h,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Pr,t.beginPath(),t.arc(l,h,s.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=n,t.strokeStyle=s.Rr,t.beginPath(),t.arc(l,h,s.ht*e+n/2,0,2*Math.PI,!1),t.stroke()}}let eh=[{Dr:0,Or:.25,Ar:4,Br:10,Vr:.25,Ir:0,zr:.4,Lr:.8},{Dr:.25,Or:.525,Ar:10,Br:14,Vr:0,Ir:0,zr:.8,Lr:0},{Dr:.525,Or:1,Ar:14,Br:14,Vr:0,Ir:0,zr:0,Lr:0}];function eo(t,e,i,s){if("transparent"===t)return t;let n=H(t),r=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${(i+(s-i)*e)*r})`}function ea(t,e){var i;let s,n=t%2600/2600;for(let t of eh)if(n>=t.Dr&&n<=t.Or){s=t;break}E(void 0!==s,"Last price animation internal logic error");let r=(n-s.Dr)/(s.Or-s.Dr);return{Pr:eo(e,r,s.Vr,s.Ir),Rr:eo(e,r,s.zr,s.Lr),ht:(i=s.Ar)+(s.Br-i)*r}}class eu{constructor(t){this.Wt=new el,this.ft=!0,this.Er=!0,this.Nr=performance.now(),this.Fr=this.Nr-1,this.Wr=t}jr(){this.Fr=this.Nr-1,this.bt()}Hr(){if(this.bt(),2===this.Wr.W().lastPriceAnimation){let t=performance.now(),e=this.Fr-t;if(e>0)return void(e<650&&(this.Fr+=2600));this.Nr=t,this.Fr=t+2600}}bt(){this.ft=!0}$r(){this.Er=!0}yt(){return 0!==this.Wr.W().lastPriceAnimation}Ur(){switch(this.Wr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Fr}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.Er=!1):this.Er&&(this.qr(),this.Er=!1),this.Wt}Mt(){this.Wt.J(null);let t=this.Wr.$t().St(),e=t.Xs(),i=this.Wr.Ct();if(null===e||null===i)return;let s=this.Wr.Yr(!0);if(s.Xr||!e.Kr(s.se))return;let n={x:t.It(s.se),y:this.Wr.Dt().Rt(s._t,i.Ot)},r=s.O,l=this.Wr.W().lineWidth,h=ea(this.Zr(),r);this.Wt.J({Cr:r,Tr:l,Pr:h.Pr,Rr:h.Rr,ht:h.ht,Xe:n})}qr(){let t=this.Wt.He();if(null!==t){let e=ea(this.Zr(),t.Cr);t.Pr=e.Pr,t.Rr=e.Rr,t.ht=e.ht}}Zr(){return this.Ur()?performance.now()-this.Nr:2599}}function ec(t,e){return tN(Math.min(Math.max(t,12),30)*e)}function ed(t,e){switch(t){case"arrowDown":case"arrowUp":return ec(e,1);case"circle":return ec(e,.8);case"square":return ec(e,.7)}}function ef(t){let e=Math.ceil(ec(t,1));return e%2!=0?e-1:e}function em(t){return Math.max(ec(t,.1),3)}function ep(t,e,i){return e?t:i?Math.ceil(t/2):0}function ev(t,e,i,s,n){let r=ed("square",i),l=(r-1)/2,h=t-l,o=e-l;return s>=h&&s<=h+r&&n>=o&&n<=o+r}function eg(t,e,i,s){let n=(ed("arrowUp",s)-1)/2*i.Gr,r=(tN(s/2)-1)/2*i.Gr;e.beginPath(),t?(e.moveTo(i.nt-n,i.st),e.lineTo(i.nt,i.st-n),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st+n),e.lineTo(i.nt-r,i.st+n)):(e.moveTo(i.nt-n,i.st),e.lineTo(i.nt,i.st+n),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+r,i.st-n),e.lineTo(i.nt-r,i.st-n)),e.lineTo(i.nt-r,i.st),e.fill()}class eb extends ts{constructor(){super(...arguments),this.zt=null,this.lr=new et,this.j=-1,this.H="",this.Jr=""}J(t){this.zt=t}ar(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Jr=tt(t,e),this.lr.ir())}br(t,e){if(null===this.zt||null===this.zt.tt)return null;for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){var i,s,n;let l=this.zt.it[r];if(i=l,s=t,n=e,!(void 0===i.Zt||!function(t,e,i,s,n,r){let l=s/2;return n>=t&&n<=t+i&&r>=e-l&&r<=e+l}(i.Zt.nt,i.Zt.st,i.Zt.Hi,i.Zt.Vt,s,n))||function(t,e,i){if(0===t.Ks)return!1;switch(t.ih){case"arrowDown":case"arrowUp":var s,n;return s=t.nt,n=t.st,ev(s,n,t.Ks,e,i);case"circle":return function(t,e,i,s,n){let r=2+ed("circle",i)/2,l=t-s,h=e-n;return Math.sqrt(l*l+h*h)<=r}(t.nt,t.st,t.Ks,e,i);case"square":return ev(t.nt,t.st,t.Ks,e,i)}}(i,s,n))return{gr:l.Qr,wr:l.wr}}return null}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},s,n){if(null!==this.zt&&null!==this.zt.tt){t.textBaseline="middle",t.font=this.Jr;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){let n=this.zt.it[s];void 0!==n.Zt&&(n.Zt.Hi=this.lr.xi(t,n.Zt.th),n.Zt.Vt=this.j,n.Zt.nt=n.nt-n.Zt.Hi/2),function(t,e,i,s){var n,r,l;e.fillStyle=t.O,void 0!==t.Zt&&(n=t.Zt.th,r=t.Zt.nt,l=t.Zt.st,e.save(),e.scale(i,s),e.fillText(n,r,l),e.restore()),function(t,e,i){if(0!==t.Ks){switch(t.ih){case"arrowDown":return eg(!1,e,i,t.Ks);case"arrowUp":return eg(!0,e,i,t.Ks);case"circle":let s=(ed("circle",t.Ks)-1)/2;e.beginPath(),e.arc(i.nt,i.st,s*i.Gr,0,2*Math.PI,!1),e.fill();return;case"square":return function(t,e,i){let s=ed("square",i),n=(s-1)*e.Gr/2,r=e.nt-n,l=e.st-n;t.fillRect(r,l,s*e.Gr,s*e.Gr)}(e,i,t.Ks)}t.ih}}(t,e,function(t,e,i){let s=Math.max(1,Math.floor(e))%2/2;return{nt:Math.round(t.nt*e)+s,st:t.st*i,Gr:e}}(t,i,s))}(n,t,e,i)}}}}class ew{constructor(t,e){this.ft=!0,this.eh=!0,this.rh=!0,this.hh=null,this.ah=null,this.Wt=new eb,this.Wr=t,this.$i=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.rh=!0,"data"===t&&(this.eh=!0,this.ah=null)}gt(t){if(!this.Wr.yt())return null;this.ft&&this.oh();let e=this.$i.W().layout;return this.Wt.ar(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}_h(){if(this.rh){if(this.Wr.uh().length>0){let t=this.$i.St().he(),e=em(t),i=1.5*ef(t)+2*e,s=this.dh();this.hh={above:ep(i,s.aboveBar,s.inBar),below:ep(i,s.belowBar,s.inBar)}}else this.hh=null;this.rh=!1}return this.hh}dh(){return null===this.ah&&(this.ah=this.Wr.uh().reduce((t,e)=>(t[e.position]||(t[e.position]=!0),t),{inBar:!1,aboveBar:!1,belowBar:!1})),this.ah}oh(){let t=this.Wr.Dt(),e=this.$i.St(),i=this.Wr.uh();this.eh&&(this.zt.it=i.map(t=>({ot:t.time,nt:0,st:0,Ks:0,ih:t.shape,O:t.color,Qr:t.Qr,wr:t.id,Zt:void 0})),this.eh=!1);let s=this.$i.W().layout;this.zt.tt=null;let n=e.Xs();if(null===n)return;let r=this.Wr.Ct();if(null===r||0===this.zt.it.length)return;let l=NaN,h=em(e.he()),o={nh:h,sh:h};this.zt.tt=tj(this.zt.it,n,!0);for(let n=this.zt.tt.from;n<this.zt.tt.to;n++){let a=i[n];a.time!==l&&(o.nh=h,o.sh=h,l=a.time);let u=this.zt.it[n];u.nt=e.It(a.time),void 0!==a.text&&a.text.length>0&&(u.Zt={th:a.text,nt:0,st:0,Hi:0,Vt:0});let c=this.Wr.fh(a.time);null!==c&&function(t,e,i,s,n,r,l,h,o){let a=U(i)?i:i.xe,u=U(i)?i:i.ge,c=U(i)?i:i.Me,d=U(e.size)?Math.max(e.size,0):1,f=ef(h.he())*d,m=f/2;switch(t.Ks=f,e.position){case"inBar":return t.st=l.Rt(a,o),void 0!==t.Zt&&(t.Zt.st=t.st+m+r+.6*n);case"aboveBar":return t.st=l.Rt(u,o)-m-s.nh,void 0!==t.Zt&&(t.Zt.st=t.st-m-.6*n,s.nh+=1.2*n),s.nh+=f+r;case"belowBar":return t.st=l.Rt(c,o)+m+s.sh,void 0!==t.Zt&&(t.Zt.st=t.st+m+r+.6*n,s.sh+=1.2*n),s.sh+=f+r}e.position}(u,a,c,o,s.fontSize,h,t,e,r.Ot)}this.ft=!1}}class ey extends en{constructor(t){super(t)}kr(){let t=this.Mr;t.yt=!1;let e=this.Ls.W();if(!e.priceLineVisible||!this.Ls.yt())return;let i=this.Ls.Yr(0===e.priceLineSource);i.Xr||(t.yt=!0,t.st=i.ki,t.O=this.Ls.ph(i.O),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class ex extends tp{constructor(t){super(),this.jt=t}zi(t,e,i){t.yt=!1,e.yt=!1;let s=this.jt;if(!s.yt())return;let n=s.W(),r=n.lastValueVisible,l=""!==s.mh(),h=0===n.seriesLastValueMode,o=s.Yr(!1);if(o.Xr)return;r&&(t.Zt=this.bh(o,r,h),t.yt=0!==t.Zt.length),(l||h)&&(e.Zt=this.wh(o,r,l,h),e.yt=e.Zt.length>0);let a=s.ph(o.O),u=V(a);i.t=u.t,i.ki=o.ki,e.At=s.$t().Bt(o.ki/s.Dt().Vt()),t.At=a,t.O=u.i,e.O=u.i}wh(t,e,i,s){let n="",r=this.jt.mh();return i&&0!==r.length&&(n+=`${r} `),e&&s&&(n+=this.jt.Dt().gh()?t.Mh:t.xh),n.trim()}bh(t,e,i){return e?i?this.jt.Dt().gh()?t.xh:t.Mh:t.Zt:""}}function eM(t,e,i,s){let n=Number.isFinite(e),r=Number.isFinite(i);return n&&r?t(e,i):n||r?n?e:i:s}class eS{constructor(t,e){this.Sh=t,this.kh=e}yh(t){return null!==t&&this.Sh===t.Sh&&this.kh===t.kh}Ch(){return new eS(this.Sh,this.kh)}Th(){return this.Sh}Ph(){return this.kh}Rh(){return this.kh-this.Sh}Ni(){return this.kh===this.Sh||Number.isNaN(this.kh)||Number.isNaN(this.Sh)}ts(t){return null===t?this:new eS(eM(Math.min,this.Th(),t.Th(),-1/0),eM(Math.max,this.Ph(),t.Ph(),1/0))}Dh(t){if(!U(t)||0==this.kh-this.Sh)return;let e=.5*(this.kh+this.Sh),i=this.kh-e,s=this.Sh-e;i*=t,s*=t,this.kh=e+i,this.Sh=e+s}Oh(t){U(t)&&(this.kh+=t,this.Sh+=t)}Ah(){return{minValue:this.Sh,maxValue:this.kh}}static Bh(t){return null===t?null:new eS(t.minValue,t.maxValue)}}class eC{constructor(t,e){this.Vh=t,this.Ih=e||null}zh(){return this.Vh}Lh(){return this.Ih}Ah(){return null===this.Vh?null:{priceRange:this.Vh.Ah(),margins:this.Ih||void 0}}static Bh(t){return null===t?null:new eC(eS.Bh(t.priceRange),t.margins)}}class e_ extends en{constructor(t,e){super(t),this.Eh=e}kr(){let t=this.Mr;t.yt=!1;let e=this.Eh.W();if(!this.Ls.yt()||!e.lineVisible)return;let i=this.Eh.Nh();null!==i&&(t.yt=!0,t.st=i,t.O=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.wr=this.Eh.W().id)}}class ek extends tp{constructor(t,e){super(),this.Wr=t,this.Eh=e}zi(t,e,i){t.yt=!1,e.yt=!1;let s=this.Eh.W(),n=s.axisLabelVisible,r=""!==s.title,l=this.Wr;if(!n||!l.yt())return;let h=this.Eh.Nh();if(null===h)return;r&&(e.Zt=s.title,e.yt=!0),e.At=l.$t().Bt(h/l.Dt().Vt()),t.Zt=this.Fh(s.price),t.yt=!0;let o=V(s.axisLabelColor||s.color);i.t=o.t;let a=s.axisLabelTextColor||o.i;t.O=a,e.O=a,i.ki=h}Fh(t){let e=this.Wr.Ct();return null===e?"":this.Wr.Dt().Fi(t,e.Ot)}}class ez{constructor(t,e){this.Wr=t,this.cn=e,this.Wh=new e_(t,this),this._r=new ek(t,this),this.jh=new ei(this._r,t,t.$t())}Hh(t){j(this.cn,t),this.bt(),this.Wr.$t().$h()}W(){return this.cn}Uh(){return this.Wh}qh(){return this.jh}Yh(){return this._r}bt(){this.Wh.bt(),this._r.bt()}Nh(){let t=this.Wr,e=t.Dt();if(t.$t().St().Ni()||e.Ni())return null;let i=t.Ct();return null===i?null:e.Rt(this.cn.price,i.Ot)}}class eL extends ty{constructor(t){super(),this.$i=t}$t(){return this.$i}}let eT={Bar:(t,e,i,s)=>{var n;let r=e.upColor,l=e.downColor,h=D(t(i,s)),o=N(h.Ot[0])<=N(h.Ot[3]);return{ue:null!=(n=h.O)?n:o?r:l}},Candlestick:(t,e,i,s)=>{var n,r,l;let h=e.upColor,o=e.downColor,a=e.borderUpColor,u=e.borderDownColor,c=e.wickUpColor,d=e.wickDownColor,f=D(t(i,s)),m=N(f.Ot[0])<=N(f.Ot[3]);return{ue:null!=(n=f.O)?n:m?h:o,Ee:null!=(r=f.At)?r:m?a:u,Le:null!=(l=f.Xh)?l:m?c:d}},Custom:(t,e,i,s)=>{var n;return{ue:null!=(n=D(t(i,s)).O)?n:e.color}},Area:(t,e,i,s)=>{var n,r,l,h;let o=D(t(i,s));return{ue:null!=(n=o.lt)?n:e.lineColor,lt:null!=(r=o.lt)?r:e.lineColor,Ts:null!=(l=o.Ts)?l:e.topColor,Ps:null!=(h=o.Ps)?h:e.bottomColor}},Baseline:(t,e,i,s)=>{var n,r,l,h,o,a;let u=D(t(i,s));return{ue:u.Ot[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Pe:null!=(n=u.Pe)?n:e.topLineColor,Re:null!=(r=u.Re)?r:e.bottomLineColor,Se:null!=(l=u.Se)?l:e.topFillColor1,ke:null!=(h=u.ke)?h:e.topFillColor2,ye:null!=(o=u.ye)?o:e.bottomFillColor1,Ce:null!=(a=u.Ce)?a:e.bottomFillColor2}},Line:(t,e,i,s)=>{var n,r;let l=D(t(i,s));return{ue:null!=(n=l.O)?n:e.color,lt:null!=(r=l.O)?r:e.color}},Histogram:(t,e,i,s)=>{var n;return{ue:null!=(n=D(t(i,s)).O)?n:e.color}}};class eO{constructor(t){this.Kh=(t,e)=>void 0!==e?e.Ot:this.Wr.In().Zh(t),this.Wr=t,this.Gh=eT[t.Jh()]}Hs(t,e){return this.Gh(this.Kh,this.Wr.W(),t,e)}}!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(o||(o={}));class eE{constructor(){this.Qh=[],this.tl=new Map,this.il=new Map}nl(){return this.Ks()>0?this.Qh[this.Qh.length-1]:null}sl(){return this.Ks()>0?this.el(0):null}Vn(){return this.Ks()>0?this.el(this.Qh.length-1):null}Ks(){return this.Qh.length}Ni(){return 0===this.Ks()}Kr(t){return null!==this.rl(t,0)}Zh(t){return this.hl(t)}hl(t,e=0){let i=this.rl(t,e);return null===i?null:Object.assign(Object.assign({},this.ll(i)),{se:this.el(i)})}ie(){return this.Qh}al(t,e,i){if(this.Ni())return null;let s=null;for(let n of i)s=eP(s,this.ol(t,e,n));return s}J(t){this.il.clear(),this.tl.clear(),this.Qh=t}el(t){return this.Qh[t].se}ll(t){return this.Qh[t]}rl(t,e){let i=this._l(t);if(null===i&&0!==e)switch(e){case -1:return this.ul(t);case 1:return this.cl(t);default:throw TypeError("Unknown search mode")}return i}ul(t){let e=this.dl(t);return e>0&&(e-=1),e!==this.Qh.length&&this.el(e)<t?e:null}cl(t){let e=this.fl(t);return e!==this.Qh.length&&t<this.el(e)?e:null}_l(t){let e=this.dl(t);return e===this.Qh.length||t<this.Qh[e].se?null:e}dl(t){return tA(this.Qh,t,(t,e)=>t.se<e)}fl(t){return tH(this.Qh,t,(t,e)=>t.se>e)}vl(t,e,i){let s=null;for(let n=t;n<e;n++){let t=this.Qh[n].Ot[i];Number.isNaN(t)||(null===s?s={pl:t,ml:t}:(t<s.pl&&(s.pl=t),t>s.ml&&(s.ml=t)))}return s}ol(t,e,i){if(this.Ni())return null;let s=null,n=D(this.sl()),r=D(this.Vn()),l=Math.max(t,n),h=Math.min(e,r),o=30*Math.ceil(l/30),a=Math.max(o,30*Math.floor(h/30));{let t=this.dl(l),n=this.fl(Math.min(h,o,e));s=eP(s,this.vl(t,n,i))}let u=this.tl.get(i);void 0===u&&(u=new Map,this.tl.set(i,u));for(let t=Math.max(o+1,l);t<a;t+=30){let e=Math.floor(t/30),n=u.get(e);if(void 0===n){let t=this.dl(30*e),s=this.fl((e+1)*30-1);n=this.vl(t,s,i),u.set(e,n)}s=eP(s,n)}{let t=this.dl(a),e=this.fl(h);s=eP(s,this.vl(t,e,i))}return s}}function eP(t,e){return null===t?e:null===e?t:{pl:Math.min(t.pl,e.pl),ml:Math.max(t.ml,e.ml)}}class eD{constructor(t){this.bl=t}K(t,e,i){this.bl.draw(t)}wl(t,e,i){var s,n;null==(n=(s=this.bl).drawBackground)||n.call(s,t)}}class eN{constructor(t){this.Qe=null,this.wn=t}gt(){var t;let e=this.wn.renderer();if(null===e)return null;if((null==(t=this.Qe)?void 0:t.gl)===e)return this.Qe.Ml;let i=new eD(e);return this.Qe={gl:e,Ml:i},i}xl(){var t,e,i;return null!=(i=null==(e=(t=this.wn).zOrder)?void 0:e.call(t))?i:"normal"}}function eW(t){var e,i,s,n,r;return{Zt:t.text(),ki:t.coordinate(),Si:null==(e=t.fixedCoordinate)?void 0:e.call(t),O:t.textColor(),t:t.backColor(),yt:null==(s=null==(i=t.visible)?void 0:i.call(t))||s,hi:null==(r=null==(n=t.tickVisible)?void 0:n.call(t))||r}}class eR{constructor(t,e){this.Wt=new tb,this.Sl=t,this.kl=e}gt(){return this.Wt.J(Object.assign({Hi:this.kl.Hi()},eW(this.Sl))),this.Wt}}class e$ extends tp{constructor(t,e){super(),this.Sl=t,this.Li=e}zi(t,e,i){let s=eW(this.Sl);i.t=s.t,t.O=s.O;let n=2/12*this.Li.P();i.wi=n,i.gi=n,i.ki=s.ki,i.Si=s.Si,t.Zt=s.Zt,t.yt=s.yt,t.hi=s.hi}}class eF{constructor(t,e){this.yl=null,this.Cl=null,this.Tl=null,this.Pl=null,this.Rl=null,this.Dl=t,this.Wr=e}Ol(){return this.Dl}On(){var t,e;null==(e=(t=this.Dl).updateAllViews)||e.call(t)}Pn(){var t,e,i,s;let n=null!=(i=null==(e=(t=this.Dl).paneViews)?void 0:e.call(t))?i:[];if((null==(s=this.yl)?void 0:s.gl)===n)return this.yl.Ml;let r=n.map(t=>new eN(t));return this.yl={gl:n,Ml:r},r}Qi(){var t,e,i,s;let n=null!=(i=null==(e=(t=this.Dl).timeAxisViews)?void 0:e.call(t))?i:[];if((null==(s=this.Cl)?void 0:s.gl)===n)return this.Cl.Ml;let r=this.Wr.$t().St(),l=n.map(t=>new eR(t,r));return this.Cl={gl:n,Ml:l},l}Rn(){var t,e,i,s;let n=null!=(i=null==(e=(t=this.Dl).priceAxisViews)?void 0:e.call(t))?i:[];if((null==(s=this.Tl)?void 0:s.gl)===n)return this.Tl.Ml;let r=this.Wr.Dt(),l=n.map(t=>new e$(t,r));return this.Tl={gl:n,Ml:l},l}Al(){var t,e,i,s;let n=null!=(i=null==(e=(t=this.Dl).priceAxisPaneViews)?void 0:e.call(t))?i:[];if((null==(s=this.Pl)?void 0:s.gl)===n)return this.Pl.Ml;let r=n.map(t=>new eN(t));return this.Pl={gl:n,Ml:r},r}Bl(){var t,e,i,s;let n=null!=(i=null==(e=(t=this.Dl).timeAxisPaneViews)?void 0:e.call(t))?i:[];if((null==(s=this.Rl)?void 0:s.gl)===n)return this.Rl.Ml;let r=n.map(t=>new eN(t));return this.Rl={gl:n,Ml:r},r}Vl(t,e){var i,s,n;return null!=(n=null==(s=(i=this.Dl).autoscaleInfo)?void 0:s.call(i,t,e))?n:null}br(t,e){var i,s,n;return null!=(n=null==(s=(i=this.Dl).hitTest)?void 0:s.call(i,t,e))?n:null}}function eB(t,e,i,s){t.forEach(t=>{e(t).forEach(t=>{t.xl()===i&&s.push(t)})})}function eI(t){return t.Pn()}function eA(t){return t.Al()}function eH(t){return t.Bl()}class eV extends eL{constructor(t,e,i,s,n){super(t),this.zt=new eE,this.Wh=new ey(this),this.Il=[],this.zl=new er(this),this.Ll=null,this.El=null,this.Nl=[],this.Fl=[],this.Wl=null,this.jl=[],this.cn=e,this.Hl=i;let r=new ex(this);this.rn=[r],this.jh=new ei(r,this,t),"Area"!==i&&"Line"!==i&&"Baseline"!==i||(this.Ll=new eu(this)),this.$l(),this.Ul(n)}S(){null!==this.Wl&&clearTimeout(this.Wl)}ph(t){return this.cn.priceLineColor||t}Yr(t){let e,i,s={Xr:!0},n=this.Dt();if(this.$t().St().Ni()||n.Ni()||this.zt.Ni())return s;let r=this.$t().St().Xs(),l=this.Ct();if(null===r||null===l)return s;if(t){let t=this.zt.nl();if(null===t)return s;e=t,i=t.se}else{let t=this.zt.hl(r.ui(),-1);if(null===t||null===(e=this.zt.Zh(t.se)))return s;i=t.se}let h=e.Ot[3],o=this.$s().Hs(i,{Ot:e}),a=n.Rt(h,l.Ot);return{Xr:!1,_t:h,Zt:n.Fi(h,l.Ot),Mh:n.ql(h),xh:n.Yl(h,l.Ot),O:o.ue,ki:a,se:i}}$s(){return null!==this.El||(this.El=new eO(this)),this.El}W(){return this.cn}Hh(t){let e=t.priceScaleId;void 0!==e&&e!==this.cn.priceScaleId&&this.$t().Xl(this,e),j(this.cn,t),void 0!==t.priceFormat&&(this.$l(),this.$t().Kl()),this.$t().Zl(this),this.$t().Gl(),this.wn.bt("options")}J(t,e){this.zt.J(t),this.Jl(),this.wn.bt("data"),this.dn.bt("data"),null!==this.Ll&&(e&&e.Ql?this.Ll.Hr():0===t.length&&this.Ll.jr());let i=this.$t().cr(this);this.$t().ta(i),this.$t().Zl(this),this.$t().Gl(),this.$t().$h()}ia(t){this.Nl=t,this.Jl();let e=this.$t().cr(this);this.dn.bt("data"),this.$t().ta(e),this.$t().Zl(this),this.$t().Gl(),this.$t().$h()}na(){return this.Nl}uh(){return this.Fl}sa(t){let e=new ez(this,t);return this.Il.push(e),this.$t().Zl(this),e}ea(t){let e=this.Il.indexOf(t);-1!==e&&this.Il.splice(e,1),this.$t().Zl(this)}Jh(){return this.Hl}Ct(){let t=this.ra();return null===t?null:{Ot:t.Ot[3],ha:t.ot}}ra(){let t=this.$t().St().Xs();if(null===t)return null;let e=t.Os();return this.zt.hl(e,1)}In(){return this.zt}fh(t){let e=this.zt.Zh(t);return null===e?null:"Bar"===this.Hl||"Candlestick"===this.Hl||"Custom"===this.Hl?{we:e.Ot[0],ge:e.Ot[1],Me:e.Ot[2],xe:e.Ot[3]}:e.Ot[3]}la(t){let e=[];eB(this.jl,eI,"top",e);let i=this.Ll;return null!==i&&i.yt()&&(null===this.Wl&&i.Ur()&&(this.Wl=setTimeout(()=>{this.Wl=null,this.$t().aa()},0)),i.$r(),e.unshift(i)),e}Pn(){let t=[];this.oa()||t.push(this.zl),t.push(this.wn,this.Wh,this.dn);let e=this.Il.map(t=>t.Uh());return t.push(...e),eB(this.jl,eI,"normal",t),t}_a(){return this.ua(eI,"bottom")}ca(t){return this.ua(eA,t)}da(t){return this.ua(eH,t)}fa(t,e){return this.jl.map(i=>i.br(t,e)).filter(t=>null!==t)}Ji(t){return[this.jh,...this.Il.map(t=>t.qh())]}Rn(t,e){if(e!==this.Yi&&!this.oa())return[];let i=[...this.rn];for(let t of this.Il)i.push(t.Yh());return this.jl.forEach(t=>{i.push(...t.Rn())}),i}Qi(){let t=[];return this.jl.forEach(e=>{t.push(...e.Qi())}),t}Vl(t,e){if(void 0!==this.cn.autoscaleInfoProvider){let i=this.cn.autoscaleInfoProvider(()=>{let i=this.va(t,e);return null===i?null:i.Ah()});return eC.Bh(i)}return this.va(t,e)}pa(){return this.cn.priceFormat.minMove}ma(){return this.ba}On(){var t;for(let t of(this.wn.bt(),this.dn.bt(),this.rn))t.bt();for(let t of this.Il)t.bt();this.Wh.bt(),this.zl.bt(),null==(t=this.Ll)||t.bt(),this.jl.forEach(t=>t.On())}Dt(){return D(super.Dt())}kt(t){if(!(("Line"===this.Hl||"Area"===this.Hl||"Baseline"===this.Hl)&&this.cn.crosshairMarkerVisible))return null;let e=this.zt.Zh(t);return null===e?null:{_t:e.Ot[3],ht:this.wa(),At:this.ga(),Pt:this.Ma(),Tt:this.xa(t)}}mh(){return this.cn.title}yt(){return this.cn.visible}Sa(t){this.jl.push(new eF(t,this))}ka(t){this.jl=this.jl.filter(e=>e.Ol()!==t)}ya(){if(this.wn instanceof t4!=!1)return t=>this.wn.Fe(t)}Ca(){if(this.wn instanceof t4!=!1)return t=>this.wn.We(t)}oa(){return!tM(this.Dt().Ta())}va(t,e){if(!q(t)||!q(e)||this.zt.Ni())return null;let i="Line"===this.Hl||"Area"===this.Hl||"Baseline"===this.Hl||"Histogram"===this.Hl?[3]:[2,1],s=this.zt.al(t,e,i),n=null!==s?new eS(s.pl,s.ml):null;if("Histogram"===this.Jh()){let t=this.cn.base,e=new eS(t,t);n=null!==n?n.ts(e):e}let r=this.dn._h();return this.jl.forEach(i=>{var s,l,h,o;let a=i.Vl(t,e);if(null==a?void 0:a.priceRange){let t=new eS(a.priceRange.minValue,a.priceRange.maxValue);n=null!==n?n.ts(t):t}(null==a?void 0:a.margins)&&(s=r,l=a.margins,r={above:Math.max(null!=(h=null==s?void 0:s.above)?h:0,l.above),below:Math.max(null!=(o=null==s?void 0:s.below)?o:0,l.below)})}),new eC(n,r)}wa(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerRadius}return 0}ga(){switch(this.Hl){case"Line":case"Area":case"Baseline":{let t=this.cn.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}Ma(){switch(this.Hl){case"Line":case"Area":case"Baseline":return this.cn.crosshairMarkerBorderWidth}return 0}xa(t){switch(this.Hl){case"Line":case"Area":case"Baseline":{let t=this.cn.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.$s().Hs(t).ue}$l(){switch(this.cn.priceFormat.type){case"custom":this.ba={format:this.cn.priceFormat.formatter};break;case"volume":this.ba=new tz(this.cn.priceFormat.precision);break;case"percent":this.ba=new tk(this.cn.priceFormat.precision);break;default:{let t=Math.pow(10,this.cn.priceFormat.precision);this.ba=new t_(t,this.cn.priceFormat.minMove*t)}}null!==this.Yi&&this.Yi.Pa()}Jl(){let t=this.$t().St();if(!t.Ra()||this.zt.Ni())return void(this.Fl=[]);let e=D(this.zt.sl());this.Fl=this.Nl.map((i,s)=>{let n=D(t.Da(i.time,!0));return{time:D(this.zt.hl(n,n<e?1:-1)).se,position:i.position,shape:i.shape,color:i.color,id:i.id,Qr:s,text:i.text,size:i.size,originalTime:i.originalTime}})}Ul(t){switch(this.dn=new ew(this,this.$t()),this.Hl){case"Bar":this.wn=new tX(this,this.$t());break;case"Candlestick":this.wn=new t2(this,this.$t());break;case"Line":this.wn=new t7(this,this.$t());break;case"Custom":this.wn=new t4(this,this.$t(),P(t));break;case"Area":this.wn=new tG(this,this.$t());break;case"Baseline":this.wn=new t0(this,this.$t());break;case"Histogram":this.wn=new t8(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Hl)}}ua(t,e){let i=[];return eB(this.jl,t,e,i),i}}class eY{constructor(t){this.cn=t}Oa(t,e,i){if(0===this.cn.mode)return t;let s=i.vn(),n=s.Ct();if(null===n)return t;let r=s.Rt(t,n),l=i.Aa().filter(t=>t instanceof eV).reduce((t,s)=>{if(i.dr(s)||!s.yt())return t;let n=s.Dt(),r=s.In();if(n.Ni()||!r.Kr(e))return t;let l=r.Zh(e);if(null===l)return t;let h=N(s.Ct());return t.concat([n.Rt(l.Ot[3],h.Ot)])},[]);if(0===l.length)return t;l.sort((t,e)=>Math.abs(t-r)-Math.abs(e-r));let h=l[0];return s.pn(h,n)}}class ej extends ts{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;let n=Math.max(1,Math.floor(i));t.lineWidth=n,t.save(),t.lineWidth%2&&t.translate(.5,.5),(()=>{let r=D(this.zt);if(r.Ba){for(let s of(t.strokeStyle=r.Va,T(t,r.Ia),t.beginPath(),r.za)){let r=Math.round(s.La*i);t.moveTo(r,-n),t.lineTo(r,e.height+n)}t.stroke()}if(r.Ea){for(let i of(t.strokeStyle=r.Na,T(t,r.Fa),t.beginPath(),r.Wa)){let r=Math.round(i.La*s);t.moveTo(-n,r),t.lineTo(e.width+n,r)}t.stroke()}})(),t.restore()}}class eU{constructor(t){this.Wt=new ej,this.ft=!0,this.tn=t}bt(){this.ft=!0}gt(){if(this.ft){let t=this.tn.$t().W().grid,e={Ea:t.horzLines.visible,Ba:t.vertLines.visible,Na:t.horzLines.color,Va:t.vertLines.color,Fa:t.horzLines.style,Ia:t.vertLines.style,Wa:this.tn.vn().ja(),za:(this.tn.$t().St().ja()||[]).map(t=>({La:t.coord}))};this.Wt.J(e),this.ft=!1}return this.Wt}}class eq{constructor(t){this.wn=new eU(t)}Uh(){return this.wn}}let eG={Ha:4,$a:1e-4};function eJ(t,e){let i=100*(t-e)/e;return e<0?-i:i}function eZ(t,e){let i=100*(t-e)/e+100;return e<0?-i:i}function eX(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.log10(i+e.$a)+e.Ha;return t<0?-s:s}function eK(t,e){let i=Math.abs(t);if(i<1e-15)return 0;let s=Math.pow(10,i-e.Ha)-e.$a;return t<0?-s:s}function eQ(t,e){return null===t?null:new eS(eX(t.Th(),e),eX(t.Ph(),e))}function e0(t,e){return null===t?null:new eS(eK(t.Th(),e),eK(t.Ph(),e))}function e1(t){if(null===t)return eG;let e=Math.abs(t.Ph()-t.Th());if(e>=1||e<1e-15)return eG;let i=Math.ceil(Math.abs(Math.log10(e))),s=eG.Ha+i;return{Ha:s,$a:1/Math.pow(10,s)}}class e2{constructor(t,e){if(this.Ua=t,this.qa=e,function(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.Ua))this.Ya=[2,2.5,2];else{this.Ya=[];for(let t=this.Ua;1!==t;){if(t%2==0)this.Ya.push(2),t/=2;else{if(t%5!=0)throw Error("unexpected base");this.Ya.push(2,2.5),t/=5}if(this.Ya.length>100)throw Error("something wrong with base")}}}Xa(t,e,i){let s=0===this.Ua?0:1/this.Ua,n=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),r=0,l=this.qa[0];for(;;){let t=s-n<=1e-14&&n>s+1e-14,e=i*l-n<=1e-14,h=1-n<=1e-14;if(!(t&&e&&h))break;n/=l,l=this.qa[++r%this.qa.length]}if(n<=s+1e-14&&(n=s),n=Math.max(1,n),this.Ya.length>0&&1e-14>Math.abs(n-1))for(r=0,l=this.Ya[0];i*l-n<=1e-14&&n>s+1e-14;)n/=l,l=this.Ya[++r%this.Ya.length];return n}}class e3{constructor(t,e,i,s){this.Ka=[],this.Li=t,this.Ua=e,this.Za=i,this.Ga=s}Xa(t,e){if(t<e)throw Error("high < low");let i=this.Li.Vt(),s=(t-e)*this.Ja()/i,n=new e2(this.Ua,[2,2.5,2]),r=new e2(this.Ua,[2,2,2.5]),l=new e2(this.Ua,[2.5,2,2]),h=[];return h.push(n.Xa(t,e,s),r.Xa(t,e,s),l.Xa(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(h)}Qa(){let t=this.Li,e=t.Ct();if(null===e)return void(this.Ka=[]);let i=t.Vt(),s=this.Za(i-1,e),n=this.Za(0,e),r=this.Li.W().entireTextOnly?this.io()/2:0,l=i-1-r,h=Math.max(s,n),o=Math.min(s,n);if(h===o)return void(this.Ka=[]);let a=this.Xa(h,o),u=h%a;u+=u<0?a:0;let c=h>=o?1:-1,d=null,f=0;for(let i=h-u;i>o;i-=a){let s=this.Ga(i,e,!0);null!==d&&Math.abs(s-d)<this.Ja()||s<r||s>l||(f<this.Ka.length?(this.Ka[f].La=s,this.Ka[f].no=t.so(i)):this.Ka.push({La:s,no:t.so(i)}),f++,d=s,t.eo()&&(a=this.Xa(i*c,o)))}this.Ka.length=f}ja(){return this.Ka}io(){return this.Li.P()}Ja(){return Math.ceil(2.5*this.io())}}function e4(t){return t.slice().sort((t,e)=>D(t.Ki())-D(e.Ki()))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(a||(a={}));let e5=new tk,e9=new t_(100,1);class e8{constructor(t,e,i,s){this.ro=0,this.ho=null,this.Vh=null,this.lo=null,this.ao={oo:!1,_o:null},this.uo=0,this.co=0,this.do=new Y,this.fo=new Y,this.vo=[],this.po=null,this.mo=null,this.bo=null,this.wo=null,this.ba=e9,this.Mo=e1(null),this.xo=t,this.cn=e,this.So=i,this.ko=s,this.yo=new e3(this,100,this.Co.bind(this),this.To.bind(this))}Ta(){return this.xo}W(){return this.cn}Hh(t){if(j(this.cn,t),this.Pa(),void 0!==t.mode&&this.Po({yr:t.mode}),void 0!==t.scaleMargins){let e=P(t.scaleMargins.top),i=P(t.scaleMargins.bottom);if(e<0||e>1)throw Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Ro(),this.mo=null}}Do(){return this.cn.autoScale}eo(){return 1===this.cn.mode}gh(){return 2===this.cn.mode}Oo(){return 3===this.cn.mode}yr(){return{Wn:this.cn.autoScale,Ao:this.cn.invertScale,yr:this.cn.mode}}Po(t){let e=this.yr(),i=null;void 0!==t.Wn&&(this.cn.autoScale=t.Wn),void 0!==t.yr&&(this.cn.mode=t.yr,2!==t.yr&&3!==t.yr||(this.cn.autoScale=!0),this.ao.oo=!1),1===e.yr&&t.yr!==e.yr&&(function(t,e){if(null===t)return!1;let i=eK(t.Th(),e),s=eK(t.Ph(),e);return isFinite(i)&&isFinite(s)}(this.Vh,this.Mo)?null!==(i=e0(this.Vh,this.Mo))&&this.Bo(i):this.cn.autoScale=!0),1===t.yr&&t.yr!==e.yr&&null!==(i=eQ(this.Vh,this.Mo))&&this.Bo(i);let s=e.yr!==this.cn.mode;s&&(2===e.yr||this.gh())&&this.Pa(),s&&(3===e.yr||this.Oo())&&this.Pa(),void 0!==t.Ao&&e.Ao!==t.Ao&&(this.cn.invertScale=t.Ao,this.Vo()),this.fo.m(e,this.yr())}Io(){return this.fo}P(){return this.So.fontSize}Vt(){return this.ro}zo(t){this.ro!==t&&(this.ro=t,this.Ro(),this.mo=null)}Lo(){if(this.ho)return this.ho;let t=this.Vt()-this.Eo()-this.No();return this.ho=t,t}zh(){return this.Fo(),this.Vh}Bo(t,e){let i=this.Vh;(e||null===i&&null!==t||null!==i&&!i.yh(t))&&(this.mo=null,this.Vh=t)}Ni(){return this.Fo(),0===this.ro||!this.Vh||this.Vh.Ni()}Wo(t){return this.Ao()?t:this.Vt()-1-t}Rt(t,e){return this.gh()?t=eJ(t,e):this.Oo()&&(t=eZ(t,e)),this.To(t,e)}Qs(t,e,i){this.Fo();let s=this.No(),n=D(this.zh()),r=n.Th(),l=n.Ph(),h=this.Lo()-1,o=this.Ao(),a=h/(l-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.jo();for(let i=u;i<c;i++){let n=t[i],l=n._t;if(isNaN(l))continue;let h=l;null!==d&&(h=d(n._t,e));let u=s+a*(h-r);n.st=o?u:this.ro-1-u}}me(t,e,i){this.Fo();let s=this.No(),n=D(this.zh()),r=n.Th(),l=n.Ph(),h=this.Lo()-1,o=this.Ao(),a=h/(l-r),u=void 0===i?0:i.from,c=void 0===i?t.length:i.to,d=this.jo();for(let i=u;i<c;i++){let n=t[i],l=n.we,h=n.ge,u=n.Me,c=n.xe;null!==d&&(l=d(n.we,e),h=d(n.ge,e),u=d(n.Me,e),c=d(n.xe,e));let f=s+a*(l-r),m=o?f:this.ro-1-f;n.ve=m,f=s+a*(h-r),n.ce=m=o?f:this.ro-1-f,f=s+a*(u-r),n.de=m=o?f:this.ro-1-f,f=s+a*(c-r),n.pe=m=o?f:this.ro-1-f}}pn(t,e){let i=this.Co(t,e);return this.Ho(i,e)}Ho(t,e){var i,s;let n=t;return this.gh()?(i=n,e<0&&(i=-i),n=i/100*e+e):this.Oo()&&(s=n-100,e<0&&(s=-s),n=s/100*e+e),n}Aa(){return this.vo}$o(){if(this.po)return this.po;let t=[];for(let e=0;e<this.vo.length;e++){let i=this.vo[e];null===i.Ki()&&i.Zi(e+1),t.push(i)}return t=e4(t),this.po=t,this.po}Uo(t){-1===this.vo.indexOf(t)&&(this.vo.push(t),this.Pa(),this.qo())}Yo(t){let e=this.vo.indexOf(t);if(-1===e)throw Error("source is not attached to scale");this.vo.splice(e,1),0===this.vo.length&&(this.Po({Wn:!0}),this.Bo(null)),this.Pa(),this.qo()}Ct(){let t=null;for(let e of this.vo){let i=e.Ct();null!==i&&(null===t||i.ha<t.ha)&&(t=i)}return null===t?null:t.Ot}Ao(){return this.cn.invertScale}ja(){let t=null===this.Ct();if(null!==this.mo&&(t||this.mo.Xo===t))return this.mo.ja;this.yo.Qa();let e=this.yo.ja();return this.mo={ja:e,Xo:t},this.do.m(),e}Ko(){return this.do}Zo(t){this.gh()||this.Oo()||null===this.bo&&null===this.lo&&(this.Ni()||(this.bo=this.ro-t,this.lo=D(this.zh()).Ch()))}Go(t){if(this.gh()||this.Oo()||null===this.bo)return;this.Po({Wn:!1}),(t=this.ro-t)<0&&(t=0);let e=(this.bo+.2*(this.ro-1))/(t+.2*(this.ro-1)),i=D(this.lo).Ch();e=Math.max(e,.1),i.Dh(e),this.Bo(i)}Jo(){this.gh()||this.Oo()||(this.bo=null,this.lo=null)}Qo(t){this.Do()||null===this.wo&&null===this.lo&&(this.Ni()||(this.wo=t,this.lo=D(this.zh()).Ch()))}t_(t){if(this.Do()||null===this.wo)return;let e=D(this.zh()).Rh()/(this.Lo()-1),i=t-this.wo;this.Ao()&&(i*=-1);let s=i*e,n=D(this.lo).Ch();n.Oh(s),this.Bo(n,!0),this.mo=null}i_(){this.Do()||null!==this.wo&&(this.wo=null,this.lo=null)}ma(){return this.ba||this.Pa(),this.ba}Fi(t,e){switch(this.cn.mode){case 2:return this.n_(eJ(t,e));case 3:return this.ma().format(eZ(t,e));default:return this.Fh(t)}}so(t){switch(this.cn.mode){case 2:return this.n_(t);case 3:return this.ma().format(t);default:return this.Fh(t)}}ql(t){return this.Fh(t,D(this.s_()).ma())}Yl(t,e){return t=eJ(t,e),this.n_(t,e5)}e_(){return this.vo}r_(t){this.ao={_o:t,oo:!1}}On(){this.vo.forEach(t=>t.On())}Pa(){this.mo=null;let t=this.s_(),e=100;null!==t&&(e=Math.round(1/t.pa())),this.ba=e9,this.gh()?(this.ba=e5,e=100):this.Oo()?(this.ba=new t_(100,1),e=100):null!==t&&(this.ba=t.ma()),this.yo=new e3(this,e,this.Co.bind(this),this.To.bind(this)),this.yo.Qa()}qo(){this.po=null}s_(){return this.vo[0]||null}Eo(){return this.Ao()?this.cn.scaleMargins.bottom*this.Vt()+this.co:this.cn.scaleMargins.top*this.Vt()+this.uo}No(){return this.Ao()?this.cn.scaleMargins.top*this.Vt()+this.uo:this.cn.scaleMargins.bottom*this.Vt()+this.co}Fo(){this.ao.oo||(this.ao.oo=!0,this.h_())}Ro(){this.ho=null}To(t,e){if(this.Fo(),this.Ni())return 0;t=this.eo()&&t?eX(t,this.Mo):t;let i=D(this.zh()),s=this.No()+(this.Lo()-1)*(t-i.Th())/i.Rh();return this.Wo(s)}Co(t,e){if(this.Fo(),this.Ni())return 0;let i=this.Wo(t),s=D(this.zh()),n=s.Th()+s.Rh()*((i-this.No())/(this.Lo()-1));return this.eo()?eK(n,this.Mo):n}Vo(){this.mo=null,this.yo.Qa()}h_(){var t,e,i,s,n;let r=this.ao._o;if(null===r)return;let l=null,h=this.e_(),o=0,a=0;for(let t of h){if(!t.yt())continue;let h=t.Ct();if(null===h)continue;let u=t.Vl(r.Os(),r.ui()),c=u&&u.zh();if(null!==c){switch(this.cn.mode){case 1:c=eQ(c,this.Mo);break;case 2:e=c,i=h.Ot,c=new eS(eJ(e.Th(),i),eJ(e.Ph(),i));break;case 3:s=c,n=h.Ot,c=new eS(eZ(s.Th(),n),eZ(s.Ph(),n))}if(l=null===l?c:l.ts(D(c)),null!==u){let t=u.Lh();null!==t&&(o=Math.max(o,t.above),a=Math.max(a,t.below))}}}if(o===this.uo&&a===this.co||(this.uo=o,this.co=a,this.mo=null,this.Ro()),null!==l){if(l.Th()===l.Ph()){let t=this.s_(),e=5*(null===t||this.gh()||this.Oo()?1:t.pa());this.eo()&&(l=e0(l,this.Mo)),l=new eS(l.Th()-e,l.Ph()+e),this.eo()&&(l=eQ(l,this.Mo))}if(this.eo()){let e=e0(l,this.Mo),i=e1(e);if(t=this.Mo,i.Ha!==t.Ha||i.$a!==t.$a){let t=null!==this.lo?e0(this.lo,this.Mo):null;this.Mo=i,l=eQ(e,i),null!==t&&(this.lo=eQ(t,i))}}this.Bo(l)}else null===this.Vh&&(this.Bo(new eS(-.5,.5)),this.Mo=e1(null));this.ao.oo=!0}jo(){return this.gh()?eJ:this.Oo()?eZ:this.eo()?t=>eX(t,this.Mo):null}l_(t,e,i){return void 0===e?(void 0===i&&(i=this.ma()),i.format(t)):e(t)}Fh(t,e){return this.l_(t,this.ko.priceFormatter,e)}n_(t,e){return this.l_(t,this.ko.percentageFormatter,e)}}class e7{constructor(t,e){this.vo=[],this.a_=new Map,this.ro=0,this.o_=0,this.__=1e3,this.po=null,this.u_=new Y,this.kl=t,this.$i=e,this.c_=new eq(this);let i=e.W();this.d_=this.f_("left",i.leftPriceScale),this.v_=this.f_("right",i.rightPriceScale),this.d_.Io().l(this.p_.bind(this,this.d_),this),this.v_.Io().l(this.p_.bind(this,this.v_),this),this.m_(i)}m_(t){if(t.leftPriceScale&&this.d_.Hh(t.leftPriceScale),t.rightPriceScale&&this.v_.Hh(t.rightPriceScale),t.localization&&(this.d_.Pa(),this.v_.Pa()),t.overlayPriceScales)for(let e of Array.from(this.a_.values())){let i=D(e[0].Dt());i.Hh(t.overlayPriceScales),t.localization&&i.Pa()}}b_(t){switch(t){case"left":return this.d_;case"right":return this.v_}return this.a_.has(t)?P(this.a_.get(t))[0].Dt():null}S(){this.$t().w_().p(this),this.d_.Io().p(this),this.v_.Io().p(this),this.vo.forEach(t=>{t.S&&t.S()}),this.u_.m()}g_(){return this.__}M_(t){this.__=t}$t(){return this.$i}Hi(){return this.o_}Vt(){return this.ro}x_(t){this.o_=t,this.S_()}zo(t){this.ro=t,this.d_.zo(t),this.v_.zo(t),this.vo.forEach(e=>{if(this.dr(e)){let i=e.Dt();null!==i&&i.zo(t)}}),this.S_()}Aa(){return this.vo}dr(t){let e=t.Dt();return null===e||this.d_!==e&&this.v_!==e}Uo(t,e,i){let s=void 0!==i?i:this.y_().k_+1;this.C_(t,e,s)}Yo(t){let e=this.vo.indexOf(t);E(-1!==e,"removeDataSource: invalid data source"),this.vo.splice(e,1);let i=D(t.Dt()).Ta();if(this.a_.has(i)){let e=P(this.a_.get(i)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.a_.delete(i))}let s=t.Dt();s&&s.Aa().indexOf(t)>=0&&s.Yo(t),null!==s&&(s.qo(),this.T_(s)),this.po=null}pr(t){return t===this.d_?"left":t===this.v_?"right":"overlay"}P_(){return this.d_}R_(){return this.v_}D_(t,e){t.Zo(e)}O_(t,e){t.Go(e),this.S_()}A_(t){t.Jo()}B_(t,e){t.Qo(e)}V_(t,e){t.t_(e),this.S_()}I_(t){t.i_()}S_(){this.vo.forEach(t=>{t.On()})}vn(){let t=null;return this.$i.W().rightPriceScale.visible&&0!==this.v_.Aa().length?t=this.v_:this.$i.W().leftPriceScale.visible&&0!==this.d_.Aa().length?t=this.d_:0!==this.vo.length&&(t=this.vo[0].Dt()),null===t&&(t=this.v_),t}vr(){let t=null;return this.$i.W().rightPriceScale.visible?t=this.v_:this.$i.W().leftPriceScale.visible&&(t=this.d_),t}T_(t){null!==t&&t.Do()&&this.z_(t)}L_(t){let e=this.kl.Xs();t.Po({Wn:!0}),null!==e&&t.r_(e),this.S_()}E_(){this.z_(this.d_),this.z_(this.v_)}N_(){this.T_(this.d_),this.T_(this.v_),this.vo.forEach(t=>{this.dr(t)&&this.T_(t.Dt())}),this.S_(),this.$i.$h()}$o(){return null===this.po&&(this.po=e4(this.vo)),this.po}F_(){return this.u_}W_(){return this.c_}z_(t){let e=t.e_();if(e&&e.length>0&&!this.kl.Ni()){let e=this.kl.Xs();null!==e&&t.r_(e)}t.On()}y_(){let t=this.$o();if(0===t.length)return{j_:0,k_:0};let e=0,i=0;for(let s=0;s<t.length;s++){let n=t[s].Ki();null!==n&&(n<e&&(e=n),n>i&&(i=n))}return{j_:e,k_:i}}C_(t,e,i){let s=this.b_(e);if(null===s&&(s=this.f_(e,this.$i.W().overlayPriceScales)),this.vo.push(t),!tM(e)){let i=this.a_.get(e)||[];i.push(t),this.a_.set(e,i)}s.Uo(t),t.Gi(s),t.Zi(i),this.T_(s),this.po=null}p_(t,e,i){e.yr!==i.yr&&this.z_(t)}f_(t,e){let i=new e8(t,Object.assign({visible:!0,autoScale:!0},Z(e)),this.$i.W().layout,this.$i.W().localization);return i.zo(this.Vt()),i}}class e6{constructor(t,e,i=50){this.Ke=0,this.Ze=1,this.Ge=1,this.Qe=new Map,this.Je=new Map,this.H_=t,this.U_=e,this.tr=i}q_(t){let e=t.time,i=this.U_.cacheKey(e),s=this.Qe.get(i);if(void 0!==s)return s.Y_;if(this.Ke===this.tr){let t=this.Je.get(this.Ge);this.Je.delete(this.Ge),this.Qe.delete(P(t)),this.Ge++,this.Ke--}let n=this.H_(t);return this.Qe.set(i,{Y_:n,er:this.Ze}),this.Je.set(this.Ze,i),this.Ke++,this.Ze++,n}}class it{constructor(t,e){E(t<=e,"right should be >= left"),this.X_=t,this.K_=e}Os(){return this.X_}ui(){return this.K_}Z_(){return this.K_-this.X_+1}Kr(t){return this.X_<=t&&t<=this.K_}yh(t){return this.X_===t.Os()&&this.K_===t.ui()}}function ie(t,e){return null===t||null===e?t===e:t.yh(e)}class ii{constructor(){this.G_=new Map,this.Qe=null,this.J_=!1}Q_(t){this.J_=t,this.Qe=null}tu(t,e){this.iu(e),this.Qe=null;for(let i=e;i<t.length;++i){let e=t[i],s=this.G_.get(e.timeWeight);void 0===s&&(s=[],this.G_.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}nu(t,e){let i=Math.ceil(e/t);return null!==this.Qe&&this.Qe.su===i||(this.Qe={ja:this.eu(i),su:i}),this.Qe.ja}iu(t){if(0===t)return void this.G_.clear();let e=[];for(let i of(this.G_.forEach((i,s)=>{t<=i[0].index?e.push(s):i.splice(tA(i,t,e=>e.index<t),1/0)}),e))this.G_.delete(i)}eu(t){let e=[];for(let i of Array.from(this.G_.keys()).sort((t,e)=>e-t)){if(!this.G_.get(i))continue;let s=e;e=[];let n=s.length,r=0,l=P(this.G_.get(i)),h=l.length,o=1/0,a=-1/0;for(let i=0;i<h;i++){let h=l[i],u=h.index;for(;r<n;){let t=s[r],i=t.index;if(!(i<u)){o=i;break}r++,e.push(t),a=i,o=1/0}if(o-u>=t&&u-a>=t)e.push(h),a=u;else if(this.J_)return s}for(;r<n;r++)e.push(s[r])}return e}}class is{constructor(t){this.ru=t}hu(){return null===this.ru?null:new it(Math.floor(this.ru.Os()),Math.ceil(this.ru.ui()))}lu(){return this.ru}static au(){return new is(null)}}function ir(t,e){return t.weight>e.weight?t:e}class il{constructor(t,e,i,s){this.o_=0,this.ou=null,this._u=[],this.wo=null,this.bo=null,this.uu=new ii,this.cu=new Map,this.du=is.au(),this.fu=!0,this.vu=new Y,this.pu=new Y,this.mu=new Y,this.bu=null,this.wu=null,this.gu=[],this.cn=e,this.ko=i,this.Mu=e.rightOffset,this.xu=e.barSpacing,this.$i=t,this.U_=s,this.Su(),this.uu.Q_(e.uniformDistribution)}W(){return this.cn}ku(t){j(this.ko,t),this.yu(),this.Su()}Hh(t,e){var i;j(this.cn,t),this.cn.fixLeftEdge&&this.Cu(),this.cn.fixRightEdge&&this.Tu(),void 0!==t.barSpacing&&this.$i.Gn(t.barSpacing),void 0!==t.rightOffset&&this.$i.Jn(t.rightOffset),void 0!==t.minBarSpacing&&this.$i.Gn(null!=(i=t.barSpacing)?i:this.xu),this.yu(),this.Su(),this.mu.m()}mn(t){var e,i;return null!=(i=null==(e=this._u[t])?void 0:e.time)?i:null}Ui(t){var e;return null!=(e=this._u[t])?e:null}Da(t,e){if(this._u.length<1)return null;if(this.U_.key(t)>this.U_.key(this._u[this._u.length-1].time))return e?this._u.length-1:null;let i=tA(this._u,this.U_.key(t),(t,e)=>this.U_.key(t.time)<e);return this.U_.key(t)<this.U_.key(this._u[i].time)?e?i:null:i}Ni(){return 0===this.o_||0===this._u.length||null===this.ou}Ra(){return this._u.length>0}Xs(){return this.Pu(),this.du.hu()}Ru(){return this.Pu(),this.du.lu()}Du(){let t=this.Xs();if(null===t)return null;let e={from:t.Os(),to:t.ui()};return this.Ou(e)}Ou(t){let e=Math.round(t.from),i=Math.round(t.to),s=D(this.Au()),n=D(this.Bu());return{from:D(this.Ui(Math.max(s,e))),to:D(this.Ui(Math.min(n,i)))}}Vu(t){return{from:D(this.Da(t.from,!0)),to:D(this.Da(t.to,!0))}}Hi(){return this.o_}x_(t){if(!isFinite(t)||t<=0||this.o_===t)return;let e=this.Ru(),i=this.o_;if(this.o_=t,this.fu=!0,this.cn.lockVisibleTimeRangeOnResize&&0!==i){let e=this.xu*t/i;this.xu=e}this.cn.fixLeftEdge&&null!==e&&0>=e.Os()&&(this.Mu-=Math.round((i-t)/this.xu)+1,this.fu=!0),this.Iu(),this.zu()}It(t){if(this.Ni()||!q(t))return 0;let e=this.Lu()+this.Mu-t;return this.o_-(e+.5)*this.xu-1}Js(t,e){let i=this.Lu(),s=void 0===e?0:e.from,n=void 0===e?t.length:e.to;for(let e=s;e<n;e++){let s=t[e].ot,n=i+this.Mu-s,r=this.o_-(n+.5)*this.xu-1;t[e].nt=r}}Eu(t){return Math.ceil(this.Nu(t))}Jn(t){this.fu=!0,this.Mu=t,this.zu(),this.$i.Fu(),this.$i.$h()}he(){return this.xu}Gn(t){this.Wu(t),this.zu(),this.$i.Fu(),this.$i.$h()}ju(){return this.Mu}ja(){if(this.Ni())return null;if(null!==this.wu)return this.wu;let t=this.xu,e=5*(this.$i.W().layout.fontSize+4)/8*(this.cn.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=D(this.Xs()),n=Math.max(s.Os(),s.Os()-i),r=Math.max(s.ui(),s.ui()-i),l=this.uu.nu(t,e),h=this.Au()+i,o=this.Bu()-i,a=this.Hu(),u=this.cn.fixLeftEdge||a,c=this.cn.fixRightEdge||a,d=0;for(let t of l){let i;n<=t.index&&t.index<=r&&(d<this.gu.length?((i=this.gu[d]).coord=this.It(t.index),i.label=this.$u(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.It(t.index),label:this.$u(t),weight:t.weight},this.gu.push(i)),this.xu>e/2&&!a?i.needAlignCoordinate=!1:i.needAlignCoordinate=u&&t.index<=h||c&&t.index>=o,d++)}return this.gu.length=d,this.wu=this.gu,this.gu}Uu(){this.fu=!0,this.Gn(this.cn.barSpacing),this.Jn(this.cn.rightOffset)}qu(t){this.fu=!0,this.ou=t,this.zu(),this.Cu()}Yu(t,e){let i=this.Nu(t),s=this.he();this.Gn(s+s/10*e),this.cn.rightBarStaysOnScroll||this.Jn(this.ju()+(i-this.Nu(t)))}Zo(t){this.wo&&this.i_(),null===this.bo&&null===this.bu&&(this.Ni()||(this.bo=t,this.Xu()))}Go(t){if(null===this.bu)return;let e=tD(this.o_-t,0,this.o_),i=tD(this.o_-D(this.bo),0,this.o_);0!==e&&0!==i&&this.Gn(this.bu.he*e/i)}Jo(){null!==this.bo&&(this.bo=null,this.Ku())}Qo(t){null===this.wo&&null===this.bu&&(this.Ni()||(this.wo=t,this.Xu()))}t_(t){if(null===this.wo)return;let e=(this.wo-t)/this.he();this.Mu=D(this.bu).ju+e,this.fu=!0,this.zu()}i_(){null!==this.wo&&(this.wo=null,this.Ku())}Zu(){this.Gu(this.cn.rightOffset)}Gu(t,e=400){if(!isFinite(t))throw RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw RangeError("animationDuration (optional) must be finite positive number");let i=this.Mu,s=performance.now();this.$i.Xn({Ju:t=>(t-s)/e>=1,Qu:n=>{let r=(n-s)/e;return r>=1?t:i+(t-i)*r}})}bt(t,e){this.fu=!0,this._u=t,this.uu.tu(t,e),this.zu()}tc(){return this.vu}nc(){return this.pu}sc(){return this.mu}Lu(){return this.ou||0}ec(t){let e=t.Z_();this.Wu(this.o_/e),this.Mu=t.ui()-this.Lu(),this.zu(),this.fu=!0,this.$i.Fu(),this.$i.$h()}rc(){let t=this.Au(),e=this.Bu();null!==t&&null!==e&&this.ec(new it(t,e+this.cn.rightOffset))}hc(t){let e=new it(t.from,t.to);this.ec(e)}qi(t){return void 0!==this.ko.timeFormatter?this.ko.timeFormatter(t.originalTime):this.U_.formatHorzItem(t.time)}Hu(){let{handleScroll:t,handleScale:e}=this.$i.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Au(){return 0===this._u.length?null:0}Bu(){return 0===this._u.length?null:this._u.length-1}lc(t){return(this.o_-1-t)/this.xu}Nu(t){let e=this.lc(t);return Math.round(1e6*(this.Lu()+this.Mu-e))/1e6}Wu(t){let e=this.xu;this.xu=t,this.Iu(),e!==this.xu&&(this.fu=!0,this.ac())}Pu(){if(!this.fu)return;if(this.fu=!1,this.Ni())return void this.oc(is.au());let t=this.Lu(),e=this.o_/this.xu,i=this.Mu+t,s=new it(i-e+1,i);this.oc(new is(s))}Iu(){let t=this._c();if(this.xu<t&&(this.xu=t,this.fu=!0),0!==this.o_){let t=.5*this.o_;this.xu>t&&(this.xu=t,this.fu=!0)}}_c(){return this.cn.fixLeftEdge&&this.cn.fixRightEdge&&0!==this._u.length?this.o_/this._u.length:this.cn.minBarSpacing}zu(){let t=this.uc();this.Mu>t&&(this.Mu=t,this.fu=!0);let e=this.cc();null!==e&&this.Mu<e&&(this.Mu=e,this.fu=!0)}cc(){let t=this.Au(),e=this.ou;return null===t||null===e?null:t-e-1+(this.cn.fixLeftEdge?this.o_/this.xu:Math.min(2,this._u.length))}uc(){return this.cn.fixRightEdge?0:this.o_/this.xu-Math.min(2,this._u.length)}Xu(){this.bu={he:this.he(),ju:this.ju()}}Ku(){this.bu=null}$u(t){let e=this.cu.get(t.weight);return void 0===e&&(e=new e6(t=>this.dc(t),this.U_),this.cu.set(t.weight,e)),e.q_(t)}dc(t){return this.U_.formatTickmark(t,this.ko)}oc(t){let e=this.du;this.du=t,ie(e.hu(),this.du.hu())||this.vu.m(),ie(e.lu(),this.du.lu())||this.pu.m(),this.ac()}ac(){this.wu=null}yu(){this.ac(),this.cu.clear()}Su(){this.U_.updateFormatter(this.ko)}Cu(){if(!this.cn.fixLeftEdge)return;let t=this.Au();if(null===t)return;let e=this.Xs();if(null===e)return;let i=e.Os()-t;if(i<0){let t=this.Mu-i-1;this.Jn(t)}this.Iu()}Tu(){this.zu(),this.Iu()}}class ih{K(t,e,i){t.useMediaCoordinateSpace(t=>this.Z(t,e,i))}wl(t,e,i){t.useMediaCoordinateSpace(t=>this.fc(t,e,i))}fc(t,e,i){}}class io extends ih{constructor(t){super(),this.vc=new Map,this.zt=t}Z(t){}fc(t){if(!this.zt.yt)return;let{context:e,mediaSize:i}=t,s=0;for(let t of this.zt.mc){if(0===t.Zt.length)continue;e.font=t.R;let n=this.bc(e,t.Zt);n>i.width?t.Yu=i.width/n:t.Yu=1,s+=t.wc*t.Yu}let n=0;switch(this.zt.gc){case"top":n=0;break;case"center":n=Math.max((i.height-s)/2,0);break;case"bottom":n=Math.max(i.height-s,0)}for(let t of(e.fillStyle=this.zt.O,this.zt.mc)){e.save();let s=0;switch(this.zt.Mc){case"left":e.textAlign="left",s=t.wc/2;break;case"center":e.textAlign="center",s=i.width/2;break;case"right":e.textAlign="right",s=i.width-1-t.wc/2}e.translate(s,n),e.textBaseline="top",e.font=t.R,e.scale(t.Yu,t.Yu),e.fillText(t.Zt,0,t.xc),e.restore(),n+=t.wc*t.Yu}}bc(t,e){let i=this.Sc(t.font),s=i.get(e);return void 0===s&&(s=t.measureText(e).width,i.set(e,s)),s}Sc(t){let e=this.vc.get(t);return void 0===e&&(e=new Map,this.vc.set(t,e)),e}}class ia{constructor(t){this.ft=!0,this.Ft={yt:!1,O:"",mc:[],gc:"center",Mc:"center"},this.Wt=new io(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){let t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.O=t.color,e.Mc=t.horzAlign,e.gc=t.vertAlign,e.mc=[{Zt:t.text,R:tt(t.fontSize,t.fontFamily,t.fontStyle),wc:1.2*t.fontSize,xc:0,Yu:0}])}}class iu extends ty{constructor(t,e){super(),this.cn=e,this.wn=new ia(this)}Rn(){return[]}Pn(){return[this.wn]}W(){return this.cn}On(){this.wn.bt()}}!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(u||(u={}));class ic{constructor(t,e,i){this.kc=[],this.yc=[],this.o_=0,this.Cc=null,this.Tc=new Y,this.Pc=new Y,this.Rc=null,this.Dc=t,this.cn=e,this.U_=i,this.Oc=new te(this),this.kl=new il(this,e.timeScale,this.cn.localization,i),this.vt=new tx(this,e.crosshair),this.Ac=new eY(e.crosshair),this.Bc=new iu(this,e.watermark),this.Vc(),this.kc[0].M_(2e3),this.Ic=this.zc(0),this.Lc=this.zc(1)}Kl(){this.Ec(tS.es())}$h(){this.Ec(tS.ss())}aa(){this.Ec(new tS(1))}Zl(t){let e=this.Nc(t);this.Ec(e)}Fc(){return this.Cc}Wc(t){let e=this.Cc;this.Cc=t,null!==e&&this.Zl(e.jc),null!==t&&this.Zl(t.jc)}W(){return this.cn}Hh(t){j(this.cn,t),this.kc.forEach(e=>e.m_(t)),void 0!==t.timeScale&&this.kl.Hh(t.timeScale),void 0!==t.localization&&this.kl.ku(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Tc.m(),this.Ic=this.zc(0),this.Lc=this.zc(1),this.Kl()}Hc(t,e){if("left"===t)return void this.Hh({leftPriceScale:e});if("right"===t)return void this.Hh({rightPriceScale:e});let i=this.$c(t);null!==i&&(i.Dt.Hh(e),this.Tc.m())}$c(t){for(let e of this.kc){let i=e.b_(t);if(null!==i)return{Ht:e,Dt:i}}return null}St(){return this.kl}Uc(){return this.kc}qc(){return this.Bc}Yc(){return this.vt}Xc(){return this.Pc}Kc(t,e){t.zo(e),this.Fu()}x_(t){this.o_=t,this.kl.x_(this.o_),this.kc.forEach(e=>e.x_(t)),this.Fu()}Vc(t){let e=new e7(this.kl,this);void 0!==t?this.kc.splice(t,0,e):this.kc.push(e);let i=void 0===t?this.kc.length-1:t,s=tS.es();return s.Nn(i,{Fn:0,Wn:!0}),this.Ec(s),e}D_(t,e,i){t.D_(e,i)}O_(t,e,i){t.O_(e,i),this.Gl(),this.Ec(this.Zc(t,2))}A_(t,e){t.A_(e),this.Ec(this.Zc(t,2))}B_(t,e,i){e.Do()||t.B_(e,i)}V_(t,e,i){e.Do()||(t.V_(e,i),this.Gl(),this.Ec(this.Zc(t,2)))}I_(t,e){e.Do()||(t.I_(e),this.Ec(this.Zc(t,2)))}L_(t,e){t.L_(e),this.Ec(this.Zc(t,2))}Gc(t){this.kl.Zo(t)}Jc(t,e){let i=this.St();if(i.Ni()||0===e)return;let s=i.Hi();t=Math.max(1,Math.min(t,s)),i.Yu(t,e),this.Fu()}Qc(t){this.td(0),this.nd(t),this.sd()}ed(t){this.kl.Go(t),this.Fu()}rd(){this.kl.Jo(),this.$h()}td(t){this.kl.Qo(t)}nd(t){this.kl.t_(t),this.Fu()}sd(){this.kl.i_(),this.$h()}wt(){return this.yc}hd(t,e,i,s,n){this.vt.gn(t,e);let r=NaN,l=this.kl.Eu(t),h=this.kl.Xs();null!==h&&(l=Math.min(Math.max(h.Os(),l),h.ui()));let o=s.vn(),a=o.Ct();null!==a&&(r=o.pn(e,a)),r=this.Ac.Oa(r,l,s),this.vt.kn(l,r,s),this.aa(),n||this.Pc.m(this.vt.xt(),{x:t,y:e},i)}ld(t,e,i){let s=i.vn(),n=s.Ct(),r=s.Rt(t,D(n)),l=this.kl.Da(e,!0),h=this.kl.It(D(l));this.hd(h,r,null,i,!0)}ad(t){this.Yc().Cn(),this.aa(),t||this.Pc.m(null,null,null)}Gl(){let t=this.vt.Ht();if(null!==t){let e=this.vt.xn(),i=this.vt.Sn();this.hd(e,i,null,t)}this.vt.On()}od(t,e,i){let s=this.kl.mn(0);void 0!==e&&void 0!==i&&this.kl.bt(e,i);let n=this.kl.mn(0),r=this.kl.Lu(),l=this.kl.Xs();if(null!==l&&null!==s&&null!==n){let e=l.Kr(r),h=this.U_.key(s)>this.U_.key(n),o=null!==t&&t>r&&!h,a=this.kl.W().allowShiftVisibleRangeOnWhitespaceReplacement,u=e&&(void 0!==i||a)&&this.kl.W().shiftVisibleRangeOnNewBar;if(o&&!u){let e=t-r;this.kl.Jn(this.kl.ju()-e)}}this.kl.qu(t)}ta(t){null!==t&&t.N_()}cr(t){let e=this.kc.find(e=>e.$o().includes(t));return void 0===e?null:e}Fu(){this.Bc.On(),this.kc.forEach(t=>t.N_()),this.Gl()}S(){this.kc.forEach(t=>t.S()),this.kc.length=0,this.cn.localization.priceFormatter=void 0,this.cn.localization.percentageFormatter=void 0,this.cn.localization.timeFormatter=void 0}_d(){return this.Oc}mr(){return this.Oc.W()}w_(){return this.Tc}ud(t,e,i){let s=this.kc[0],n=this.dd(e,t,s,i);return this.yc.push(n),1===this.yc.length?this.Kl():this.$h(),n}fd(t){let e=this.cr(t),i=this.yc.indexOf(t);E(-1!==i,"Series not found"),this.yc.splice(i,1),D(e).Yo(t),t.S&&t.S()}Xl(t,e){let i=D(this.cr(t));i.Yo(t);let s=this.$c(e);if(null===s){let s=t.Ki();i.Uo(t,e,s)}else{let n=s.Ht===i?t.Ki():void 0;s.Ht.Uo(t,e,n)}}rc(){let t=tS.ss();t.$n(),this.Ec(t)}vd(t){let e=tS.ss();e.Yn(t),this.Ec(e)}Zn(){let t=tS.ss();t.Zn(),this.Ec(t)}Gn(t){let e=tS.ss();e.Gn(t),this.Ec(e)}Jn(t){let e=tS.ss();e.Jn(t),this.Ec(e)}Xn(t){let e=tS.ss();e.Xn(t),this.Ec(e)}Un(){let t=tS.ss();t.Un(),this.Ec(t)}pd(){return this.cn.rightPriceScale.visible?"right":"left"}md(){return this.Lc}q(){return this.Ic}Bt(t){let e=this.Lc,i=this.Ic;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.Rc||this.Rc.Ts!==i||this.Rc.Ps!==e)this.Rc={Ts:i,Ps:e,bd:new Map};else{let e=this.Rc.bd.get(t);if(void 0!==e)return e}let s=function(t,e,i){let[s,n,r,l]=H(t),[h,o,a,u]=H(e),c=[R(s+i*(h-s)),R(n+i*(o-n)),R(r+i*(a-r)),$(l+i*(u-l))];return`rgba(${c[0]}, ${c[1]}, ${c[2]}, ${c[3]})`}(i,e,t/100);return this.Rc.bd.set(t,s),s}Zc(t,e){let i=new tS(e);if(null!==t){let s=this.kc.indexOf(t);i.Nn(s,{Fn:e})}return i}Nc(t,e){return void 0===e&&(e=2),this.Zc(this.cr(t),e)}Ec(t){this.Dc&&this.Dc(t),this.kc.forEach(t=>t.W_().Uh().bt())}dd(t,e,i,s){let n=new eV(this,t,e,i,s),r=void 0!==t.priceScaleId?t.priceScaleId:this.pd();return i.Uo(n,r),tM(r)||n.Hh(t),n}zc(t){let e=this.cn.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}function id(t){return!U(t)&&!G(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(c||(c={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(d||(d={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(f||(f={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(m||(m={}));let im=t=>t.getUTCFullYear();class ip{constructor(t="yyyy-MM-dd",e="default"){this.wd=t,this.gd=e}q_(t){return function(t,e,i){return e.replace(/yyyy/g,tC(im(t),4)).replace(/yy/g,tC(im(t)%100,2)).replace(/MMMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})).replace(/MMM/g,new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})).replace(/MM/g,tC(t.getUTCMonth()+1,2)).replace(/dd/g,tC(t.getUTCDate(),2))}(t,this.wd,this.gd)}}class iv{constructor(t){this.Md=t||"%h:%m:%s"}q_(t){return this.Md.replace("%h",tC(t.getUTCHours(),2)).replace("%m",tC(t.getUTCMinutes(),2)).replace("%s",tC(t.getUTCSeconds(),2))}}let ig={xd:"yyyy-MM-dd",Sd:"%h:%m:%s",kd:" ",yd:"default"};class ib{constructor(t={}){let e=Object.assign(Object.assign({},ig),t);this.Cd=new ip(e.xd,e.yd),this.Td=new iv(e.Sd),this.Pd=e.kd}q_(t){return`${this.Cd.q_(t)}${this.Pd}${this.Td.q_(t)}`}}function iw(t){return 60*t*6e4}function iy(t){return 60*t*1e3}let ix=[{Rd:1e3,Dd:10},{Rd:iy(1),Dd:20},{Rd:iy(5),Dd:21},{Rd:iy(30),Dd:22},{Rd:iw(1),Dd:30},{Rd:iw(3),Dd:31},{Rd:iw(6),Dd:32},{Rd:iw(12),Dd:33}];function iM(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=ix.length-1;i>=0;--i)if(Math.floor(e.getTime()/ix[i].Rd)!==Math.floor(t.getTime()/ix[i].Rd))return ix[i].Dd;return 0}function iS(t){let e=t;if(G(t)&&(e=i_(t)),!id(e))throw Error("time must be of type BusinessDay");return{Od:Math.round(new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0)).getTime()/1e3),Ad:e}}function iC(t){if(!U(t))throw Error("time must be of type isUTCTimestamp");return{Od:t}}function i_(t){let e=new Date(t);if(isNaN(e.getTime()))throw Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function ik(t){G(t.time)&&(t.time=i_(t.time))}class iz{options(){return this.cn}setOptions(t){this.cn=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?t.forEach(ik):ik(t)}createConverterToInternalObj(t){return D(0===t.length?null:id(t[0].time)||G(t[0].time)?iS:iC)}key(t){return"object"==typeof t&&"Od"in t?t.Od:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){return void 0===t.Ad?new Date(1e3*t.Od).getTime():new Date(Date.UTC(t.Ad.year,t.Ad.month-1,t.Ad.day)).getTime()}convertHorzItemToInternal(t){return U(t)?iC(t):id(t)?iS(t):iS(i_(t))}updateFormatter(t){if(!this.cn)return;let e=t.dateFormat;this.cn.timeScale.timeVisible?this.Bd=new ib({xd:e,Sd:this.cn.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",kd:"   ",yd:t.locale}):this.Bd=new ip(e,t.locale)}formatHorzItem(t){return this.Bd.q_(new Date(1e3*t.Od))}formatTickmark(t,e){let i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this.cn.timeScale.timeVisible,this.cn.timeScale.secondsVisible),s=this.cn.timeScale;if(void 0!==s.tickMarkFormatter){let n=s.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==n)return n}return function(t,e,i){let s={};switch(e){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}let n=new Date(void 0===t.Ad?1e3*t.Od:Date.UTC(t.Ad.year,t.Ad.month-1,t.Ad.day));return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()).toLocaleString(i,s)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(ir,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.Od,s=null!==i?new Date(1e3*i):null,n=0;for(let r=e;r<t.length;++r){let e=t[r],l=new Date(1e3*e.time.Od);null!==s&&(e.timeWeight=iM(l,s)),n+=e.time.Od-(i||e.time.Od),i=e.time.Od,s=l}if(0===e&&t.length>1){let e=Math.ceil(n/(t.length-1)),i=new Date(1e3*(t[0].time.Od-e));t[0].timeWeight=iM(new Date(1e3*t[0].time.Od),i)}}(t,e)}static Vd(t){return j({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}let iL="undefined"!=typeof window;function iT(){return!!iL&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function iO(){return!!iL&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function iE(t,e,i){let s=(t.Id-e.Id)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class iP{constructor(t,e,i,s){this.zd=null,this.Ld=null,this.Ed=null,this.Nd=null,this.Fd=null,this.Wd=0,this.jd=0,this.Hd=t,this.$d=e,this.Ud=i,this.rs=s}qd(t,e){if(null!==this.zd){if(this.zd.ot===e)return void(this.zd.Id=t);if(Math.abs(this.zd.Id-t)<this.rs)return}this.Nd=this.Ed,this.Ed=this.Ld,this.Ld=this.zd,this.zd={ot:e,Id:t}}Dr(t,e){var i,s,n,r,l,h;if(null===this.zd||null===this.Ld||e-this.zd.ot>50)return;let o=0,a=iE(this.zd,this.Ld,this.$d),u=(i=this.zd,s=this.Ld,i.Id-s.Id),c=[a],d=[u];if(o+=u,null!==this.Ed){let t=iE(this.Ld,this.Ed,this.$d);if(Math.sign(t)===Math.sign(a)){let e=(n=this.Ld,r=this.Ed,n.Id-r.Id);if(c.push(t),d.push(e),o+=e,null!==this.Nd){let t=iE(this.Ed,this.Nd,this.$d);if(Math.sign(t)===Math.sign(a)){let e=(l=this.Ed,h=this.Nd,l.Id-h.Id);c.push(t),d.push(e),o+=e}}}}let f=0;for(let t=0;t<c.length;++t)f+=d[t]/o*c[t];Math.abs(f)<this.Hd||(this.Fd={Id:t,ot:e},this.jd=f,this.Wd=function(t,e){let i=Math.log(e);return Math.log(-(i/t))/i}(Math.abs(f),this.Ud))}Qu(t){let e=D(this.Fd),i=t-e.ot;return e.Id+this.jd*(Math.pow(this.Ud,i)-1)/Math.log(this.Ud)}Ju(t){return null===this.Fd||this.Yd(t)===this.Wd}Yd(t){return Math.min(t-D(this.Fd).ot,this.Wd)}}function iD(t,e){let i=D(t.ownerDocument).createElement("canvas");t.appendChild(i);let s=function(t,e){if("device-pixel-content-box"===e.type)return new g(t,e.transform,e.options);throw Error("Unsupported binding target")}(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return s.resizeCanvasElement(e),s}function iN(t){var e;t.width=1,t.height=1,null==(e=t.getContext("2d"))||e.clearRect(0,0,1,1)}function iW(t,e,i,s){t.wl&&t.wl(e,i,s)}function iR(t,e,i,s){t.K(e,i,s)}function i$(t,e,i,s){for(let n of t(i,s)){let t=n.gt();null!==t&&e(t)}}class iF{constructor(t,e,i){this.Xd=0,this.Kd=null,this.Zd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Gd=0,this.Jd=null,this.Qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.tf=null,this.if=!1,this.nf=null,this.sf=null,this.ef=!1,this.rf=!1,this.hf=!1,this.lf=null,this.af=null,this._f=null,this.uf=null,this.cf=null,this.df=null,this.ff=null,this.vf=0,this.pf=!1,this.mf=!1,this.bf=!1,this.wf=0,this.gf=null,this.Mf=!iO(),this.xf=t=>{this.Sf(t)},this.kf=t=>{if(this.yf(t)){let e=this.Cf(t);if(++this.Gd,this.Jd&&this.Gd>1){let{Tf:i}=this.Pf(iA(t),this.Qd);i<30&&!this.hf&&this.Rf(e,this.Of.Df),this.Af()}}else{let e=this.Cf(t);if(++this.Xd,this.Kd&&this.Xd>1){let{Tf:i}=this.Pf(iA(t),this.Zd);i<5&&!this.rf&&this.Bf(e,this.Of.Vf),this.If()}}},this.zf=t,this.Of=e,this.cn=i,this.Lf()}S(){null!==this.lf&&(this.lf(),this.lf=null),null!==this.af&&(this.af(),this.af=null),null!==this.uf&&(this.uf(),this.uf=null),null!==this.cf&&(this.cf(),this.cf=null),null!==this.df&&(this.df(),this.df=null),null!==this._f&&(this._f(),this._f=null),this.Ef(),this.If()}Nf(t){this.uf&&this.uf();let e=this.Ff.bind(this);if(this.uf=()=>{this.zf.removeEventListener("mousemove",e)},this.zf.addEventListener("mousemove",e),this.yf(t))return;let i=this.Cf(t);this.Bf(i,this.Of.Wf),this.Mf=!0}If(){null!==this.Kd&&clearTimeout(this.Kd),this.Xd=0,this.Kd=null,this.Zd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Af(){null!==this.Jd&&clearTimeout(this.Jd),this.Gd=0,this.Jd=null,this.Qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Ff(t){if(this.bf||null!==this.sf||this.yf(t))return;let e=this.Cf(t);this.Bf(e,this.Of.jf),this.Mf=!0}Hf(t){let e=iV(t.changedTouches,D(this.gf));if(null===e||(this.wf=iH(t),null!==this.ff)||this.mf)return;this.pf=!0;let{$f:i,Uf:s,Tf:n}=this.Pf(iA(e),D(this.sf));if(this.ef||!(n<5)){if(!this.ef){let t=.5*i,e=s>=t&&!this.cn.qf(),n=t>s&&!this.cn.Yf();e||n||(this.mf=!0),this.ef=!0,this.hf=!0,this.Ef(),this.Af()}if(!this.mf){let i=this.Cf(t,e);this.Rf(i,this.Of.Xf),iI(t)}}}Kf(t){if(0!==t.button)return;let{Tf:e}=this.Pf(iA(t),D(this.nf));if(e>=5&&(this.rf=!0,this.If()),this.rf){let e=this.Cf(t);this.Bf(e,this.Of.Zf)}}Pf(t,e){let i=Math.abs(e.nt-t.nt),s=Math.abs(e.st-t.st);return{$f:i,Uf:s,Tf:i+s}}Gf(t){let e=iV(t.changedTouches,D(this.gf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.gf=null,this.wf=iH(t),this.Ef(),this.sf=null,this.df&&(this.df(),this.df=null);let i=this.Cf(t,e);if(this.Rf(i,this.Of.Jf),++this.Gd,this.Jd&&this.Gd>1){let{Tf:t}=this.Pf(iA(e),this.Qd);t<30&&!this.hf&&this.Rf(i,this.Of.Df),this.Af()}else this.hf||(this.Rf(i,this.Of.Qf),this.Of.Qf&&iI(t));0===this.Gd&&iI(t),0===t.touches.length&&this.if&&(this.if=!1,iI(t))}Sf(t){if(0!==t.button)return;let e=this.Cf(t);if(this.nf=null,this.bf=!1,this.cf&&(this.cf(),this.cf=null),iT()&&this.zf.ownerDocument.documentElement.removeEventListener("mouseleave",this.xf),!this.yf(t))if(this.Bf(e,this.Of.tv),++this.Xd,this.Kd&&this.Xd>1){let{Tf:i}=this.Pf(iA(t),this.Zd);i<5&&!this.rf&&this.Bf(e,this.Of.Vf),this.If()}else this.rf||this.Bf(e,this.Of.iv)}Ef(){null!==this.tf&&(clearTimeout(this.tf),this.tf=null)}nv(t){if(null!==this.gf)return;let e=t.changedTouches[0];this.gf=e.identifier,this.wf=iH(t);let i=this.zf.ownerDocument.documentElement;this.hf=!1,this.ef=!1,this.mf=!1,this.sf=iA(e),this.df&&(this.df(),this.df=null);{let e=this.Hf.bind(this),s=this.Gf.bind(this);this.df=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.Ef(),this.tf=setTimeout(this.sv.bind(this,t),240)}let s=this.Cf(t,e);this.Rf(s,this.Of.ev),this.Jd||(this.Gd=0,this.Jd=setTimeout(this.Af.bind(this),500),this.Qd=iA(e))}rv(t){if(0!==t.button)return;let e=this.zf.ownerDocument.documentElement;iT()&&e.addEventListener("mouseleave",this.xf),this.rf=!1,this.nf=iA(t),this.cf&&(this.cf(),this.cf=null);{let t=this.Kf.bind(this),i=this.Sf.bind(this);this.cf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.bf=!0,this.yf(t))return;let i=this.Cf(t);this.Bf(i,this.Of.hv),this.Kd||(this.Xd=0,this.Kd=setTimeout(this.If.bind(this),500),this.Zd=iA(t))}Lf(){var t;this.zf.addEventListener("mouseenter",this.Nf.bind(this)),this.zf.addEventListener("touchcancel",this.Ef.bind(this));{let t=this.zf.ownerDocument,e=t=>{this.Of.lv&&(t.composed&&this.zf.contains(t.composedPath()[0])||t.target&&this.zf.contains(t.target)||this.Of.lv())};this.af=()=>{t.removeEventListener("touchstart",e)},this.lf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}iO()&&(this._f=()=>{this.zf.removeEventListener("dblclick",this.kf)},this.zf.addEventListener("dblclick",this.kf)),this.zf.addEventListener("mouseleave",this.av.bind(this)),this.zf.addEventListener("touchstart",this.nv.bind(this),{passive:!0}),t=this.zf,iL&&void 0!==window.chrome&&t.addEventListener("mousedown",t=>{if(1===t.button)return t.preventDefault(),!1}),this.zf.addEventListener("mousedown",this.rv.bind(this)),this.ov(),this.zf.addEventListener("touchmove",()=>{},{passive:!1})}ov(){void 0===this.Of._v&&void 0===this.Of.uv&&void 0===this.Of.cv||(this.zf.addEventListener("touchstart",t=>this.dv(t.touches),{passive:!0}),this.zf.addEventListener("touchmove",t=>{if(2===t.touches.length&&null!==this.ff&&void 0!==this.Of.uv){let e=iB(t.touches[0],t.touches[1])/this.vf;this.Of.uv(this.ff,e),iI(t)}},{passive:!1}),this.zf.addEventListener("touchend",t=>{this.dv(t.touches)}))}dv(t){1===t.length&&(this.pf=!1),2!==t.length||this.pf||this.if?this.fv():this.vv(t)}vv(t){let e=this.zf.getBoundingClientRect()||{left:0,top:0};this.ff={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.vf=iB(t[0],t[1]),void 0!==this.Of._v&&this.Of._v(),this.Ef()}fv(){null!==this.ff&&(this.ff=null,void 0!==this.Of.cv&&this.Of.cv())}av(t){if(this.uf&&this.uf(),this.yf(t)||!this.Mf)return;let e=this.Cf(t);this.Bf(e,this.Of.pv),this.Mf=!iO()}sv(t){let e=iV(t.touches,D(this.gf));if(null===e)return;let i=this.Cf(t,e);this.Rf(i,this.Of.mv),this.hf=!0,this.if=!0}yf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:iH(t)<this.wf+500}Rf(t,e){e&&e.call(this.Of,t)}Bf(t,e){e&&e.call(this.Of,t)}Cf(t,e){let i=e||t,s=this.zf.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,bv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,wv:t.type,gv:i.target,Mv:t.view,xv:()=>{"touchstart"!==t.type&&iI(t)}}}}function iB(t,e){let i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function iI(t){t.cancelable&&t.preventDefault()}function iA(t){return{nt:t.pageX,st:t.pageY}}function iH(t){return t.timeStamp||performance.now()}function iV(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function iY(t){return{jc:t.jc,Sv:{wr:t.kv.externalId},yv:t.kv.cursorStyle}}function ij(t,e){return i=>{var s,n,r,l;return(null!=(n=null==(s=i.Dt())?void 0:s.Ta())?n:"")!==e?[]:null!=(l=null==(r=i.ca)?void 0:r.call(i,t))?l:[]}}function iU(t,e,i,s){if(!t.length)return;let n=0,r=t[0].Vt(s,!0),l=1===e?i/2-(t[0].Oi()-r/2):t[0].Oi()-r/2-i/2;l=Math.max(0,l);for(let r=1;r<t.length;r++){let h=t[r],o=t[r-1],a=o.Vt(s,!1),u=h.Oi(),c=o.Oi();if(1===e?u>c-a:u<c+a){let s=c-a*e;h.Ai(s);let r=s-e*a/2;if((1===e?r<0:r>i)&&l>0){let s=Math.min(1===e?-1-r:r-i,l);for(let i=n;i<t.length;i++)t[i].Ai(t[i].Oi()+e*s);l-=s}}else n=r,l=1===e?c-a-u:u-(c+a)}}class iq{constructor(t,e,i,n){this.Li=null,this.Cv=null,this.Tv=!1,this.Pv=new et(200),this.Jr=null,this.Rv=0,this.Dv=!1,this.Ov=()=>{this.Dv||this.tn.Av().$t().$h()},this.Bv=()=>{this.Dv||this.tn.Av().$t().$h()},this.tn=t,this.cn=e,this.So=e.layout,this.Oc=i,this.Vv="left"===n,this.Iv=ij("normal",n),this.zv=ij("top",n),this.Lv=ij("bottom",n),this.Ev=document.createElement("div"),this.Ev.style.height="100%",this.Ev.style.overflow="hidden",this.Ev.style.width="25px",this.Ev.style.left="0",this.Ev.style.position="relative",this.Nv=iD(this.Ev,s({width:16,height:16})),this.Nv.subscribeSuggestedBitmapSizeChanged(this.Ov);let r=this.Nv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Fv=iD(this.Ev,s({width:16,height:16})),this.Fv.subscribeSuggestedBitmapSizeChanged(this.Bv);let l=this.Fv.canvasElement;l.style.position="absolute",l.style.zIndex="2",l.style.left="0",l.style.top="0";let h={hv:this.Wv.bind(this),ev:this.Wv.bind(this),Zf:this.jv.bind(this),Xf:this.jv.bind(this),lv:this.Hv.bind(this),tv:this.$v.bind(this),Jf:this.$v.bind(this),Vf:this.Uv.bind(this),Df:this.Uv.bind(this),Wf:this.qv.bind(this),pv:this.Yv.bind(this)};this.Xv=new iF(this.Fv.canvasElement,h,{qf:()=>!this.cn.handleScroll.vertTouchDrag,Yf:()=>!0})}S(){this.Xv.S(),this.Fv.unsubscribeSuggestedBitmapSizeChanged(this.Bv),iN(this.Fv.canvasElement),this.Fv.dispose(),this.Nv.unsubscribeSuggestedBitmapSizeChanged(this.Ov),iN(this.Nv.canvasElement),this.Nv.dispose(),null!==this.Li&&this.Li.Ko().p(this),this.Li=null}Kv(){return this.Ev}P(){return this.So.fontSize}Zv(){let t=this.Oc.W();return this.Jr!==t.R&&(this.Pv.ir(),this.Jr=t.R),t}Gv(){var t;if(null===this.Li)return 0;let e=0,i=this.Zv(),s=D(this.Nv.canvasElement.getContext("2d"));s.save();let n=this.Li.ja();s.font=this.Jv(),n.length>0&&(e=Math.max(this.Pv.xi(s,n[0].no),this.Pv.xi(s,n[n.length-1].no)));let r=this.Qv();for(let t=r.length;t--;){let i=this.Pv.xi(s,r[t].Zt());i>e&&(e=i)}let l=this.Li.Ct();if(null!==l&&null!==this.Cv){let t=this.Li.pn(1,l),i=this.Li.pn(this.Cv.height-2,l);e=Math.max(e,this.Pv.xi(s,this.Li.Fi(Math.floor(Math.min(t,i))+.11111111111111,l)),this.Pv.xi(s,this.Li.Fi(Math.ceil(Math.max(t,i))-.11111111111111,l)))}s.restore();let h=e||34;return(t=Math.ceil(i.C+i.T+i.V+i.I+5+h))+t%2}tp(t){null!==this.Cv&&n(this.Cv,t)||(this.Cv=t,this.Dv=!0,this.Nv.resizeCanvasElement(t),this.Fv.resizeCanvasElement(t),this.Dv=!1,this.Ev.style.width=`${t.width}px`,this.Ev.style.height=`${t.height}px`)}ip(){return D(this.Cv).width}Gi(t){this.Li!==t&&(null!==this.Li&&this.Li.Ko().p(this),this.Li=t,t.Ko().l(this.do.bind(this),this))}Dt(){return this.Li}ir(){let t=this.tn.np();this.tn.Av().$t().L_(t,D(this.Dt()))}sp(t){if(null===this.Cv)return;if(1!==t){this.ep(),this.Nv.applySuggestedBitmapSize();let t=y(this.Nv);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.rp(t),this.Ve(t)}),this.tn.hp(t,this.Lv),this.lp(t),this.tn.hp(t,this.Iv),this.ap(t))}this.Fv.applySuggestedBitmapSize();let e=y(this.Fv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.op(e),this.tn.hp(e,this.zv))}_p(){return this.Nv.bitmapSize}up(t,e,i){let s=this._p();s.width>0&&s.height>0&&t.drawImage(this.Nv.canvasElement,e,i)}bt(){var t;null==(t=this.Li)||t.ja()}Wv(t){if(null===this.Li||this.Li.Ni()||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Av().$t(),i=this.tn.np();this.Tv=!0,e.D_(i,this.Li,t.localY)}jv(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Av().$t(),i=this.tn.np(),s=this.Li;e.O_(i,s,t.localY)}Hv(){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let t=this.tn.Av().$t(),e=this.tn.np(),i=this.Li;this.Tv&&(this.Tv=!1,t.A_(e,i))}$v(t){if(null===this.Li||!this.cn.handleScale.axisPressedMouseMove.price)return;let e=this.tn.Av().$t(),i=this.tn.np();this.Tv=!1,e.A_(i,this.Li)}Uv(t){this.cn.handleScale.axisDoubleClickReset.price&&this.ir()}qv(t){null!==this.Li&&(!this.tn.Av().$t().W().handleScale.axisPressedMouseMove.price||this.Li.gh()||this.Li.Oo()||this.cp(1))}Yv(t){this.cp(0)}Qv(){let t=[],e=null===this.Li?void 0:this.Li;return(i=>{for(let s=0;s<i.length;++s){let n=i[s].Rn(this.tn.np(),e);for(let e=0;e<n.length;e++)t.push(n[e])}})(this.tn.np().$o()),t}rp({context:t,bitmapSize:e}){let{width:i,height:s}=e,n=this.tn.np().$t(),r=n.q(),l=n.md();r===l?tu(t,0,0,i,s,r):tf(t,0,0,i,s,r,l)}Ve({context:t,bitmapSize:e,horizontalPixelRatio:i}){let s;if(null===this.Cv||null===this.Li||!this.Li.W().borderVisible)return;t.fillStyle=this.Li.W().borderColor;let n=Math.max(1,Math.floor(this.Zv().C*i));s=this.Vv?e.width-n:0,t.fillRect(s,0,n,e.height)}lp(t){if(null===this.Cv||null===this.Li)return;let e=this.Li.ja(),i=this.Li.W(),s=this.Zv(),n=this.Vv?this.Cv.width-s.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:r,verticalPixelRatio:l})=>{t.fillStyle=i.borderColor;let h=Math.max(1,Math.floor(l)),o=Math.floor(.5*l),a=Math.round(s.T*r);for(let i of(t.beginPath(),e))t.rect(Math.floor(n*r),Math.round(i.La*l)-o,a,h);t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{var r;t.font=this.Jv(),t.fillStyle=null!=(r=i.textColor)?r:this.So.textColor,t.textAlign=this.Vv?"right":"left",t.textBaseline="middle";let l=this.Vv?Math.round(n-s.V):Math.round(n+s.T+s.V),h=e.map(e=>this.Pv.Mi(t,e.no));for(let i=e.length;i--;){let s=e[i];t.fillText(s.no,l,s.La+h[i])}})}ep(){if(null===this.Cv||null===this.Li)return;let t=this.Cv.height/2,e=[],i=this.Li.$o().slice(),s=this.tn.np(),n=this.Zv();this.Li===s.vr()&&this.tn.np().$o().forEach(t=>{s.dr(t)&&i.push(t)});let r=this.Li.Aa()[0],l=this.Li;i.forEach(i=>{let n=i.Rn(s,l);n.forEach(t=>{t.Ai(null),t.Bi()&&e.push(t)}),r===i&&n.length>0&&(t=n[0].ki())}),e.forEach(t=>t.Ai(t.ki())),this.Li.W().alignLabels&&this.dp(e,n,t)}dp(t,e,i){if(null===this.Cv)return;let s=t.filter(t=>t.ki()<=i),n=t.filter(t=>t.ki()>i);for(let i of(s.sort((t,e)=>e.ki()-t.ki()),s.length&&n.length&&n.push(s[0]),n.sort((t,e)=>t.ki()-e.ki()),t)){let t=Math.floor(i.Vt(e)/2),s=i.ki();s>-t&&s<t&&i.Ai(t),s>this.Cv.height-t&&s<this.Cv.height+t&&i.Ai(this.Cv.height-t)}iU(s,1,this.Cv.height,e),iU(n,-1,this.Cv.height,e)}ap(t){if(null===this.Cv)return;let e=this.Qv(),i=this.Zv(),s=this.Vv?"right":"left";e.forEach(e=>{e.Vi()&&e.gt(D(this.Li)).K(t,i,this.Pv,s)})}op(t){if(null===this.Cv||null===this.Li)return;let e=this.tn.Av().$t(),i=[],s=this.tn.np(),n=e.Yc().Rn(s,this.Li);n.length&&i.push(n);let r=this.Zv(),l=this.Vv?"right":"left";i.forEach(e=>{e.forEach(e=>{e.gt(D(this.Li)).K(t,r,this.Pv,l)})})}cp(t){this.Ev.style.cursor=1===t?"ns-resize":"default"}do(){let t=this.Gv();this.Rv<t&&this.tn.Av().$t().Kl(),this.Rv=t}Jv(){return tt(this.So.fontSize,this.So.fontFamily)}}function iG(t,e){var i,s;return null!=(s=null==(i=t._a)?void 0:i.call(t,e))?s:[]}function iJ(t,e){var i,s;return null!=(s=null==(i=t.Pn)?void 0:i.call(t,e))?s:[]}function iZ(t,e){var i,s;return null!=(s=null==(i=t.Ji)?void 0:i.call(t,e))?s:[]}function iX(t,e){var i,s;return null!=(s=null==(i=t.la)?void 0:i.call(t,e))?s:[]}class iK{constructor(t,e){this.Cv=s({width:0,height:0}),this.fp=null,this.vp=null,this.pp=null,this.mp=!1,this.bp=new Y,this.wp=new Y,this.gp=0,this.Mp=!1,this.xp=null,this.Sp=!1,this.kp=null,this.yp=null,this.Dv=!1,this.Ov=()=>{this.Dv||null===this.Cp||this.$i().$h()},this.Bv=()=>{this.Dv||null===this.Cp||this.$i().$h()},this.Tp=t,this.Cp=e,this.Cp.F_().l(this.Pp.bind(this),this,!0),this.Rp=document.createElement("td"),this.Rp.style.padding="0",this.Rp.style.position="relative";let i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Dp=document.createElement("td"),this.Dp.style.padding="0",this.Op=document.createElement("td"),this.Op.style.padding="0",this.Rp.appendChild(i),this.Nv=iD(i,s({width:16,height:16})),this.Nv.subscribeSuggestedBitmapSizeChanged(this.Ov);let n=this.Nv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Fv=iD(i,s({width:16,height:16})),this.Fv.subscribeSuggestedBitmapSizeChanged(this.Bv);let r=this.Fv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.Ap=document.createElement("tr"),this.Ap.appendChild(this.Dp),this.Ap.appendChild(this.Rp),this.Ap.appendChild(this.Op),this.Bp(),this.Xv=new iF(this.Fv.canvasElement,this,{qf:()=>null===this.xp&&!this.Tp.W().handleScroll.vertTouchDrag,Yf:()=>null===this.xp&&!this.Tp.W().handleScroll.horzTouchDrag})}S(){null!==this.fp&&this.fp.S(),null!==this.vp&&this.vp.S(),this.Fv.unsubscribeSuggestedBitmapSizeChanged(this.Bv),iN(this.Fv.canvasElement),this.Fv.dispose(),this.Nv.unsubscribeSuggestedBitmapSizeChanged(this.Ov),iN(this.Nv.canvasElement),this.Nv.dispose(),null!==this.Cp&&this.Cp.F_().p(this),this.Xv.S()}np(){return D(this.Cp)}Vp(t){null!==this.Cp&&this.Cp.F_().p(this),this.Cp=t,null!==this.Cp&&this.Cp.F_().l(iK.prototype.Pp.bind(this),this,!0),this.Bp()}Av(){return this.Tp}Kv(){return this.Ap}Bp(){if(null!==this.Cp&&(this.Ip(),0!==this.$i().wt().length)){if(null!==this.fp){let t=this.Cp.P_();this.fp.Gi(D(t))}if(null!==this.vp){let t=this.Cp.R_();this.vp.Gi(D(t))}}}zp(){null!==this.fp&&this.fp.bt(),null!==this.vp&&this.vp.bt()}g_(){return null!==this.Cp?this.Cp.g_():0}M_(t){this.Cp&&this.Cp.M_(t)}Wf(t){if(!this.Cp)return;this.Lp();let e=t.localX,i=t.localY;this.Ep(e,i,t)}hv(t){this.Lp(),this.Np(),this.Ep(t.localX,t.localY,t)}jf(t){var e;if(!this.Cp)return;this.Lp();let i=t.localX,s=t.localY;this.Ep(i,s,t);let n=this.br(i,s);this.Tp.Fp(null!=(e=null==n?void 0:n.yv)?e:null),this.$i().Wc(n&&{jc:n.jc,Sv:n.Sv})}iv(t){null!==this.Cp&&(this.Lp(),this.Wp(t))}Vf(t){null!==this.Cp&&this.jp(this.wp,t)}Df(t){this.Vf(t)}Zf(t){this.Lp(),this.Hp(t),this.Ep(t.localX,t.localY,t)}tv(t){null!==this.Cp&&(this.Lp(),this.Mp=!1,this.$p(t))}Qf(t){null!==this.Cp&&this.Wp(t)}mv(t){if(this.Mp=!0,null===this.xp){let e={x:t.localX,y:t.localY};this.Up(e,e,t)}}pv(t){null!==this.Cp&&(this.Lp(),this.Cp.$t().Wc(null),this.qp())}Yp(){return this.bp}Xp(){return this.wp}_v(){this.gp=1,this.$i().Un()}uv(t,e){if(!this.Tp.W().handleScale.pinch)return;let i=5*(e-this.gp);this.gp=e,this.$i().Jc(t.nt,i)}ev(t){this.Mp=!1,this.Sp=null!==this.xp,this.Np();let e=this.$i().Yc();null!==this.xp&&e.yt()&&(this.kp={x:e.Yt(),y:e.Xt()},this.xp={x:t.localX,y:t.localY})}Xf(t){if(null===this.Cp)return;let e=t.localX,i=t.localY;if(null===this.xp)this.Hp(t);else{this.Sp=!1;let s=D(this.kp),n=s.x+(e-this.xp.x),r=s.y+(i-this.xp.y);this.Ep(n,r,t)}}Jf(t){0===this.Av().W().trackingMode.exitMode&&(this.Sp=!0),this.Kp(),this.$p(t)}br(t,e){let i=this.Cp;return null===i?null:function(t,e,i){let s=t.$o(),n=function(t,e,i){var s,n,r,l;let h,o;for(let a of t)for(let t of null!=(n=null==(s=a.fa)?void 0:s.call(a,e,i))?n:[])r=t.zOrder,(l=null==h?void 0:h.zOrder)&&("top"!==r||"top"===l)&&("normal"!==r||"bottom"!==l)||(h=t,o=a);return h&&o?{kv:h,jc:o}:null}(s,e,i);if("top"===(null==n?void 0:n.kv.zOrder))return iY(n);for(let r of s){if(n&&n.jc===r&&"bottom"!==n.kv.zOrder&&!n.kv.isBackground)return iY(n);let s=function(t,e,i){for(let s of t){let t=s.gt();if(null!==t&&t.br){let n=t.br(e,i);if(null!==n)return{Mv:s,Sv:n}}}return null}(r.Pn(t),e,i);if(null!==s)return{jc:r,Mv:s.Mv,Sv:s.Sv};if(n&&n.jc===r&&"bottom"!==n.kv.zOrder&&n.kv.isBackground)return iY(n)}return(null==n?void 0:n.kv)?iY(n):null}(i,t,e)}Zp(t,e){D("left"===e?this.fp:this.vp).tp(s({width:t,height:this.Cv.height}))}Gp(){return this.Cv}tp(t){n(this.Cv,t)||(this.Cv=t,this.Dv=!0,this.Nv.resizeCanvasElement(t),this.Fv.resizeCanvasElement(t),this.Dv=!1,this.Rp.style.width=t.width+"px",this.Rp.style.height=t.height+"px")}Jp(){let t=D(this.Cp);for(let e of(t.T_(t.P_()),t.T_(t.R_()),t.Aa()))if(t.dr(e)){let i=e.Dt();null!==i&&t.T_(i),e.On()}}_p(){return this.Nv.bitmapSize}up(t,e,i){let s=this._p();s.width>0&&s.height>0&&t.drawImage(this.Nv.canvasElement,e,i)}sp(t){if(0===t||null===this.Cp)return;if(t>1&&this.Jp(),null!==this.fp&&this.fp.sp(t),null!==this.vp&&this.vp.sp(t),1!==t){this.Nv.applySuggestedBitmapSize();let t=y(this.Nv);null!==t&&(t.useBitmapCoordinateSpace(t=>{this.rp(t)}),this.Cp&&(this.Qp(t,iG),this.tm(t),this.im(t),this.Qp(t,iJ),this.Qp(t,iZ)))}this.Fv.applySuggestedBitmapSize();let e=y(this.Fv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.nm(e),this.Qp(e,iX))}sm(){return this.fp}rm(){return this.vp}hp(t,e){this.Qp(t,e)}Pp(){null!==this.Cp&&this.Cp.F_().p(this),this.Cp=null}Wp(t){this.jp(this.bp,t)}jp(t,e){let i=e.localX,s=e.localY;t.M()&&t.m(this.$i().St().Eu(i),{x:i,y:s},e)}rp({context:t,bitmapSize:e}){let{width:i,height:s}=e,n=this.$i(),r=n.q(),l=n.md();r===l?tu(t,0,0,i,s,l):tf(t,0,0,i,s,r,l)}tm(t){let e=D(this.Cp).W_().Uh().gt();null!==e&&e.K(t,!1)}im(t){let e=this.$i().qc();this.hm(t,iJ,iW,e),this.hm(t,iJ,iR,e)}nm(t){this.hm(t,iJ,iR,this.$i().Yc())}Qp(t,e){let i=D(this.Cp).$o();for(let s of i)this.hm(t,e,iW,s);for(let s of i)this.hm(t,e,iR,s)}hm(t,e,i,s){let n=D(this.Cp),r=n.$t().Fc(),l=null!==r&&r.jc===s,h=null!==r&&l&&void 0!==r.Sv?r.Sv.gr:void 0;i$(e,e=>i(e,t,l,h),s,n)}Ip(){if(null===this.Cp)return;let t=this.Tp,e=this.Cp.P_().W().visible,i=this.Cp.R_().W().visible;e||null===this.fp||(this.Dp.removeChild(this.fp.Kv()),this.fp.S(),this.fp=null),i||null===this.vp||(this.Op.removeChild(this.vp.Kv()),this.vp.S(),this.vp=null);let s=t.$t()._d();e&&null===this.fp&&(this.fp=new iq(this,t.W(),s,"left"),this.Dp.appendChild(this.fp.Kv())),i&&null===this.vp&&(this.vp=new iq(this,t.W(),s,"right"),this.Op.appendChild(this.vp.Kv()))}lm(t){return t.bv&&this.Mp||null!==this.xp}am(t){return Math.max(0,Math.min(t,this.Cv.width-1))}om(t){return Math.max(0,Math.min(t,this.Cv.height-1))}Ep(t,e,i){this.$i().hd(this.am(t),this.om(e),i,D(this.Cp))}qp(){this.$i().ad()}Kp(){this.Sp&&(this.xp=null,this.qp())}Up(t,e,i){this.xp=t,this.Sp=!1,this.Ep(e.x,e.y,i);let s=this.$i().Yc();this.kp={x:s.Yt(),y:s.Xt()}}$i(){return this.Tp.$t()}$p(t){if(!this.mp)return;let e=this.$i(),i=this.np();if(e.I_(i,i.vn()),this.pp=null,this.mp=!1,e.sd(),null!==this.yp){let t=performance.now(),i=e.St();this.yp.Dr(i.ju(),t),this.yp.Ju(t)||e.Xn(this.yp)}}Lp(){this.xp=null}Np(){if(this.Cp){if(this.$i().Un(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)D(document.activeElement).blur();else{let t=document.getSelection();null!==t&&t.removeAllRanges()}this.Cp.vn().Ni()||this.$i().St().Ni()}}Hp(t){if(null===this.Cp)return;let e=this.$i(),i=e.St();if(i.Ni())return;let s=this.Tp.W(),n=s.handleScroll,r=s.kineticScroll;if((!n.pressedMouseMove||t.bv)&&(!n.horzTouchDrag&&!n.vertTouchDrag||!t.bv))return;let l=this.Cp.vn(),h=performance.now();if(null!==this.pp||this.lm(t)||(this.pp={x:t.clientX,y:t.clientY,Od:h,_m:t.localX,um:t.localY}),null!==this.pp&&!this.mp&&(this.pp.x!==t.clientX||this.pp.y!==t.clientY)){if(t.bv&&r.touch||!t.bv&&r.mouse){let t=i.he();this.yp=new iP(.2/t,7/t,.997,15/t),this.yp.qd(i.ju(),this.pp.Od)}else this.yp=null;l.Ni()||e.B_(this.Cp,l,t.localY),e.td(t.localX),this.mp=!0}this.mp&&(l.Ni()||e.V_(this.Cp,l,t.localY),e.nd(t.localX),null!==this.yp&&this.yp.qd(i.ju(),h))}}class iQ{constructor(t,e,i,n,r){this.ft=!0,this.Cv=s({width:0,height:0}),this.Ov=()=>this.sp(3),this.Vv="left"===t,this.Oc=i._d,this.cn=e,this.dm=n,this.fm=r,this.Ev=document.createElement("div"),this.Ev.style.width="25px",this.Ev.style.height="100%",this.Ev.style.overflow="hidden",this.Nv=iD(this.Ev,s({width:16,height:16})),this.Nv.subscribeSuggestedBitmapSizeChanged(this.Ov)}S(){this.Nv.unsubscribeSuggestedBitmapSizeChanged(this.Ov),iN(this.Nv.canvasElement),this.Nv.dispose()}Kv(){return this.Ev}Gp(){return this.Cv}tp(t){n(this.Cv,t)||(this.Cv=t,this.Nv.resizeCanvasElement(t),this.Ev.style.width=`${t.width}px`,this.Ev.style.height=`${t.height}px`,this.ft=!0)}sp(t){if(t<3&&!this.ft||0===this.Cv.width||0===this.Cv.height)return;this.ft=!1,this.Nv.applySuggestedBitmapSize();let e=y(this.Nv);null!==e&&e.useBitmapCoordinateSpace(t=>{this.rp(t),this.Ve(t)})}_p(){return this.Nv.bitmapSize}up(t,e,i){let s=this._p();s.width>0&&s.height>0&&t.drawImage(this.Nv.canvasElement,e,i)}Ve({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.dm())return;t.fillStyle=this.cn.timeScale.borderColor;let n=Math.floor(this.Oc.W().C*i),r=Math.floor(this.Oc.W().C*s),l=this.Vv?e.width-n:0;t.fillRect(l,0,n,r)}rp({context:t,bitmapSize:e}){tu(t,0,0,e.width,e.height,this.fm())}}function i0(t){return e=>{var i,s;return null!=(s=null==(i=e.da)?void 0:i.call(e,t))?s:[]}}let i1=i0("normal"),i2=i0("top"),i3=i0("bottom");class i4{constructor(t,e){this.vm=null,this.pm=null,this.k=null,this.bm=!1,this.Cv=s({width:0,height:0}),this.wm=new Y,this.Pv=new et(5),this.Dv=!1,this.Ov=()=>{this.Dv||this.Tp.$t().$h()},this.Bv=()=>{this.Dv||this.Tp.$t().$h()},this.Tp=t,this.U_=e,this.cn=t.W().layout,this.gm=document.createElement("tr"),this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.xm=document.createElement("td"),this.xm.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.height="25px",this.Ev.style.padding="0",this.Sm=document.createElement("div"),this.Sm.style.width="100%",this.Sm.style.height="100%",this.Sm.style.position="relative",this.Sm.style.overflow="hidden",this.Ev.appendChild(this.Sm),this.Nv=iD(this.Sm,s({width:16,height:16})),this.Nv.subscribeSuggestedBitmapSizeChanged(this.Ov);let i=this.Nv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Fv=iD(this.Sm,s({width:16,height:16})),this.Fv.subscribeSuggestedBitmapSizeChanged(this.Bv);let n=this.Fv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.gm.appendChild(this.Mm),this.gm.appendChild(this.Ev),this.gm.appendChild(this.xm),this.km(),this.Tp.$t().w_().l(this.km.bind(this),this),this.Xv=new iF(this.Fv.canvasElement,this,{qf:()=>!0,Yf:()=>!this.Tp.W().handleScroll.horzTouchDrag})}S(){this.Xv.S(),null!==this.vm&&this.vm.S(),null!==this.pm&&this.pm.S(),this.Fv.unsubscribeSuggestedBitmapSizeChanged(this.Bv),iN(this.Fv.canvasElement),this.Fv.dispose(),this.Nv.unsubscribeSuggestedBitmapSizeChanged(this.Ov),iN(this.Nv.canvasElement),this.Nv.dispose()}Kv(){return this.gm}ym(){return this.vm}Cm(){return this.pm}hv(t){if(this.bm)return;this.bm=!0;let e=this.Tp.$t();!e.St().Ni()&&this.Tp.W().handleScale.axisPressedMouseMove.time&&e.Gc(t.localX)}ev(t){this.hv(t)}lv(){let t=this.Tp.$t();!t.St().Ni()&&this.bm&&(this.bm=!1,this.Tp.W().handleScale.axisPressedMouseMove.time&&t.rd())}Zf(t){let e=this.Tp.$t();!e.St().Ni()&&this.Tp.W().handleScale.axisPressedMouseMove.time&&e.ed(t.localX)}Xf(t){this.Zf(t)}tv(){this.bm=!1;let t=this.Tp.$t();t.St().Ni()&&!this.Tp.W().handleScale.axisPressedMouseMove.time||t.rd()}Jf(){this.tv()}Vf(){this.Tp.W().handleScale.axisDoubleClickReset.time&&this.Tp.$t().Zn()}Df(){this.Vf()}Wf(){this.Tp.$t().W().handleScale.axisPressedMouseMove.time&&this.cp(1)}pv(){this.cp(0)}Gp(){return this.Cv}Tm(){return this.wm}Pm(t,e,i){n(this.Cv,t)||(this.Cv=t,this.Dv=!0,this.Nv.resizeCanvasElement(t),this.Fv.resizeCanvasElement(t),this.Dv=!1,this.Ev.style.width=`${t.width}px`,this.Ev.style.height=`${t.height}px`,this.wm.m(t)),null!==this.vm&&this.vm.tp(s({width:e,height:t.height})),null!==this.pm&&this.pm.tp(s({width:i,height:t.height}))}Rm(){let t=this.Dm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.Om)}bt(){this.Tp.$t().St().ja()}_p(){return this.Nv.bitmapSize}up(t,e,i){let s=this._p();s.width>0&&s.height>0&&t.drawImage(this.Nv.canvasElement,e,i)}sp(t){if(0===t)return;if(1!==t){this.Nv.applySuggestedBitmapSize();let e=y(this.Nv);null!==e&&(e.useBitmapCoordinateSpace(t=>{this.rp(t),this.Ve(t),this.Am(e,i3)}),this.lp(e),this.Am(e,i1)),null!==this.vm&&this.vm.sp(t),null!==this.pm&&this.pm.sp(t)}this.Fv.applySuggestedBitmapSize();let e=y(this.Fv);null!==e&&(e.useBitmapCoordinateSpace(({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)}),this.Bm([...this.Tp.$t().wt(),this.Tp.$t().Yc()],e),this.Am(e,i2))}Am(t,e){let i=this.Tp.$t().wt();for(let s of i)i$(e,e=>iW(e,t,!1,void 0),s,void 0);for(let s of i)i$(e,e=>iR(e,t,!1,void 0),s,void 0)}rp({context:t,bitmapSize:e}){tu(t,0,0,e.width,e.height,this.Tp.$t().md())}Ve({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Tp.W().timeScale.borderVisible){t.fillStyle=this.Vm();let s=Math.max(1,Math.floor(this.Dm().C*i));t.fillRect(0,0,e.width,s)}}lp(t){let e=this.Tp.$t().St(),i=e.ja();if(!i||0===i.length)return;let s=this.U_.maxTickMarkWeight(i),n=this.Dm(),r=e.W();r.borderVisible&&r.ticksVisible&&t.useBitmapCoordinateSpace(({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.Vm(),t.fillStyle=this.Vm();let r=Math.max(1,Math.floor(e)),l=Math.floor(.5*e);t.beginPath();let h=Math.round(n.T*s);for(let s=i.length;s--;){let n=Math.round(i[s].coord*e);t.rect(n-l,0,r,h)}t.fill()}),t.useMediaCoordinateSpace(({context:t})=>{let e=n.C+n.T+n.L+n.P/2;for(let n of(t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this.Jv(),i))if(n.weight<s){let i=n.needAlignCoordinate?this.Im(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}for(let n of(this.Tp.W().timeScale.allowBoldLabels&&(t.font=this.zm()),i))if(n.weight>=s){let i=n.needAlignCoordinate?this.Im(t,n.coord,n.label):n.coord;t.fillText(n.label,i,e)}})}Im(t,e,i){let s=this.Pv.xi(t,i),n=Math.floor(e-s/2)+.5;return n<0?e+=Math.abs(0-n):n+s>this.Cv.width&&(e-=Math.abs(this.Cv.width-(n+s))),e}Bm(t,e){let i=this.Dm();for(let s of t)for(let t of s.Qi())t.gt().K(e,i)}Vm(){return this.Tp.W().timeScale.borderColor}$(){return this.cn.textColor}j(){return this.cn.fontSize}Jv(){return tt(this.j(),this.cn.fontFamily)}zm(){return tt(this.j(),this.cn.fontFamily,"bold")}Dm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,ji:NaN,T:5,P:NaN,R:"",Wi:new et,Om:0});let t=this.k,e=this.Jv();if(t.R!==e){let i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.ji=9*i/12,t.N=0,t.Om=4*i/12,t.Wi.ir()}return this.k}cp(t){this.Ev.style.cursor=1===t?"ew-resize":"default"}km(){let t=this.Tp.$t(),e=t.W();e.leftPriceScale.visible||null===this.vm||(this.Mm.removeChild(this.vm.Kv()),this.vm.S(),this.vm=null),e.rightPriceScale.visible||null===this.pm||(this.xm.removeChild(this.pm.Kv()),this.pm.S(),this.pm=null);let i={_d:this.Tp.$t()._d()},s=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,n=()=>t.md();e.leftPriceScale.visible&&null===this.vm&&(this.vm=new iQ("left",e,i,s,n),this.Mm.appendChild(this.vm.Kv())),e.rightPriceScale.visible&&null===this.pm&&(this.pm=new iQ("right",e,i,s,n),this.xm.appendChild(this.pm.Kv()))}}let i5=!!iL&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!iL&&((null==(p=null==navigator?void 0:navigator.userAgentData)?void 0:p.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class i9{constructor(t,e,i){var s;this.Lm=[],this.Em=0,this.ro=0,this.o_=0,this.Nm=0,this.Fm=0,this.Wm=null,this.jm=!1,this.bp=new Y,this.wp=new Y,this.Pc=new Y,this.Hm=null,this.$m=null,this.Um=t,this.cn=e,this.U_=i,this.gm=document.createElement("div"),this.gm.classList.add("tv-lightweight-charts"),this.gm.style.overflow="hidden",this.gm.style.direction="ltr",this.gm.style.width="100%",this.gm.style.height="100%",(s=this.gm).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.qm=document.createElement("table"),this.qm.setAttribute("cellspacing","0"),this.gm.appendChild(this.qm),this.Ym=this.Xm.bind(this),i8(this.cn)&&this.Km(!0),this.$i=new ic(this.Dc.bind(this),this.cn,i),this.$t().Xc().l(this.Zm.bind(this),this),this.Gm=new i4(this,this.U_),this.qm.appendChild(this.Gm.Kv());let n=e.autoSize&&this.Jm(),r=this.cn.width,l=this.cn.height;if(n||0===r||0===l){let e=t.getBoundingClientRect();r=r||e.width,l=l||e.height}this.Qm(r,l),this.tb(),t.appendChild(this.gm),this.ib(),this.$i.St().sc().l(this.$i.Kl.bind(this.$i),this),this.$i.w_().l(this.$i.Kl.bind(this.$i),this)}$t(){return this.$i}W(){return this.cn}nb(){return this.Lm}sb(){return this.Gm}S(){for(let t of(this.Km(!1),0!==this.Em&&window.cancelAnimationFrame(this.Em),this.$i.Xc().p(this),this.$i.St().sc().p(this),this.$i.w_().p(this),this.$i.S(),this.Lm))this.qm.removeChild(t.Kv()),t.Yp().p(this),t.Xp().p(this),t.S();this.Lm=[],D(this.Gm).S(),null!==this.gm.parentElement&&this.gm.parentElement.removeChild(this.gm),this.Pc.S(),this.bp.S(),this.wp.S(),this.eb()}Qm(t,e,i=!1){if(this.ro===e&&this.o_===t)return;let n=function(t){let e=Math.floor(t.width),i=Math.floor(t.height);return s({width:e-e%2,height:i-i%2})}(s({width:t,height:e}));this.ro=n.height,this.o_=n.width;let r=this.ro+"px",l=this.o_+"px";D(this.gm).style.height=r,D(this.gm).style.width=l,this.qm.style.height=r,this.qm.style.width=l,i?this.rb(tS.es(),performance.now()):this.$i.Kl()}sp(t){void 0===t&&(t=tS.es());for(let e=0;e<this.Lm.length;e++)this.Lm[e].sp(t.Hn(e).Fn);this.cn.timeScale.visible&&this.Gm.sp(t.jn())}Hh(t){let e=i8(this.cn);this.$i.Hh(t);let i=i8(this.cn);i!==e&&this.Km(i),this.ib(),this.hb(t)}Yp(){return this.bp}Xp(){return this.wp}Xc(){return this.Pc}lb(){null!==this.Wm&&(this.rb(this.Wm,performance.now()),this.Wm=null);let t=this.ab(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;let i=D(e.getContext("2d"));return this.ab(i),e}ob(t){return("left"!==t||this._b())&&("right"!==t||this.ub())&&0!==this.Lm.length?D("left"===t?this.Lm[0].sm():this.Lm[0].rm()).ip():0}cb(){return this.cn.autoSize&&null!==this.Hm}fb(){return this.gm}Fp(t){this.$m=t,this.$m?this.fb().style.setProperty("cursor",t):this.fb().style.removeProperty("cursor")}pb(){return this.$m}mb(){return P(this.Lm[0]).Gp()}hb(t){(void 0!==t.autoSize||!this.Hm||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Hm&&this.Jm(),!1===t.autoSize&&null!==this.Hm&&this.eb(),t.autoSize||void 0===t.width&&void 0===t.height||this.Qm(t.width||this.o_,t.height||this.ro))}ab(t){let e=0,i=0,n=this.Lm[0],r=(e,i)=>{let s=0;for(let n=0;n<this.Lm.length;n++){let r=this.Lm[n],l=D("left"===e?r.sm():r.rm()),h=l._p();null!==t&&l.up(t,i,s),s+=h.height}};this._b()&&(r("left",0),e+=D(n.sm())._p().width);for(let s=0;s<this.Lm.length;s++){let n=this.Lm[s],r=n._p();null!==t&&n.up(t,e,i),i+=r.height}e+=n._p().width,this.ub()&&(r("right",e),e+=D(n.rm())._p().width);let l=(e,i,s)=>{D("left"===e?this.Gm.ym():this.Gm.Cm()).up(D(t),i,s)};if(this.cn.timeScale.visible){let e=this.Gm._p();if(null!==t){let s=0;this._b()&&(l("left",s,i),s=D(n.sm())._p().width),this.Gm.up(t,s,i),s+=e.width,this.ub()&&l("right",s,i)}i+=e.height}return s({width:e,height:i})}bb(){var t,e,i;let n=0,r=0,l=0;for(let t of this.Lm)this._b()&&(r=Math.max(r,D(t.sm()).Gv(),this.cn.leftPriceScale.minimumWidth)),this.ub()&&(l=Math.max(l,D(t.rm()).Gv(),this.cn.rightPriceScale.minimumWidth)),n+=t.g_();r=(e=r)+e%2,l=(i=l)+i%2;let h=this.o_,o=this.ro,a=Math.max(h-r-l,0),u=this.cn.timeScale.visible,c=u?Math.max(this.Gm.Rm(),this.cn.timeScale.minimumHeight):0,d=0+(c=(t=c)+t%2),f=o<d?0:o-d,m=f/n,p=0;for(let t=0;t<this.Lm.length;++t){let e=this.Lm[t];e.Vp(this.$i.Uc()[t]);let i=0,n=0;i=Math.max(t===this.Lm.length-1?f-p:Math.round(e.g_()*m),2),p+=i,e.tp(s({width:a,height:i})),this._b()&&e.Zp(r,"left"),this.ub()&&e.Zp(l,"right"),e.np()&&this.$i.Kc(e.np(),i)}this.Gm.Pm(s({width:u?a:0,height:c}),u?r:0,u?l:0),this.$i.x_(a),this.Nm!==r&&(this.Nm=r),this.Fm!==l&&(this.Fm=l)}Km(t){t?this.gm.addEventListener("wheel",this.Ym,{passive:!1}):this.gm.removeEventListener("wheel",this.Ym)}wb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return i5?1/window.devicePixelRatio:1}Xm(t){if(!(0!==t.deltaX&&this.cn.handleScroll.mouseWheel||0!==t.deltaY&&this.cn.handleScale.mouseWheel))return;let e=this.wb(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this.cn.handleScale.mouseWheel){let e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.gm.getBoundingClientRect().left;this.$t().Jc(i,e)}0!==i&&this.cn.handleScroll.mouseWheel&&this.$t().Qc(-80*i)}rb(t,e){var i;let s=t.jn();3===s&&this.gb(),3!==s&&2!==s||(this.Mb(t),this.xb(t,e),this.Gm.bt(),this.Lm.forEach(t=>{t.zp()}),3===(null==(i=this.Wm)?void 0:i.jn())&&(this.Wm.ts(t),this.gb(),this.Mb(this.Wm),this.xb(this.Wm,e),t=this.Wm,this.Wm=null)),this.sp(t)}xb(t,e){for(let i of t.Qn())this.ns(i,e)}Mb(t){let e=this.$i.Uc();for(let i=0;i<e.length;i++)t.Hn(i).Wn&&e[i].E_()}ns(t,e){let i=this.$i.St();switch(t.qn){case 0:i.rc();break;case 1:i.hc(t.Ot);break;case 2:i.Gn(t.Ot);break;case 3:i.Jn(t.Ot);break;case 4:i.Uu();break;case 5:t.Ot.Ju(e)||i.Jn(t.Ot.Qu(e))}}Dc(t){null!==this.Wm?this.Wm.ts(t):this.Wm=t,this.jm||(this.jm=!0,this.Em=window.requestAnimationFrame(t=>{if(this.jm=!1,this.Em=0,null!==this.Wm){let e=this.Wm;for(let i of(this.Wm=null,this.rb(e,t),e.Qn()))if(5===i.qn&&!i.Ot.Ju(t)){this.$t().Xn(i.Ot);break}}}))}gb(){this.tb()}tb(){let t=this.$i.Uc(),e=t.length,i=this.Lm.length;for(let t=e;t<i;t++){let t=P(this.Lm.pop());this.qm.removeChild(t.Kv()),t.Yp().p(this),t.Xp().p(this),t.S()}for(let s=i;s<e;s++){let e=new iK(this,t[s]);e.Yp().l(this.Sb.bind(this),this),e.Xp().l(this.kb.bind(this),this),this.Lm.push(e),this.qm.insertBefore(e.Kv(),this.Gm.Kv())}for(let i=0;i<e;i++){let e=t[i],s=this.Lm[i];s.np()!==e?s.Vp(e):s.Bp()}this.ib(),this.bb()}yb(t,e,i){var s;let n,r=new Map;if(null!==t&&this.$i.wt().forEach(e=>{let i=e.In().hl(t);null!==i&&r.set(e,i)}),null!==t){let e=null==(s=this.$i.St().Ui(t))?void 0:s.originalTime;void 0!==e&&(n=e)}let l=this.$t().Fc();return{Cb:n,se:null!=t?t:void 0,Tb:null!=e?e:void 0,Pb:null!==l&&l.jc instanceof eV?l.jc:void 0,Rb:r,Db:null!==l&&void 0!==l.Sv?l.Sv.wr:void 0,Ob:null!=i?i:void 0}}Sb(t,e,i){this.bp.m(()=>this.yb(t,e,i))}kb(t,e,i){this.wp.m(()=>this.yb(t,e,i))}Zm(t,e,i){this.Pc.m(()=>this.yb(t,e,i))}ib(){let t=this.cn.timeScale.visible?"":"none";this.Gm.Kv().style.display=t}_b(){return this.Lm[0].np().P_().W().visible}ub(){return this.Lm[0].np().R_().W().visible}Jm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(t=>{let e=t.find(t=>t.target===this.Um);e&&this.Qm(e.contentRect.width,e.contentRect.height)}),this.Hm.observe(this.Um,{box:"border-box"}),!0)}eb(){null!==this.Hm&&this.Hm.disconnect(),this.Hm=null}}function i8(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function i7(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&0>e.indexOf(s)&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)0>e.indexOf(s[n])&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}function i6(t,e,i,s){let n=i.value,r={se:e,ot:t,Ot:[n,n,n,n],Cb:s};return void 0!==i.color&&(r.O=i.color),r}function st(t,e,i,s){let n=i.value,r={se:e,ot:t,Ot:[n,n,n,n],Cb:s};return void 0!==i.lineColor&&(r.lt=i.lineColor),void 0!==i.topColor&&(r.Ts=i.topColor),void 0!==i.bottomColor&&(r.Ps=i.bottomColor),r}function se(t,e,i,s){let n=i.value,r={se:e,ot:t,Ot:[n,n,n,n],Cb:s};return void 0!==i.topLineColor&&(r.Pe=i.topLineColor),void 0!==i.bottomLineColor&&(r.Re=i.bottomLineColor),void 0!==i.topFillColor1&&(r.Se=i.topFillColor1),void 0!==i.topFillColor2&&(r.ke=i.topFillColor2),void 0!==i.bottomFillColor1&&(r.ye=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(r.Ce=i.bottomFillColor2),r}function si(t,e,i,s){let n={se:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Cb:s};return void 0!==i.color&&(n.O=i.color),n}function ss(t,e,i,s){let n={se:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Cb:s};return void 0!==i.color&&(n.O=i.color),void 0!==i.borderColor&&(n.At=i.borderColor),void 0!==i.wickColor&&(n.Xh=i.wickColor),n}function sn(t,e,i,s,n){let r=P(n)(i),l=Math.max(...r),h=Math.min(...r),o=r[r.length-1],{time:a,color:u}=i;return{se:e,ot:t,Ot:[o,l,h,o],Cb:s,He:i7(i,["time","color"]),O:u}}function sr(t){return void 0!==t.Ot}function sl(t,e){return void 0!==e.customValues&&(t.Ab=e.customValues),t}function sh(t){return(e,i,s,n,r,l)=>{var h,o;return(h=s,(o=l)?o(h):void 0===h.open&&void 0===h.value)?sl({ot:e,se:i,Cb:n},s):sl(t(e,i,s,n,r),s)}}function so(t){return({Candlestick:sh(ss),Bar:sh(si),Area:sh(st),Baseline:sh(se),Histogram:sh(i6),Line:sh(i6),Custom:sh(sn)})[t]}function sa(t){return{se:0,Bb:new Map,ha:t}}function su(t,e){if(void 0!==t&&0!==t.length)return{Vb:e.key(t[0].ot),Ib:e.key(t[t.length-1].ot)}}function sc(t){let e;return t.forEach(t=>{void 0===e&&(e=t.Cb)}),P(e)}class sd{constructor(t){this.zb=new Map,this.Lb=new Map,this.Eb=new Map,this.Nb=[],this.U_=t}S(){this.zb.clear(),this.Lb.clear(),this.Eb.clear(),this.Nb=[]}Fb(t,e){let i=0!==this.zb.size,s=!1,n=this.Lb.get(t);if(void 0!==n)if(1===this.Lb.size)i=!1,s=!0,this.zb.clear();else for(let e of this.Nb)e.pointData.Bb.delete(t)&&(s=!0);let r=[];if(0!==e.length){let i=e.map(t=>t.time),n=this.U_.createConverterToInternalObj(e),l=so(t.Jh()),h=t.ya(),o=t.Ca();r=e.map((e,r)=>{let a=n(e.time),u=this.U_.key(a),c=this.zb.get(u);void 0===c&&(c=sa(a),this.zb.set(u,c),s=!0);let d=l(a,c.se,e,i[r],h,o);return c.Bb.set(t,d),d})}i&&this.Wb(),this.jb(t,r);let l=-1;if(s){let t=[];this.zb.forEach(e=>{t.push({timeWeight:0,time:e.ha,pointData:e,originalTime:sc(e.Bb)})}),t.sort((t,e)=>this.U_.key(t.time)-this.U_.key(e.time)),l=this.Hb(t)}return this.$b(t,l,function(t,e,i){let s=su(t,i),n=su(e,i);if(void 0!==s&&void 0!==n)return{Ql:s.Ib>=n.Ib&&s.Vb>=n.Vb}}(this.Lb.get(t),n,this.U_))}fd(t){return this.Fb(t,[])}Ub(t,e){void 0===e.Cb&&(e.Cb=e.time),this.U_.preprocessData(e);let i=this.U_.createConverterToInternalObj([e])(e.time),s=this.Eb.get(t);if(void 0!==s&&this.U_.key(i)<this.U_.key(s))throw Error(`Cannot update oldest data, last time=${s}, new time=${i}`);let n=this.zb.get(this.U_.key(i)),r=void 0===n;void 0===n&&(n=sa(i),this.zb.set(this.U_.key(i),n));let l=so(t.Jh()),h=t.ya(),o=t.Ca(),a=l(i,n.se,e,e.Cb,h,o);n.Bb.set(t,a),this.qb(t,a);let u={Ql:sr(a)};if(!r)return this.$b(t,-1,u);let c={timeWeight:0,time:n.ha,pointData:n,originalTime:sc(n.Bb)},d=tA(this.Nb,this.U_.key(c.time),(t,e)=>this.U_.key(t.time)<e);this.Nb.splice(d,0,c);for(let t=d;t<this.Nb.length;++t)sf(this.Nb[t].pointData,t);return this.U_.fillWeightsForPoints(this.Nb,d),this.$b(t,d,u)}qb(t,e){let i=this.Lb.get(t);void 0===i&&(i=[],this.Lb.set(t,i));let s=0!==i.length?i[i.length-1]:null;null===s||this.U_.key(e.ot)>this.U_.key(s.ot)?sr(e)&&i.push(e):sr(e)?i[i.length-1]=e:i.splice(-1,1),this.Eb.set(t,e.ot)}jb(t,e){0!==e.length?(this.Lb.set(t,e.filter(sr)),this.Eb.set(t,e[e.length-1].ot)):(this.Lb.delete(t),this.Eb.delete(t))}Wb(){for(let t of this.Nb)0===t.pointData.Bb.size&&this.zb.delete(this.U_.key(t.time))}Hb(t){let e=-1;for(let i=0;i<this.Nb.length&&i<t.length;++i){let s=this.Nb[i],n=t[i];if(this.U_.key(s.time)!==this.U_.key(n.time)){e=i;break}n.timeWeight=s.timeWeight,sf(n.pointData,i)}if(-1===e&&this.Nb.length!==t.length&&(e=Math.min(this.Nb.length,t.length)),-1===e)return -1;for(let i=e;i<t.length;++i)sf(t[i].pointData,i);return this.U_.fillWeightsForPoints(t,e),this.Nb=t,e}Yb(){if(0===this.Lb.size)return null;let t=0;return this.Lb.forEach(e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].se))}),t}$b(t,e,i){let s={Xb:new Map,St:{Lu:this.Yb()}};if(-1!==e)this.Lb.forEach((e,n)=>{s.Xb.set(n,{He:e,Kb:n===t?i:void 0})}),this.Lb.has(t)||s.Xb.set(t,{He:[],Kb:i}),s.St.Zb=this.Nb,s.St.Gb=e;else{let e=this.Lb.get(t);s.Xb.set(t,{He:e||[],Kb:i})}return s}}function sf(t,e){t.se=e,t.Bb.forEach(t=>{t.se=e})}function sm(t){let e={value:t.Ot[3],time:t.Cb};return void 0!==t.Ab&&(e.customValues=t.Ab),e}function sp(t){let e=sm(t);return void 0!==t.O&&(e.color=t.O),e}function sv(t){let e=sm(t);return void 0!==t.lt&&(e.lineColor=t.lt),void 0!==t.Ts&&(e.topColor=t.Ts),void 0!==t.Ps&&(e.bottomColor=t.Ps),e}function sg(t){let e=sm(t);return void 0!==t.Pe&&(e.topLineColor=t.Pe),void 0!==t.Re&&(e.bottomLineColor=t.Re),void 0!==t.Se&&(e.topFillColor1=t.Se),void 0!==t.ke&&(e.topFillColor2=t.ke),void 0!==t.ye&&(e.bottomFillColor1=t.ye),void 0!==t.Ce&&(e.bottomFillColor2=t.Ce),e}function sb(t){let e={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.Cb};return void 0!==t.Ab&&(e.customValues=t.Ab),e}function sw(t){let e=sb(t);return void 0!==t.O&&(e.color=t.O),e}function sy(t){let e=sb(t),{O:i,At:s,Xh:n}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==n&&(e.wickColor=n),e}function sx(t){return({Area:sv,Line:sp,Baseline:sg,Histogram:sp,Bar:sw,Candlestick:sy,Custom:sM})[t]}function sM(t){let e=t.Cb;return Object.assign(Object.assign({},t.He),{time:e})}let sS={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},sC={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},s_={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:Q},sk={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},sz={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},sL={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:Q,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function sT(){return{width:0,height:0,autoSize:!1,layout:s_,crosshair:sS,grid:sC,overlayPriceScales:Object.assign({},sk),leftPriceScale:Object.assign(Object.assign({},sk),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},sk),{visible:!0}),timeScale:sz,watermark:sL,localization:{locale:iL?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class sO{constructor(t,e){this.Jb=t,this.Qb=e}applyOptions(t){this.Jb.$t().Hc(this.Qb,t)}options(){return this.Li().W()}width(){return tM(this.Qb)?this.Jb.ob(this.Qb):0}Li(){return D(this.Jb.$t().$c(this.Qb)).Dt}}function sE(t,e,i){let s=Object.assign({time:e},i7(t,["time","originalTime"]));return void 0!==i&&(s.originalTime=i),s}let sP={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class sD{constructor(t){this.Eh=t}applyOptions(t){this.Eh.Hh(t)}options(){return this.Eh.W()}tw(){return this.Eh}}class sN{constructor(t,e,i,s,n){this.iw=new Y,this.Ls=t,this.nw=e,this.sw=i,this.U_=n,this.ew=s}S(){this.iw.S()}priceFormatter(){return this.Ls.ma()}priceToCoordinate(t){let e=this.Ls.Ct();return null===e?null:this.Ls.Dt().Rt(t,e.Ot)}coordinateToPrice(t){let e=this.Ls.Ct();return null===e?null:this.Ls.Dt().pn(t,e.Ot)}barsInLogicalRange(t){if(null===t)return null;let e=new is(new it(t.from,t.to)).hu(),i=this.Ls.In();if(i.Ni())return null;let s=i.hl(e.Os(),1),n=i.hl(e.ui(),-1),r=D(i.sl()),l=D(i.Vn());if(null!==s&&null!==n&&s.se>n.se)return{barsBefore:t.from-r,barsAfter:l-t.to};let h={barsBefore:null===s||s.se===r?t.from-r:s.se-r,barsAfter:null===n||n.se===l?l-t.to:l-n.se};return null!==s&&null!==n&&(h.from=s.Cb,h.to=n.Cb),h}setData(t){this.U_,this.Ls.Jh(),this.nw.rw(this.Ls,t),this.hw("full")}update(t){this.Ls.Jh(),this.nw.lw(this.Ls,t),this.hw("update")}dataByIndex(t,e){let i=this.Ls.In().hl(t,e);return null===i?null:sx(this.seriesType())(i)}data(){let t=sx(this.seriesType());return this.Ls.In().ie().map(e=>t(e))}subscribeDataChanged(t){this.iw.l(t)}unsubscribeDataChanged(t){this.iw.v(t)}setMarkers(t){this.U_;let e=t.map(t=>sE(t,this.U_.convertHorzItemToInternal(t.time),t.time));this.Ls.ia(e)}markers(){return this.Ls.na().map(t=>sE(t,t.originalTime,void 0))}applyOptions(t){this.Ls.Hh(t)}options(){return Z(this.Ls.W())}priceScale(){return this.sw.priceScale(this.Ls.Dt().Ta())}createPriceLine(t){let e=j(Z(sP),t);return new sD(this.Ls.sa(e))}removePriceLine(t){this.Ls.ea(t.tw())}seriesType(){return this.Ls.Jh()}attachPrimitive(t){this.Ls.Sa(t),t.attached&&t.attached({chart:this.ew,series:this,requestUpdate:()=>this.Ls.$t().Kl()})}detachPrimitive(t){this.Ls.ka(t),t.detached&&t.detached()}hw(t){this.iw.M()&&this.iw.m(t)}}class sW{constructor(t,e,i){this.aw=new Y,this.pu=new Y,this.wm=new Y,this.$i=t,this.kl=t.St(),this.Gm=e,this.kl.tc().l(this.ow.bind(this)),this.kl.nc().l(this._w.bind(this)),this.Gm.Tm().l(this.uw.bind(this)),this.U_=i}S(){this.kl.tc().p(this),this.kl.nc().p(this),this.Gm.Tm().p(this),this.aw.S(),this.pu.S(),this.wm.S()}scrollPosition(){return this.kl.ju()}scrollToPosition(t,e){e?this.kl.Gu(t,1e3):this.$i.Jn(t)}scrollToRealTime(){this.kl.Zu()}getVisibleRange(){let t=this.kl.Du();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){let e={from:this.U_.convertHorzItemToInternal(t.from),to:this.U_.convertHorzItemToInternal(t.to)},i=this.kl.Vu(e);this.$i.vd(i)}getVisibleLogicalRange(){let t=this.kl.Ru();return null===t?null:{from:t.Os(),to:t.ui()}}setVisibleLogicalRange(t){E(t.from<=t.to,"The from index cannot be after the to index."),this.$i.vd(t)}resetTimeScale(){this.$i.Zn()}fitContent(){this.$i.rc()}logicalToCoordinate(t){let e=this.$i.St();return e.Ni()?null:e.It(t)}coordinateToLogical(t){return this.kl.Ni()?null:this.kl.Eu(t)}timeToCoordinate(t){let e=this.U_.convertHorzItemToInternal(t),i=this.kl.Da(e,!1);return null===i?null:this.kl.It(i)}coordinateToTime(t){let e=this.$i.St(),i=e.Eu(t),s=e.Ui(i);return null===s?null:s.originalTime}width(){return this.Gm.Gp().width}height(){return this.Gm.Gp().height}subscribeVisibleTimeRangeChange(t){this.aw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.aw.v(t)}subscribeVisibleLogicalRangeChange(t){this.pu.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.pu.v(t)}subscribeSizeChange(t){this.wm.l(t)}unsubscribeSizeChange(t){this.wm.v(t)}applyOptions(t){this.kl.Hh(t)}options(){return Object.assign(Object.assign({},Z(this.kl.W())),{barSpacing:this.kl.he()})}ow(){this.aw.M()&&this.aw.m(this.getVisibleRange())}_w(){this.pu.M()&&this.pu.m(this.getVisibleLogicalRange())}uw(t){this.wm.m(t.width,t.height)}}function sR(t){return function(t){if(J(t.handleScale)){let e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){let{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;J(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),J(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}let e=t.handleScroll;J(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class s${constructor(t,e,i){this.cw=new Map,this.dw=new Map,this.fw=new Y,this.pw=new Y,this.mw=new Y,this.bw=new sd(e);let s=void 0===i?Z(sT()):j(Z(sT()),sR(i));this.U_=e,this.Jb=new i9(t,s,e),this.Jb.Yp().l(t=>{this.fw.M()&&this.fw.m(this.ww(t()))},this),this.Jb.Xp().l(t=>{this.pw.M()&&this.pw.m(this.ww(t()))},this),this.Jb.Xc().l(t=>{this.mw.M()&&this.mw.m(this.ww(t()))},this);let n=this.Jb.$t();this.gw=new sW(n,this.Jb.sb(),this.U_)}remove(){this.Jb.Yp().p(this),this.Jb.Xp().p(this),this.Jb.Xc().p(this),this.gw.S(),this.Jb.S(),this.cw.clear(),this.dw.clear(),this.fw.S(),this.pw.S(),this.mw.S(),this.bw.S()}resize(t,e,i){this.autoSizeActive()||this.Jb.Qm(t,e,i)}addCustomSeries(t,e){let i=N(t),s=Object.assign(Object.assign({},z),i.defaultOptions());return this.Mw("Custom",s,e,i)}addAreaSeries(t){return this.Mw("Area",C,t)}addBaselineSeries(t){return this.Mw("Baseline",_,t)}addBarSeries(t){return this.Mw("Bar",M,t)}addCandlestickSeries(t={}){return void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor),this.Mw("Candlestick",x,t)}addHistogramSeries(t){return this.Mw("Histogram",k,t)}addLineSeries(t){return this.Mw("Line",S,t)}removeSeries(t){let e=P(this.cw.get(t)),i=this.bw.fd(e);this.Jb.$t().fd(e),this.xw(i),this.cw.delete(t),this.dw.delete(e)}rw(t,e){this.xw(this.bw.Fb(t,e))}lw(t,e){this.xw(this.bw.Ub(t,e))}subscribeClick(t){this.fw.l(t)}unsubscribeClick(t){this.fw.v(t)}subscribeCrosshairMove(t){this.mw.l(t)}unsubscribeCrosshairMove(t){this.mw.v(t)}subscribeDblClick(t){this.pw.l(t)}unsubscribeDblClick(t){this.pw.v(t)}priceScale(t){return new sO(this.Jb,t)}timeScale(){return this.gw}applyOptions(t){this.Jb.Hh(sR(t))}options(){return this.Jb.W()}takeScreenshot(){return this.Jb.lb()}autoSizeActive(){return this.Jb.cb()}chartElement(){return this.Jb.fb()}paneSize(){let t=this.Jb.mb();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){let s=this.cw.get(i);if(void 0===s)return;let n=this.Jb.$t().cr(s);null!==n&&this.Jb.$t().ld(t,e,n)}clearCrosshairPosition(){this.Jb.$t().ad(!0)}Mw(t,e,i={},s){var n;void 0!==(n=i.priceFormat)&&"custom"!==n.type&&void 0!==n.minMove&&void 0===n.precision&&(n.precision=function(t){if(t>=1)return 0;let e=0;for(;e<8&&!(1e-8>Math.abs(Math.round(t)-t));e++)t*=10;return e}(n.minMove));let r=j(Z(L),Z(e),i),l=this.Jb.$t().ud(t,r,s),h=new sN(l,this,this,this,this.U_);return this.cw.set(h,l),this.dw.set(l,h),h}xw(t){let e=this.Jb.$t();e.od(t.St.Lu,t.St.Zb,t.St.Gb),t.Xb.forEach((t,e)=>e.J(t.He,t.Kb)),e.Fu()}Sw(t){return P(this.dw.get(t))}ww(t){let e=new Map;t.Rb.forEach((t,i)=>{let s=i.Jh(),n=sx(s)(t);if("Custom"!==s)E(void 0!==n.open||void 0!==n.value);else{let t=i.Ca();E(!t||!1===t(n))}e.set(this.Sw(i),n)});let i=void 0!==t.Pb&&this.dw.has(t.Pb)?this.Sw(t.Pb):void 0;return{time:t.Cb,logical:t.se,point:t.Tb,hoveredSeries:i,hoveredObjectId:t.Db,seriesData:e,sourceEvent:t.Ob}}}function sF(t,e){return function(t,e,i){let s;if(G(t)){let e=document.getElementById(t);E(null!==e,`Cannot find element in DOM with id=${t}`),s=e}else s=t;let n=new s$(s,e,i);return e.setOptions(n.options()),n}(t,new iz,iz.Vd(e))}Object.assign(Object.assign({},L),z)},80520:(t,e,i)=>{"use strict";i.d(e,{v:()=>n});var s=i(89447);function n(t,e,i){let n=+(0,s.a)(t,null==i?void 0:i.in),[r,l]=[+(0,s.a)(e.start,null==i?void 0:i.in),+(0,s.a)(e.end,null==i?void 0:i.in)].sort((t,e)=>t-e);return n>=r&&n<=l}},82637:(t,e,i)=>{"use strict";i.d(e,{w:()=>r});var s=i(61183),n=i(7038);function r(t,e,i){let[r,l]=(0,s.x)(null==i?void 0:i.in,t,e);return 4*(r.getFullYear()-l.getFullYear())+((0,n.F)(r)-(0,n.F)(l))}},84423:(t,e,i)=>{"use strict";i.d(e,{k:()=>r});var s=i(95490),n=i(89447);function r(t,e){var i,r,l,h,o,a,u,c;let d=(0,s.q)(),f=null!=(c=null!=(u=null!=(a=null!=(o=null==e?void 0:e.weekStartsOn)?o:null==e||null==(r=e.locale)||null==(i=r.options)?void 0:i.weekStartsOn)?a:d.weekStartsOn)?u:null==(h=d.locale)||null==(l=h.options)?void 0:l.weekStartsOn)?c:0,m=(0,n.a)(t,null==e?void 0:e.in),p=m.getDay();return m.setDate(m.getDate()-(7*(p<f)+p-f)),m.setHours(0,0,0,0),m}},84945:(t,e,i)=>{"use strict";i.d(e,{UE:()=>p,UU:()=>m,cY:()=>f,we:()=>c});var s=i(76492),n=i(12115),r=i(47650),l="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function h(t,e){let i,s,n;if(t===e)return!0;if(typeof t!=typeof e)return!1;if("function"==typeof t&&t.toString()===e.toString())return!0;if(t&&e&&"object"==typeof t){if(Array.isArray(t)){if((i=t.length)!==e.length)return!1;for(s=i;0!=s--;)if(!h(t[s],e[s]))return!1;return!0}if((i=(n=Object.keys(t)).length)!==Object.keys(e).length)return!1;for(s=i;0!=s--;)if(!({}).hasOwnProperty.call(e,n[s]))return!1;for(s=i;0!=s--;){let i=n[s];if(("_owner"!==i||!t.$$typeof)&&!h(t[i],e[i]))return!1}return!0}return t!=t&&e!=e}function o(t){return"undefined"==typeof window?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function a(t,e){let i=o(t);return Math.round(e*i)/i}function u(t){let e=n.useRef(t);return l(()=>{e.current=t}),e}function c(t){void 0===t&&(t={});let{placement:e="bottom",strategy:i="absolute",middleware:c=[],platform:d,elements:{reference:f,floating:m}={},transform:p=!0,whileElementsMounted:v,open:g}=t,[b,w]=n.useState({x:0,y:0,strategy:i,placement:e,middlewareData:{},isPositioned:!1}),[y,x]=n.useState(c);h(y,c)||x(c);let[M,S]=n.useState(null),[C,_]=n.useState(null),k=n.useCallback(t=>{t!==O.current&&(O.current=t,S(t))},[]),z=n.useCallback(t=>{t!==E.current&&(E.current=t,_(t))},[]),L=f||M,T=m||C,O=n.useRef(null),E=n.useRef(null),P=n.useRef(b),D=null!=v,N=u(v),W=u(d),R=u(g),$=n.useCallback(()=>{if(!O.current||!E.current)return;let t={placement:e,strategy:i,middleware:y};W.current&&(t.platform=W.current),(0,s.rD)(O.current,E.current,t).then(t=>{let e={...t,isPositioned:!1!==R.current};F.current&&!h(P.current,e)&&(P.current=e,r.flushSync(()=>{w(e)}))})},[y,e,i,W,R]);l(()=>{!1===g&&P.current.isPositioned&&(P.current.isPositioned=!1,w(t=>({...t,isPositioned:!1})))},[g]);let F=n.useRef(!1);l(()=>(F.current=!0,()=>{F.current=!1}),[]),l(()=>{if(L&&(O.current=L),T&&(E.current=T),L&&T){if(N.current)return N.current(L,T,$);$()}},[L,T,$,N,D]);let B=n.useMemo(()=>({reference:O,floating:E,setReference:k,setFloating:z}),[k,z]),I=n.useMemo(()=>({reference:L,floating:T}),[L,T]),A=n.useMemo(()=>{let t={position:i,left:0,top:0};if(!I.floating)return t;let e=a(I.floating,b.x),s=a(I.floating,b.y);return p?{...t,transform:"translate("+e+"px, "+s+"px)",...o(I.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:e,top:s}},[i,p,I.floating,b.x,b.y]);return n.useMemo(()=>({...b,update:$,refs:B,elements:I,floatingStyles:A}),[b,$,B,I,A])}let d=t=>({name:"arrow",options:t,fn(e){let{element:i,padding:n}="function"==typeof t?t(e):t;return i&&({}).hasOwnProperty.call(i,"current")?null!=i.current?(0,s.UE)({element:i.current,padding:n}).fn(e):{}:i?(0,s.UE)({element:i,padding:n}).fn(e):{}}}),f=(t,e)=>({...(0,s.cY)(t),options:[t,e]}),m=(t,e)=>({...(0,s.UU)(t),options:[t,e]}),p=(t,e)=>({...d(t),options:[t,e]})},85118:(t,e,i)=>{"use strict";i.d(e,{J:()=>n});var s=i(40714);function n(t,e,i){return(0,s.f)(t,7*e,i)}},85318:(t,e,i)=>{"use strict";i.d(e,{n:()=>n});var s=i(61183);function n(t,e,i){let[n,r]=(0,s.x)(null==i?void 0:i.in,t,e);return n.getFullYear()-r.getFullYear()}},85744:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"workAsyncStorage",{enumerable:!0,get:function(){return s.workAsyncStorageInstance}});let s=i(17828)},86301:(t,e,i)=>{"use strict";function s(){return"undefined"!=typeof window}function n(t){return h(t)?(t.nodeName||"").toLowerCase():"#document"}function r(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function l(t){var e;return null==(e=(h(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function h(t){return!!s()&&(t instanceof Node||t instanceof r(t).Node)}function o(t){return!!s()&&(t instanceof Element||t instanceof r(t).Element)}function a(t){return!!s()&&(t instanceof HTMLElement||t instanceof r(t).HTMLElement)}function u(t){return!!s()&&"undefined"!=typeof ShadowRoot&&(t instanceof ShadowRoot||t instanceof r(t).ShadowRoot)}function c(t){let{overflow:e,overflowX:i,overflowY:s,display:n}=b(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+i)&&!["inline","contents"].includes(n)}function d(t){return["table","td","th"].includes(n(t))}function f(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch(t){return!1}})}function m(t){let e=v(),i=o(t)?b(t):t;return["transform","translate","scale","rotate","perspective"].some(t=>!!i[t]&&"none"!==i[t])||!!i.containerType&&"normal"!==i.containerType||!e&&!!i.backdropFilter&&"none"!==i.backdropFilter||!e&&!!i.filter&&"none"!==i.filter||["transform","translate","scale","rotate","perspective","filter"].some(t=>(i.willChange||"").includes(t))||["paint","layout","strict","content"].some(t=>(i.contain||"").includes(t))}function p(t){let e=y(t);for(;a(e)&&!g(e);){if(m(e))return e;if(f(e))break;e=y(e)}return null}function v(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}function g(t){return["html","body","#document"].includes(n(t))}function b(t){return r(t).getComputedStyle(t)}function w(t){return o(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function y(t){if("html"===n(t))return t;let e=t.assignedSlot||t.parentNode||u(t)&&t.host||l(t);return u(e)?e.host:e}function x(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}i.d(e,{$4:()=>y,CP:()=>w,L9:()=>b,Lv:()=>d,Tc:()=>v,Tf:()=>f,ZU:()=>c,_m:()=>x,ep:()=>l,eu:()=>g,gJ:()=>p,mq:()=>n,sQ:()=>m,sb:()=>a,v9:()=>function t(e,i,s){var n;void 0===i&&(i=[]),void 0===s&&(s=!0);let l=function t(e){let i=y(e);return g(i)?e.ownerDocument?e.ownerDocument.body:e.body:a(i)&&c(i)?i:t(i)}(e),h=l===(null==(n=e.ownerDocument)?void 0:n.body),o=r(l);if(h){let e=x(o);return i.concat(o,o.visualViewport||[],c(l)?l:[],e&&s?t(e):[])}return i.concat(l,t(l,[],s))},vq:()=>o,zk:()=>r})},86395:(t,e,i)=>{"use strict";i.d(e,{S:()=>n});var s=i(89447);function n(t){return(0,s.a)(t).getSeconds()}},89447:(t,e,i)=>{"use strict";i.d(e,{a:()=>n});var s=i(7239);function n(t,e){return(0,s.w)(e||t,t)}},91121:(t,e,i)=>{"use strict";i.d(e,{s:()=>n});var s=i(61183);function n(t,e,i){let[n,r]=(0,s.x)(null==i?void 0:i.in,t,e);return n.getFullYear()===r.getFullYear()}},91588:(t,e,i)=>{"use strict";i.d(e,{t:()=>n});var s=i(89447);function n(t,e){return(0,s.a)(t,null==e?void 0:e.in).getMonth()}},94458:(t,e,i)=>{"use strict";i.d(e,{d:()=>n});var s=i(25645);function n(t,e,i){return(0,s.e)(t,-e,i)}},95490:(t,e,i)=>{"use strict";i.d(e,{q:()=>n});let s={};function n(){return s}},97165:(t,e,i)=>{"use strict";i.d(e,{a:()=>n});var s=i(89447);function n(t,e,i){let n=(0,s.a)(t,null==i?void 0:i.in);return n.setHours(e),n}},97444:(t,e,i)=>{"use strict";i.d(e,{G:()=>n});var s=i(89447);function n(t){let e=(0,s.a)(t),i=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return i.setUTCFullYear(e.getFullYear()),t-i}},98449:(t,e,i)=>{"use strict";i.d(e,{c:()=>r});var s=i(61183),n=i(50007);function r(t,e,i){let[r,h]=(0,s.x)(null==i?void 0:i.in,t,e),o=l(r,h),a=Math.abs((0,n.m)(r,h));r.setDate(r.getDate()-o*a);let u=Number(l(r,h)===-o),c=o*(a-u);return 0===c?0:c}function l(t,e){let i=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return i<0?-1:i>0?1:i}},98794:(t,e,i)=>{"use strict";i.d(e,{H:()=>l});var s=i(25703),n=i(7239),r=i(89447);function l(t,e){var i;let l,p,v=()=>(0,n.w)(null==e?void 0:e.in,NaN),g=null!=(i=null==e?void 0:e.additionalDigits)?i:2,b=function(t){let e,i={},s=t.split(h.dateTimeDelimiter);if(s.length>2)return i;if(/:/.test(s[0])?e=s[0]:(i.date=s[0],e=s[1],h.timeZoneDelimiter.test(i.date)&&(i.date=t.split(h.timeZoneDelimiter)[0],e=t.substr(i.date.length,t.length))),e){let t=h.timezone.exec(e);t?(i.time=e.replace(t[1],""),i.timezone=t[1]):i.time=e}return i}(t);if(b.date){let t=function(t,e){let i=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(i);if(!s)return{year:NaN,restDateString:""};let n=s[1]?parseInt(s[1]):null,r=s[2]?parseInt(s[2]):null;return{year:null===r?n:100*r,restDateString:t.slice((s[1]||s[2]).length)}}(b.date,g);l=function(t,e){var i,s,n,r,l,h,a,u;if(null===e)return new Date(NaN);let d=t.match(o);if(!d)return new Date(NaN);let p=!!d[4],v=c(d[1]),g=c(d[2])-1,b=c(d[3]),w=c(d[4]),y=c(d[5])-1;if(p){return(i=0,s=w,n=y,s>=1&&s<=53&&n>=0&&n<=6)?function(t,e,i){let s=new Date(0);s.setUTCFullYear(t,0,4);let n=s.getUTCDay()||7;return s.setUTCDate(s.getUTCDate()+((e-1)*7+i+1-n)),s}(e,w,y):new Date(NaN)}{let t=new Date(0);return(r=e,l=g,h=b,l>=0&&l<=11&&h>=1&&h<=(f[l]||(m(r)?29:28))&&(a=e,(u=v)>=1&&u<=(m(a)?366:365)))?(t.setUTCFullYear(e,g,Math.max(v,b)),t):new Date(NaN)}}(t.restDateString,t.year)}if(!l||isNaN(+l))return v();let w=+l,y=0;if(b.time&&isNaN(y=function(t){var e,i,n;let r=t.match(a);if(!r)return NaN;let l=d(r[1]),h=d(r[2]),o=d(r[3]);return(e=l,i=h,n=o,24===e?0===i&&0===n:n>=0&&n<60&&i>=0&&i<60&&e>=0&&e<25)?l*s.s0+h*s.Cg+1e3*o:NaN}(b.time)))return v();if(b.timezone){if(isNaN(p=function(t){var e,i;if("Z"===t)return 0;let n=t.match(u);if(!n)return 0;let r="+"===n[1]?-1:1,l=parseInt(n[2]),h=n[3]&&parseInt(n[3])||0;return(e=0,(i=h)>=0&&i<=59)?r*(l*s.s0+h*s.Cg):NaN}(b.timezone)))return v()}else{let t=new Date(w+y),i=(0,r.a)(0,null==e?void 0:e.in);return i.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),i.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),i}return(0,r.a)(w+y+p,null==e?void 0:e.in)}let h={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,a=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,u=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(t){return t?parseInt(t):1}function d(t){return t&&parseFloat(t.replace(",","."))||0}let f=[31,null,31,30,31,30,31,31,30,31,30,31];function m(t){return t%400==0||t%4==0&&t%100!=0}},99026:(t,e,i)=>{"use strict";function s(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}i.d(e,{$:()=>s})}}]);