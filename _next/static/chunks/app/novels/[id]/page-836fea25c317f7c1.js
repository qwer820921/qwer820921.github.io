(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7130],{2164:(e,a,s)=>{Promise.resolve().then(s.bind(s,89996))},32495:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var t=s(95155),c=s(6874),l=s.n(c),n=s(35695),r=s(30908),i=s.n(r);let h=[{label:"全部",path:"/novels",icon:"\uD83D\uDCDA",exact:!0},{label:"書櫃",path:"/novels/collection",icon:"⭐",exact:!1},{label:"設定",path:"/novels/settings",icon:"⚙️",exact:!1}];function d(){let e=(0,n.usePathname)();return(0,t.jsx)("nav",{className:i().bottomTabs,children:h.map(a=>{let s=a.exact?e===a.path:e.startsWith(a.path);return(0,t.jsxs)(l(),{href:a.path,className:"".concat(i().tabItem," ").concat(s?i().tabActive:""),children:[(0,t.jsx)("span",{className:i().tabIcon,children:a.icon}),(0,t.jsx)("span",{className:i().tabLabel,children:a.label})]},a.path)})})}},35695:(e,a,s)=>{"use strict";var t=s(18999);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},89996:(e,a,s)=>{"use strict";s.d(a,{default:()=>m});var t=s(95155),c=s(12115),l=s(6874),n=s.n(l),r=s(26682),i=s(55663),h=s(32495),d=s(30908),o=s.n(d);function m(e){var a,s;let{bookId:l}=e,{novels:d,novelsLoading:m,novelsError:x,chaptersMap:u,chaptersLoading:p,chaptersError:j,fetchLibrary:v,fetchChapters:N,getNovelById:b}=(0,r.z)(),[f,g]=(0,c.useState)(!1),[C,_]=(0,c.useState)(!1),E=b(l),L=null!=(s=null==(a=u[l])?void 0:a.data)?s:[],O=m&&!E||p[l]&&0===L.length,S=x||j[l]||(m||E?null:"找不到這本書的資料");(0,c.useEffect)(()=>{v(),N(l)},[l,v,N]),(0,c.useEffect)(()=>{g((0,i.c7)("COLLECTION",[]).includes(l))},[l]);let k=(0,c.useCallback)(()=>{let e=(0,i.c7)("COLLECTION",[]),a=f?e.filter(e=>e!==l):[...e,l];(0,i.cT)("COLLECTION",a),g(!f)},[l,f]);return O?(0,t.jsxs)("div",{className:o().pageContainer,children:[(0,t.jsx)("div",{className:o().loadingState,children:"正在整理書頁..."}),(0,t.jsx)(h.A,{})]}):S||!E?(0,t.jsxs)("div",{className:o().pageContainer,children:[(0,t.jsx)("div",{className:o().errorState,children:S}),(0,t.jsx)(h.A,{})]}):(0,t.jsxs)("div",{className:o().pageContainer,children:[(0,t.jsx)("div",{className:o().backNav,children:(0,t.jsx)(n(),{href:"/novels",children:"← 返回藏書閣"})}),(0,t.jsxs)("div",{className:o().detailHeader,children:[(0,t.jsx)("div",{className:o().detailCover,children:E.cover_url&&!C?(0,t.jsx)("img",{src:(0,i.e4)(E.cover_url),alt:E.title,onError:()=>_(!0)}):(0,t.jsx)("img",{src:"/images/no_cover_5.png",alt:E.title})}),(0,t.jsxs)("div",{className:o().detailInfo,children:[(0,t.jsx)("h1",{children:E.title}),(0,t.jsxs)("p",{className:o().authorName,children:["作者：",E.author]}),(0,t.jsx)("div",{className:o().tagsContainer,children:E.tags.map((e,a)=>(0,t.jsx)("span",{className:o().tag,children:e},a))}),(0,t.jsxs)("div",{className:o().metaData,children:[(0,t.jsxs)("p",{children:["狀態：",E.status]}),(0,t.jsxs)("p",{children:["總字數：",E.total_words.toLocaleString()," 字"]})]}),(0,t.jsx)("button",{className:"".concat(o().favoriteBtn," ").concat(f?o().favorited:""),onClick:k,children:f?"★ 已收藏":"☆ 加入收藏"})]})]}),(0,t.jsxs)("div",{className:o().summarySection,children:[(0,t.jsx)("h2",{children:"作品簡介"}),(0,t.jsx)("p",{children:E.summary})]}),(0,t.jsxs)("div",{className:o().chaptersSection,children:[(0,t.jsxs)("div",{className:o().chaptersHeader,children:[(0,t.jsx)("h2",{children:"章節目錄"}),(0,t.jsxs)("span",{className:o().chapterCount,children:["共 ",L.length," 章"]})]}),(0,t.jsx)("div",{className:o().chapterList,children:L.length>0?L.map(e=>(0,t.jsxs)(n(),{href:"/novels/reader/".concat(l,"#").concat(e.chapter_index),className:o().chapterItem,children:[(0,t.jsxs)("span",{className:o().chapterTitle,children:["第 ",e.chapter_index," 章　",e.chapter_title]}),(0,t.jsx)("span",{className:o().chapterDate,children:e.publish_date})]},e.chapter_index)):(0,t.jsx)("p",{className:o().emptyState,children:"作者還在努力碼字中，尚未發布任何章節。"})})]}),(0,t.jsx)(h.A,{})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[5095,3464,6874,7031,8441,1684,7358],()=>a(2164)),_N_E=e.O()}]);