(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9083],{7585:(e,t,n)=>{Promise.resolve().then(n.bind(n,16281))},13742:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var l=n(95155),r=n(55663),a=n(99512),s=n(30908),i=n.n(s);function c(e){let{isOpen:t,settings:n,onSettingsChange:s,onClose:c}=e,o=e=>{let t={...n,...e};s(t),(0,r.cT)("SETTINGS",t)},u=a.LC.fontSizes,d=u.indexOf(n.fontSize);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"".concat(i().menuOverlay," ").concat(t?i().menuOverlayVisible:""),onClick:c}),(0,l.jsxs)("div",{className:"".concat(i().readerMenu," ").concat(t?i().readerMenuOpen:""),children:[(0,l.jsx)("div",{className:i().menuHandle,onClick:c,children:(0,l.jsx)("span",{className:i().menuHandleBar})}),(0,l.jsxs)("div",{className:i().menuSection,children:[(0,l.jsx)("span",{className:i().menuSectionLabel,children:"主題"}),(0,l.jsx)("div",{className:i().menuThemeRow,children:a.LC.themes.map(e=>{let t=a.lt[e.id],r=n.theme===e.id;return(0,l.jsx)("button",{className:"".concat(i().menuThemeBtn," ").concat(r?i().menuThemeBtnActive:""),onClick:()=>o({theme:e.id}),style:{backgroundColor:t.background,color:t.text},"aria-label":"切換至".concat(e.label,"主題"),children:e.label},e.id)})})]}),(0,l.jsxs)("div",{className:i().menuSection,children:[(0,l.jsx)("span",{className:i().menuSectionLabel,children:"字級"}),(0,l.jsxs)("div",{className:i().menuFontSizeRow,children:[(0,l.jsx)("button",{className:i().menuStepBtn,onClick:()=>{d>0&&o({fontSize:u[d-1]})},disabled:d<=0,children:"A−"}),(0,l.jsxs)("span",{className:i().menuFontSizeValue,children:[n.fontSize,"px"]}),(0,l.jsx)("button",{className:i().menuStepBtn,onClick:()=>{d<u.length-1&&o({fontSize:u[d+1]})},disabled:d>=u.length-1,children:"A+"})]})]}),(0,l.jsxs)("div",{className:i().menuSection,children:[(0,l.jsx)("span",{className:i().menuSectionLabel,children:"字體"}),(0,l.jsx)("div",{className:i().menuFontFamilyRow,children:a.LC.fontFamilies.map(e=>(0,l.jsx)("button",{className:"".concat(i().menuFontFamilyBtn," ").concat(n.fontFamily===e.id?i().menuFontFamilyBtnActive:""),onClick:()=>o({fontFamily:e.id}),style:{fontFamily:e.id},children:e.label},e.id))})]}),(0,l.jsxs)("div",{className:i().menuSection,children:[(0,l.jsx)("span",{className:i().menuSectionLabel,children:"行距"}),(0,l.jsx)("div",{className:i().menuLineHeightRow,children:a.LC.lineHeights.map(e=>(0,l.jsxs)("button",{className:"".concat(i().menuLineHeightBtn," ").concat(n.lineHeight===e?i().menuLineHeightBtnActive:""),onClick:()=>o({lineHeight:e}),children:[e,"x"]},e))})]})]})]})}},16281:(e,t,n)=>{"use strict";n.d(t,{default:()=>k});var l=n(95155),r=n(12115),a=n(6874),s=n.n(a),i=n(78327),c=n(81265),o=n(38637),u=n.n(o),d=["color","size","title","className"];function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}var m=(0,r.forwardRef)(function(e,t){var n=e.color,l=e.size,a=void 0===l?"1em":l,s=e.title,i=void 0===s?null:s,c=e.className,o=function(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n={};for(var l in e)if(({}).hasOwnProperty.call(e,l)){if(-1!==t.indexOf(l))continue;n[l]=e[l]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,d);return r.createElement("svg",h({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:void 0===n?"currentColor":n,className:["bi","bi-megaphone-fill",void 0===c?"":c].filter(Boolean).join(" ")},o),i?r.createElement("title",null,i):null,r.createElement("path",{d:"M13 2.5a1.5 1.5 0 0 1 3 0v11a1.5 1.5 0 0 1-3 0zm-1 .724c-2.067.95-4.539 1.481-7 1.656v6.237a25 25 0 0 1 1.088.085c2.053.204 4.038.668 5.912 1.56zm-8 7.841V4.934c-.68.027-1.399.043-2.008.053A2.02 2.02 0 0 0 0 7v2c0 1.106.896 1.996 1.994 2.009l.496.008a64 64 0 0 1 1.51.048m1.39 1.081q.428.032.85.078l.253 1.69a1 1 0 0 1-.983 1.187h-.548a1 1 0 0 1-.916-.599l-1.314-2.48a66 66 0 0 1 1.692.064q.491.026.966.06"}))});m.propTypes={color:u().string,size:u().oneOfType([u().string,u().number]),title:u().string,className:u().string};var f=n(26682),p=n(55663),v=n(13742),g=["color","size","title","className"];function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}var x=(0,r.forwardRef)(function(e,t){var n=e.color,l=e.size,a=void 0===l?"1em":l,s=e.title,i=void 0===s?null:s,c=e.className,o=function(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n={};for(var l in e)if(({}).hasOwnProperty.call(e,l)){if(-1!==t.indexOf(l))continue;n[l]=e[l]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,g);return r.createElement("svg",b({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:void 0===n?"currentColor":n,className:["bi","bi-skip-backward-fill",void 0===c?"":c].filter(Boolean).join(" ")},o),i?r.createElement("title",null,i):null,r.createElement("path",{d:"M.5 3.5A.5.5 0 0 0 0 4v8a.5.5 0 0 0 1 0V8.753l6.267 3.636c.54.313 1.233-.066 1.233-.697v-2.94l6.267 3.636c.54.314 1.233-.065 1.233-.696V4.308c0-.63-.693-1.01-1.233-.696L8.5 7.248v-2.94c0-.63-.692-1.01-1.233-.696L1 7.248V4a.5.5 0 0 0-.5-.5"}))});x.propTypes={color:u().string,size:u().oneOfType([u().string,u().number]),title:u().string,className:u().string};var j=["color","size","title","className"];function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}var w=(0,r.forwardRef)(function(e,t){var n=e.color,l=e.size,a=void 0===l?"1em":l,s=e.title,i=void 0===s?null:s,c=e.className,o=function(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n={};for(var l in e)if(({}).hasOwnProperty.call(e,l)){if(-1!==t.indexOf(l))continue;n[l]=e[l]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,j);return r.createElement("svg",y({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:void 0===n?"currentColor":n,className:["bi","bi-skip-forward-fill",void 0===c?"":c].filter(Boolean).join(" ")},o),i?r.createElement("title",null,i):null,r.createElement("path",{d:"M15.5 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V8.753l-6.267 3.636c-.54.313-1.233-.066-1.233-.697v-2.94l-6.267 3.636C.693 12.703 0 12.324 0 11.693V4.308c0-.63.693-1.01 1.233-.696L7.5 7.248v-2.94c0-.63.693-1.01 1.233-.696L15 7.248V4a.5.5 0 0 1 .5-.5"}))});w.propTypes={color:u().string,size:u().oneOfType([u().string,u().number]),title:u().string,className:u().string};var N=n(30908),S=n.n(N);let O=(0,r.forwardRef)((e,t)=>{let{isOpen:n,onClose:a,paragraphs:s,onParagraphChange:o,onPlayingChange:u}=e,[d,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(0),[p,v]=(0,r.useState)(1),[g,b]=(0,r.useState)([]),[j,y]=(0,r.useState)(""),N=(0,r.useRef)(null),O=(0,r.useRef)(!1),C=[.5,.75,1,1.25,1.5,2,2.5,3];(0,r.useEffect)(()=>{let e=()=>{let e=speechSynthesis.getVoices(),t=e.filter(e=>e.lang.startsWith("zh")||e.lang.startsWith("cmn")),n=t.length>0?t:e;b(n),n.length>0&&!j&&y(n[0].voiceURI)};return e(),speechSynthesis.onvoiceschanged=e,()=>{speechSynthesis.onvoiceschanged=null}},[j]);let k=(0,r.useCallback)(()=>{N.current&&(N.current.onend=null,N.current.onerror=null),speechSynthesis.resume(),speechSynthesis.cancel()},[]);(0,r.useEffect)(()=>()=>{k(),o(null),u(!1)},[k]);let E=(0,r.useCallback)(e=>{if(e<0||e>=s.length){k(),h(!1),u(!1),o(null);return}k();let t=s[e].trim();if(!t)return void E(e+1);let n=new SpeechSynthesisUtterance(t);if(n.rate=p,n.lang="zh-TW",j){let e=g.find(e=>e.voiceURI===j);e&&(n.voice=e)}n.onstart=()=>{f(e),o(e)},n.onend=()=>{E(e+1)},n.onerror=t=>{"canceled"!==t.error&&(console.warn("TTS error:",t.error),E(e+1))},N.current=n,setTimeout(()=>{speechSynthesis.speak(n)},50)},[s,p,j,g,o,u,k]),B=(0,r.useCallback)(()=>{let e=0,t=s.length-1,n=-1;for(;e<=t;){let l=Math.floor((e+t)/2),r=document.getElementById("tts-node-".concat(l));if(r)r.getBoundingClientRect().bottom>90?(n=l,t=l-1):e=l+1;else break}return n},[s.length]),T=(0,r.useCallback)(()=>{if(d)k(),h(!1),u(!1);else{let e=m,t=B();if(-1!==t){let n=document.getElementById("tts-node-".concat(m));if(n){let l=n.getBoundingClientRect();(l.bottom<80||l.top>window.innerHeight)&&(e=t,f(t))}else e=t,f(t)}h(!0),u(!0),E(e)}},[d,m,E,u,k,B]),_=(0,r.useCallback)(()=>{let e=Math.max(0,m-1);f(e),d?E(e):(k(),o(e))},[m,d,E,o,k]),z=(0,r.useCallback)(()=>{let e=Math.min(s.length-1,m+1);f(e),d?E(e):(k(),o(e))},[m,s.length,d,E,o,k]),R=(0,r.useCallback)(()=>{let e=(C.indexOf(p)+1)%C.length,t=C[e];v(t),d&&(k(),setTimeout(()=>{var e;let n=new SpeechSynthesisUtterance((null==(e=s[m])?void 0:e.trim())||"");if(n.rate=t,n.lang="zh-TW",j){let e=g.find(e=>e.voiceURI===j);e&&(n.voice=e)}n.onend=()=>E(m+1),n.onerror=e=>{"canceled"!==e.error&&E(m+1)},N.current=n,speechSynthesis.speak(n)},50))},[p,d,m,s,j,g]),P=(0,r.useCallback)(e=>{O.current=!0,y(e)},[]);return(0,r.useEffect)(()=>{O.current&&d?(O.current=!1,E(m)):O.current=!1},[j]),(0,r.useImperativeHandle)(t,()=>({togglePlay:T}),[T]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"".concat(S().menuOverlay," ").concat(n?S().menuOverlayVisible:""),onClick:a}),(0,l.jsxs)("div",{className:"".concat(S().ttsDrawer," ").concat(n?S().ttsDrawerOpen:""),children:[(0,l.jsx)("div",{className:S().menuHandle,onClick:a,children:(0,l.jsx)("span",{className:S().menuHandleBar})}),(0,l.jsxs)("div",{className:S().ttsControls,children:[(0,l.jsx)("button",{className:S().ttsIconBtn,onClick:_,"aria-label":"上一段",disabled:m<=0,children:(0,l.jsx)(x,{})}),(0,l.jsx)("button",{className:"".concat(S().ttsIconBtn," ").concat(S().ttsPlayBtn),onClick:T,"aria-label":d?"暫停":"播放",children:d?(0,l.jsx)(i.A,{}):(0,l.jsx)(c.A,{style:{marginLeft:"4px"}})}),(0,l.jsx)("button",{className:S().ttsIconBtn,onClick:z,"aria-label":"下一段",disabled:m>=s.length-1,children:(0,l.jsx)(w,{})}),(0,l.jsxs)("button",{className:S().ttsRateBtnPill,onClick:R,"aria-label":"調整語速",children:[p,"x"]})]}),(0,l.jsx)("div",{className:S().ttsProgress,children:(0,l.jsxs)("span",{children:["段落 ",m+1," / ",s.length]})}),g.length>1&&(0,l.jsxs)("div",{className:S().ttsVoiceSection,children:[(0,l.jsx)("span",{className:S().ttsVoiceLabel,children:"語音"}),(0,l.jsx)("select",{className:S().ttsVoiceSelect,value:j,onChange:e=>P(e.target.value),children:g.map(e=>(0,l.jsxs)("option",{value:e.voiceURI,children:[e.name," (",e.lang,")"]},e.voiceURI))})]})]})]})});O.displayName="TTSPlayer";var C=n(99512);function k(e){var t,n;let a,{bookId:o}=e,{chaptersMap:u,fetchChapters:d,fetchChapterContent:h}=(0,f.z)(),g=null!=(n=null==(t=u[o])?void 0:t.data)?n:[],[b,x]=(0,r.useState)([]),[j,y]=(0,r.useState)(1),[w,N]=(0,r.useState)(""),[k,E]=(0,r.useState)(!0),[B,T]=(0,r.useState)(!1),[_,z]=(0,r.useState)(!1),[R,P]=(0,r.useState)(null),[I,A]=(0,r.useState)(C.kR),[H,L]=(0,r.useState)(!1),[F,V]=(0,r.useState)(!1),[M,U]=(0,r.useState)(!1),[D,W]=(0,r.useState)(!1),[q,G]=(0,r.useState)(null),Y=(0,r.useRef)(new Map),J=(0,r.useRef)(null),K=(0,r.useRef)(!1),Q=(0,r.useRef)(null),X=C.lt[I.theme];(0,r.useEffect)(()=>{let e=parseInt(window.location.hash.replace("#",""),10);!isNaN(e)&&e>0&&y(e)},[]),(0,r.useEffect)(()=>{A((0,p.c7)("SETTINGS",C.kR))},[]),(0,r.useEffect)(()=>{d(o)},[o,d]),(0,r.useEffect)(()=>{(async()=>{E(!0),P(null),z(!1);let e=await h(o,j);e?(x([e]),N(e.chapter_title),h(o,j+1)):P("無法取得章節內容，可能是作者還沒發布喔！"),E(!1)})()},[o,j]),(0,r.useEffect)(()=>{let e,t=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{let e=null,t="",n=1/0;if(Y.current.forEach((l,r)=>{let a=l.getBoundingClientRect(),s=Math.abs(a.top-80);a.top<=180&&s<n&&(n=s,e=r,t=l.getAttribute("data-chapter-title")||"")}),null===e&&Y.current.size>0){let n=Array.from(Y.current.entries())[0];n&&(e=n[0],t=n[1].getAttribute("data-chapter-title")||"")}null!==e&&(window.location.hash.replace("#","")!==String(e)&&window.history.replaceState(null,"","#".concat(e)),N(t))})};return window.addEventListener("scroll",t,{passive:!0}),()=>{window.removeEventListener("scroll",t),cancelAnimationFrame(e)}},[b]);let Z=(0,r.useCallback)(async()=>{if(K.current||_)return;K.current=!0,T(!0);let e=b[b.length-1];if(!e){K.current=!1,T(!1);return}let t=e.chapter_index+1,n=await h(o,t);n?(x(e=>[...e,n]),h(o,t+1)):z(!0),T(!1),K.current=!1},[o,b,_,h]);(0,r.useEffect)(()=>{let e=J.current;if(!e)return;let t=new IntersectionObserver(e=>{e[0].isIntersecting&&Z()},{rootMargin:"1000px"});return t.observe(e),()=>t.disconnect()},[Z]);let $=(0,r.useMemo)(()=>b.flatMap(e=>{let t=[];return t.push("第".concat(e.chapter_index,"章 ").concat(e.chapter_title)),e.content.split("\n").forEach(e=>{e.trim()&&t.push(e)}),e.author_note&&t.push("作者有話說：".concat(e.author_note)),t}),[b]),ee=(0,r.useCallback)(e=>{x([]),z(!1),y(e),V(!1),U(!1),G(null),window.history.replaceState(null,"","#".concat(e)),window.scrollTo({top:0})},[]),et=(0,r.useCallback)(e=>{if(F||M)return;let t=e.target;if(t.closest("a")||t.closest("button"))return;let n=e.currentTarget.getBoundingClientRect(),l=e.clientY-n.top,r=n.height/3;l>r&&l<2*r&&L(e=>!e)},[F,M]);(0,r.useEffect)(()=>(document.body.style.overflow=H||F||M?"hidden":"",()=>{document.body.style.overflow=""}),[H,F,M]),(0,r.useEffect)(()=>{if(null!==q){let e=document.getElementById("tts-node-".concat(q));if(e){let t=e.getBoundingClientRect(),n=window.scrollY+t.top;window.scrollTo({top:n-140,behavior:"smooth"})}}},[q]);let en=(0,r.useCallback)((e,t)=>{t?Y.current.set(e,t):Y.current.delete(e)},[]);return k?(0,l.jsx)("div",{className:S().readerLoading,children:"靈力運轉中，正在載入章節..."}):R||0===b.length?(0,l.jsxs)("div",{className:S().readerError,children:[(0,l.jsx)("h2",{children:"前方沒有路了"}),(0,l.jsx)("p",{children:R}),(0,l.jsx)("div",{className:S().readerNavButtons,children:(0,l.jsx)("button",{onClick:()=>window.location.href="/novels/".concat(o),className:S().navBtn,children:"返回目錄"})})]}):(0,l.jsxs)("div",{className:S().readerContainer,style:{backgroundColor:X.background,color:X.text,fontSize:"".concat(I.fontSize,"px"),fontFamily:I.fontFamily,lineHeight:I.lineHeight},onClick:et,children:[(0,l.jsxs)("div",{className:S().readerHeader,children:[(0,l.jsx)(s(),{href:"/novels/".concat(o),className:S().readerBackLink,children:"← 返回"}),(0,l.jsx)("span",{className:S().readerHeaderTitle,children:w}),(0,l.jsxs)("div",{className:S().readerHeaderRight,children:[null!==q&&(0,l.jsx)("button",{className:S().readerSettingsBtn,onClick:()=>{var e;return null==(e=Q.current)?void 0:e.togglePlay()},"aria-label":D?"暫停朗讀":"繼續朗讀",children:D?(0,l.jsx)(i.A,{size:22,color:"#ef4444"}):(0,l.jsx)(c.A,{size:22,color:"#3b82f6"})}),(0,l.jsx)("button",{className:"".concat(S().readerSettingsBtn," ").concat(D?S().ttsBtnPlaying:""),onClick:()=>U(!0),"aria-label":"語音設定",children:(0,l.jsx)(m,{size:18})}),(0,l.jsx)("button",{className:S().readerSettingsBtn,onClick:()=>V(!0),"aria-label":"開啟目錄",children:"☰"}),(0,l.jsx)("button",{className:S().readerSettingsBtn,onClick:()=>L(!0),"aria-label":"開啟閱讀設定",children:"Aa"})]})]}),(a=0,b.map((e,t)=>{let n=a++,r=e.content.split("\n");return(0,l.jsxs)("div",{ref:t=>en(e.chapter_index,t),"data-chapter-index":e.chapter_index,"data-chapter-title":e.chapter_title,children:[t>0&&(0,l.jsx)("div",{className:S().chapterDivider,children:(0,l.jsxs)("span",{children:["— 第 ",e.chapter_index," 章 —"]})}),(0,l.jsx)("h1",{id:"tts-node-".concat(n),className:"".concat(S().readerTitle," ").concat(q===n?S().ttsHighlight:""),children:e.chapter_title}),(0,l.jsxs)("p",{className:S().readerMeta,children:["字數：",e.word_count.toLocaleString()," 字 | 發布於：",e.publish_date]}),(0,l.jsx)("div",{className:S().readerContent,children:r.map((e,t)=>{if(!e.trim())return(0,l.jsxs)("span",{children:[e,"\n"]},t);let n=a++;return(0,l.jsxs)("span",{id:"tts-node-".concat(n),className:q===n?S().ttsHighlight:"",children:[e,"\n"]},t)})}),e.author_note&&(()=>{let t=a++;return(0,l.jsxs)("div",{id:"tts-node-".concat(t),className:"".concat(S().authorNoteBox," ").concat(q===t?S().ttsHighlight:""),children:[(0,l.jsx)("strong",{children:"作者有話說："}),(0,l.jsx)("p",{children:e.author_note})]})})()]},e.chapter_index)})),!_&&(0,l.jsx)("div",{ref:J,className:S().chapterSentinel,children:B&&(0,l.jsx)("p",{children:"正在載入下一章..."})}),_&&(0,l.jsxs)("div",{className:S().readerEndMessage,children:[(0,l.jsx)("p",{children:"— 已是最新章節 —"}),(0,l.jsx)("button",{className:S().navBtnGhost,onClick:()=>V(!0),children:"開啟目錄"})]}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"".concat(S().menuOverlay," ").concat(F?S().menuOverlayVisible:""),onClick:()=>V(!1)}),(0,l.jsxs)("div",{className:"".concat(S().tocDrawer," ").concat(F?S().tocDrawerOpen:""),children:[(0,l.jsx)("div",{className:S().menuHandle,onClick:()=>V(!1),children:(0,l.jsx)("span",{className:S().menuHandleBar})}),(0,l.jsxs)("div",{className:S().tocHeader,children:[(0,l.jsx)("h3",{children:"章節目錄"}),(0,l.jsxs)("span",{className:S().tocCount,children:["共 ",g.length," 章"]})]}),(0,l.jsx)("div",{className:S().tocList,children:g.map(e=>(0,l.jsxs)("button",{className:"".concat(S().tocItem," ").concat(b.some(t=>t.chapter_index===e.chapter_index)?S().tocItemActive:""),onClick:()=>ee(e.chapter_index),children:[(0,l.jsxs)("span",{children:["第 ",e.chapter_index," 章　",e.chapter_title]}),(0,l.jsx)("span",{className:S().tocItemDate,children:e.publish_date})]},e.chapter_index))})]})]}),(0,l.jsx)(v.A,{isOpen:H,settings:I,onSettingsChange:A,onClose:()=>L(!1)}),(0,l.jsx)(O,{ref:Q,isOpen:M,onClose:()=>U(!1),paragraphs:$,onParagraphChange:G,onPlayingChange:W})]})}},38637:(e,t,n)=>{e.exports=n(79399)()},72948:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},78327:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(12115),r=n(38637),a=n.n(r),s=["color","size","title","className"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}var c=(0,l.forwardRef)(function(e,t){var n=e.color,r=e.size,a=void 0===r?"1em":r,c=e.title,o=void 0===c?null:c,u=e.className,d=function(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n={};for(var l in e)if(({}).hasOwnProperty.call(e,l)){if(-1!==t.indexOf(l))continue;n[l]=e[l]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,s);return l.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:void 0===n?"currentColor":n,className:["bi","bi-pause-fill",void 0===u?"":u].filter(Boolean).join(" ")},d),o?l.createElement("title",null,o):null,l.createElement("path",{d:"M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5m5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5"}))});c.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string};let o=c},79399:(e,t,n)=>{"use strict";var l=n(72948);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,s){if(s!==l){var i=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},81265:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var l=n(12115),r=n(38637),a=n.n(r),s=["color","size","title","className"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var l in n)({}).hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e}).apply(null,arguments)}var c=(0,l.forwardRef)(function(e,t){var n=e.color,r=e.size,a=void 0===r?"1em":r,c=e.title,o=void 0===c?null:c,u=e.className,d=function(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n={};for(var l in e)if(({}).hasOwnProperty.call(e,l)){if(-1!==t.indexOf(l))continue;n[l]=e[l]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,s);return l.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:void 0===n?"currentColor":n,className:["bi","bi-play-fill",void 0===u?"":u].filter(Boolean).join(" ")},d),o?l.createElement("title",null,o):null,l.createElement("path",{d:"m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"}))});c.propTypes={color:a().string,size:a().oneOfType([a().string,a().number]),title:a().string,className:a().string};let o=c},99512:(e,t,n)=>{"use strict";n.d(t,{LC:()=>a,kR:()=>l,lt:()=>r});let l={theme:"sepia",fontSize:18,fontFamily:"sans-serif",lineHeight:1.8},r={light:{background:"#ffffff",text:"#333333"},sepia:{background:"#f4ecd8",text:"#5b4636"},dark:{background:"#1a1a1a",text:"#cccccc"}},a={fontSizes:[14,16,18,20,22,24,28,32],lineHeights:[1.5,1.8,2,2.2],themes:[{id:"light",label:"明亮"},{id:"sepia",label:"護眼"},{id:"dark",label:"深色"}],fontFamilies:[{id:"sans-serif",label:"黑體"},{id:"serif",label:"明體"}]}}},e=>{var t=t=>e(e.s=t);e.O(0,[5095,3464,6874,7031,8441,1684,7358],()=>t(7585)),_N_E=e.O()}]);