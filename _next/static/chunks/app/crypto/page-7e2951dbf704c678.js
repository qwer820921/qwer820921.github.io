(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{5960:()=>{},9170:(e,l,s)=>{"use strict";s.d(l,{A:()=>a});var t=s(5155);s(2115);let a=e=>{let{isLoading:l}=e;return l?(0,t.jsx)("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1050},children:(0,t.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):null}},9239:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>v});var t=s(5155),a=s(2115),n=s(4239),i=s(9170),r=s(9466),c=s(3464),o=function(e){return e["1m"]="1 分鐘",e["3m"]="3 分鐘",e["5m"]="5 分鐘",e["15m"]="15 分鐘",e["30m"]="30 分鐘",e["1h"]="1 小時",e["2h"]="2 小時",e["4h"]="4 小時",e["6h"]="6 小時",e["8h"]="8 小時",e["12h"]="12 小時",e["1d"]="1 天",e["3d"]="3 天",e["1w"]="1 週",e["1M"]="1 月",e}({});let d="https://api.binance.com/api/v3",m=async()=>(await c.A.get("".concat(d,"/exchangeInfo"))).data.symbols.map(e=>({key:e.symbol,value:e.symbol})),u=()=>Object.entries(o).map(e=>{let[l,s]=e;return{key:l,value:s}}),h=async e=>{let{symbol:l,interval:s,startTime:t,endTime:a,limit:n=500}=e;return(await c.A.get("".concat(d,"/klines"),{params:{symbol:l,interval:s,startTime:t,endTime:a,limit:n}})).data},x=()=>[{symbol:"BTCUSDT",value:"BTC/USDT - 60分K",interval:"1h",limit:100},{symbol:"ETHUSDT",value:"ETH/USDT - 15分K",interval:"15m",limit:200},{symbol:"BNBUSDT",value:"BNB/USDT - 日K",interval:"1d",limit:100},{symbol:"BTCUSDT",value:"BTC/USDT - 5分K",interval:"5m",limit:50}];s(5960);let p=(0,s(5028).default)(()=>Promise.all([s.e(781),s.e(342)]).then(s.bind(s,8342)),{loadableGenerated:{webpack:()=>[8342]},ssr:!1}),v=()=>{let[e,l]=(0,a.useState)([]),[s]=(0,a.useState)(u()),[c]=(0,a.useState)(x()),[o,d]=(0,a.useState)("BTCUSDT"),[v,g]=(0,a.useState)("1h"),j=new Date,N=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0),[b,y]=(0,a.useState)(N),[f,T]=(0,a.useState)(j),[S,w]=(0,a.useState)([]),[D,C]=(0,a.useState)(!1),k=(0,a.useRef)(null);(0,a.useEffect)(()=>{m().then(l)},[]),(0,a.useEffect)(()=>{if(!k.current||0===S.length)return;k.current.innerHTML="";let e=(0,r.R9)(k.current);return e.addCandlestickSeries().setData(S.map(e=>{let[l,s,t,a,n]=e;return{time:Number(l)/1e3,open:parseFloat(s),high:parseFloat(t),low:parseFloat(a),close:parseFloat(n)}})),()=>e.remove()},[S]);let B=async()=>{if(o&&v){C(!0);try{let e=await h({symbol:o,interval:v,startTime:null==b?void 0:b.getTime(),endTime:null==f?void 0:f.getTime()});w(e)}catch(e){console.error(e)}finally{C(!1)}}},U=async e=>{d(e.symbol),g(e.interval),y(null),T(null),C(!0);try{let l=await h({symbol:e.symbol,interval:e.interval,limit:e.limit});w(l)}catch(e){console.error(e)}finally{C(!1)}};return(0,t.jsxs)("div",{className:"container py-4",children:[(0,t.jsx)(i.A,{isLoading:D}),(0,t.jsx)("h1",{className:"mb-4 text-center",children:"加密貨幣資訊"}),(0,t.jsxs)("form",{className:"row g-3 align-items-end",children:[(0,t.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("span",{className:"input-group-text",children:"幣種"}),(0,t.jsx)("div",{className:"flex-grow-1",children:(0,t.jsx)(p,{id:"symbol-select",isMulti:!1,value:o,onValueChange:e=>d(e),items:e})})]})}),(0,t.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("span",{className:"input-group-text",children:"K棒週期"}),(0,t.jsx)("div",{className:"flex-grow-1",children:(0,t.jsx)(p,{id:"interval-select",isMulti:!1,value:v,onValueChange:e=>g(e),items:s})})]})}),(0,t.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("span",{className:"input-group-text",children:"開始日期"}),(0,t.jsx)("div",{className:"flex-grow-1",children:(0,t.jsx)(n.Ay,{selected:b,onChange:e=>y(e),selectsStart:!0,startDate:b,endDate:f,showTimeSelect:!0,dateFormat:"Pp",className:"form-control",maxDate:f||void 0})})]})}),(0,t.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,t.jsxs)("div",{className:"input-group",children:[(0,t.jsx)("span",{className:"input-group-text",children:"結束日期"}),(0,t.jsx)("div",{className:"flex-grow-1",children:(0,t.jsx)(n.Ay,{selected:f,onChange:e=>T(e),selectsEnd:!0,startDate:b,endDate:f,showTimeSelect:!0,dateFormat:"Pp",className:"form-control",minDate:b||void 0})})]})})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("button",{className:"btn btn-primary",onClick:B,disabled:!o||!v,children:"查詢 K 線圖"})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h5",{children:"快速查詢"}),(0,t.jsx)("div",{className:"d-flex flex-wrap gap-2",children:c.map(e=>(0,t.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>U(e),children:e.value},e.value))})]}),(0,t.jsx)("div",{className:"mt-5",children:(0,t.jsx)("div",{ref:k,style:{height:"400px"}})})]})}},9476:(e,l,s)=>{Promise.resolve().then(s.bind(s,9239))}},e=>{var l=l=>e(e.s=l);e.O(0,[785,545,579,464,985,441,684,358],()=>l(9476)),_N_E=e.O()}]);