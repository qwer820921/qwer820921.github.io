(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3286],{39170:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});var a=s(95155);s(12115);let l=e=>{let{isLoading:t}=e;return t?(0,a.jsx)("div",{className:"position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1050},children:(0,a.jsx)("div",{className:"spinner-border text-light",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):null}},46945:(e,t,s)=>{"use strict";s.d(t,{default:()=>j});var a=s(95155),l=s(12115),n=s(79466),i=s(23464),r=function(e){return e["1m"]="1 分鐘",e["3m"]="3 分鐘",e["5m"]="5 分鐘",e["15m"]="15 分鐘",e["30m"]="30 分鐘",e["1h"]="1 小時",e["2h"]="2 小時",e["4h"]="4 小時",e["6h"]="6 小時",e["8h"]="8 小時",e["12h"]="12 小時",e["1d"]="1 天",e["3d"]="3 天",e["1w"]="1 週",e["1M"]="1 月",e}({});let c="https://api.binance.com/api/v3",d=async()=>(await i.A.get("".concat(c,"/exchangeInfo"))).data.symbols.map(e=>({key:e.symbol,value:e.symbol})),m=()=>Object.entries(r).map(e=>{let[t,s]=e;return{key:t,value:s}}),o=async e=>{let{symbol:t,interval:s,startTime:a,endTime:l,limit:n=500}=e;return(await i.A.get("".concat(c,"/klines"),{params:{symbol:t,interval:s,startTime:a,endTime:l,limit:n}})).data},u=()=>[{symbol:"BTCUSDT",value:"BTC/USDT - 60分K",interval:"1h",limit:100},{symbol:"ETHUSDT",value:"ETH/USDT - 15分K",interval:"15m",limit:200},{symbol:"BNBUSDT",value:"BNB/USDT - 日K",interval:"1d",limit:100},{symbol:"BTCUSDT",value:"BTC/USDT - 5分K",interval:"5m",limit:50}];var h=s(55028),x=s(39170),v=s(54239);s(35279);let p=e=>{let{selectedDate:t,onDateChange:s,selectsStart:n=!1,selectsEnd:i=!1,startDate:r,endDate:c,showTimeSelect:d=!1,dateFormat:m="yyyy/MM/dd h:mm aa",maxDate:o,minDate:u,className:h="",disabled:x=!1,timeIntervals:p=30}=e,[g,j]=(0,l.useState)(t);return(0,l.useEffect)(()=>{j(t)},[t]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(v.Ay,{selected:g,onChange:e=>{j(e),s(e)},selectsStart:n,selectsEnd:i,startDate:r,endDate:c,showTimeSelect:d,dateFormat:m,maxDate:o,minDate:u,className:"form-control ".concat(h),disabled:x,timeIntervals:p,wrapperClassName:"w-100"})})},g=(0,h.default)(()=>Promise.all([s.e(4781),s.e(8342)]).then(s.bind(s,88342)),{loadableGenerated:{webpack:()=>[88342]},ssr:!1}),j=()=>{let[e,t]=(0,l.useState)([]),[s]=(0,l.useState)(m()),[i]=(0,l.useState)(u()),[r,c]=(0,l.useState)("NXPCUSDT"),[h,v]=(0,l.useState)("1m"),j=new Date,N=new Date(j.getFullYear(),j.getMonth(),j.getDate(),0,0,0),[b,y]=(0,l.useState)(N),[f,w]=(0,l.useState)(j),[D,S]=(0,l.useState)([]),[T,C]=(0,l.useState)(!1),k=(0,l.useRef)(null);(0,l.useEffect)(()=>{d().then(t)},[]),(0,l.useEffect)(()=>{if(!k.current||0===D.length)return;k.current.innerHTML="";let e=(0,n.R9)(k.current);return e.addCandlestickSeries().setData(D.map(e=>{let[t,s,a,l,n]=e;return{time:Number(t)/1e3,open:parseFloat(s),high:parseFloat(a),low:parseFloat(l),close:parseFloat(n)}})),()=>e.remove()},[D]);let E=async()=>{if(r&&h){C(!0);try{let e=await o({symbol:r,interval:h,startTime:null==b?void 0:b.getTime(),endTime:null==f?void 0:f.getTime()});S(e)}catch(e){console.error(e)}finally{C(!1)}}},U=async e=>{c(e.symbol),v(e.interval),y(null),w(null),C(!0);try{let t=await o({symbol:e.symbol,interval:e.interval,limit:e.limit});S(t)}catch(e){console.error(e)}finally{C(!1)}};return(0,a.jsxs)("div",{className:"container py-4",children:[(0,a.jsx)(x.A,{isLoading:T}),(0,a.jsx)("h1",{className:"mb-4 text-center",children:"加密貨幣資訊"}),(0,a.jsxs)("form",{className:"row g-3 align-items-end",children:[(0,a.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text",children:"幣種"}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(g,{id:"symbol-select",isMulti:!1,value:r,onValueChange:e=>c(e),items:e})})]})}),(0,a.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,a.jsxs)("div",{className:"input-group",children:[(0,a.jsx)("span",{className:"input-group-text",children:"K棒週期"}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(g,{id:"interval-select",isMulti:!1,value:h,onValueChange:e=>v(e),items:s})})]})}),(0,a.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,a.jsxs)("div",{className:"input-group w-100",children:[(0,a.jsx)("span",{className:"input-group-text",children:"開始日期"}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(p,{selectedDate:b,onDateChange:y,selectsStart:!0,startDate:b||void 0,endDate:f||void 0,showTimeSelect:!0,maxDate:f||void 0,className:"w-100",timeIntervals:30})})]})}),(0,a.jsx)("div",{className:"col-xl-3 col-lg-6",children:(0,a.jsxs)("div",{className:"input-group w-100",children:[(0,a.jsx)("span",{className:"input-group-text",children:"結束日期"}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(p,{selectedDate:f,onDateChange:w,selectsEnd:!0,startDate:b||void 0,endDate:f||void 0,showTimeSelect:!0,minDate:b||void 0,className:"w-100",timeIntervals:30})})]})})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("button",{className:"btn btn-primary",onClick:E,disabled:!r||!h,children:"查詢 K 線圖"})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h5",{children:"快速查詢"}),(0,a.jsx)("div",{className:"d-flex flex-wrap gap-2",children:i.map(e=>(0,a.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>U(e),children:e.value},e.value))})]}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)("div",{ref:k,style:{height:"400px"}})})]})}},68654:(e,t,s)=>{Promise.resolve().then(s.bind(s,46945))}},e=>{var t=t=>e(e.s=t);e.O(0,[5302,2545,5579,3464,7941,8441,1684,7358],()=>t(68654)),_N_E=e.O()}]);